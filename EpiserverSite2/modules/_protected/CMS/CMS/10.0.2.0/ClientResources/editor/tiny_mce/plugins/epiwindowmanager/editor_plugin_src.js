(function(e){e.create("tinymce.plugins.epiWindowManager",{init:function(t){t.onBeforeRenderUI.add(function(){t.windowManager=new e.epiWindowManager(t)})},getInfo:function(){return{longname:"EPiServer Window Manager",author:"EPiServer AB",authorurl:"http://www.episerver.com",infourl:"http://www.episerver.com",version:"1.0"}}}),e.create("tinymce.epiWindowManager:tinymce.WindowManager",{epiWindowManager:function(t){this.parent(t),this.isIE=e.isIE},open:function(e,t){var n,i=this,o=i.editor;e=e||{},t=t||{},!e.type&&i.isIE&&(i.bookmark=o.selection.getBookmark(1)),e.width=parseInt(e.width||320)+(i.isIE?18:0),e.height=parseInt(e.height||240)+(i.isIE?8:0),t.mce_inline=!0,t.mce_auto_focus=e.auto_focus,n=e.url||e.file,i.features=e,i.params=t;var a=function(){!e.type&&i.isIE&&o.selection.moveToBookmark(i.bookmark)},r=function(t,n){e.onCallback&&e.onCallback(t,n)},s=function(){i.onClose.dispatch(this),o.windowManager.onClose.dispatch()};require(["epi-cms/legacy/LegacyDialogPopup"],function(o){e.dialogArguments=e.dialogArguments||{},e.callbackArguments=e.callbackArguments||{},i.features.height&&(i.features.height+=60);var l=new o({url:n,onCallback:r,onHide:s,onBeforePerformAction:a,callbackArguments:e.callbackArguments,dialogArguments:e.dialogArguments,showCancelButton:!0,features:i.features,autoFit:!i.features.height,showLoadingOverlay:!1});i.onOpen.dispatch(i,e,t),l.show().then(function(){e.onReady&&e.onReady(l)})})},close:function(e){e.EPi.GetDialog(e).Close()},resizeBy:function(){},setTitle:function(){},focus:function(){}}),e.PluginManager.add("epiwindowmanager",e.plugins.epiWindowManager)})(tinymce,epiJQuery);