(function(){tinymce.create("tinymce.plugins.Save",{init:function(e){var t=this;t.editor=e,e.addCommand("mceSave",t._save,t),e.addCommand("mceCancel",t._cancel,t),e.addButton("save",{title:"save.save_desc",cmd:"mceSave"}),e.addButton("cancel",{title:"save.cancel_desc",cmd:"mceCancel"}),e.onNodeChange.add(t._nodeChange,t),e.addShortcut("ctrl+s",e.getLang("save.save_desc"),"mceSave")},getInfo:function(){return{longname:"Save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(e,t){var e=this.editor;e.getParam("save_enablewhendirty")&&(t.setDisabled("save",!e.isDirty()),t.setDisabled("cancel",!e.isDirty()))},_save:function(){var e,t,n=this.editor;return e=tinymce.DOM.get(n.id).form||tinymce.DOM.getParent(n.id,"form"),!n.getParam("save_enablewhendirty")||n.isDirty()?(tinyMCE.triggerSave(),(t=n.getParam("save_onsavecallback"))?(n.execCallback("save_onsavecallback",n)&&(n.startContent=tinymce.trim(n.getContent({format:"raw"})),n.nodeChanged()),void 0):(e?(n.isNotDirty=!0,(null==e.onsubmit||0!=e.onsubmit())&&e.submit(),n.nodeChanged()):n.windowManager.alert("Error: No form element found."),void 0)):void 0},_cancel:function(){var e,t=this.editor,n=tinymce.trim(t.startContent);return(e=t.getParam("save_oncancelcallback"))?(t.execCallback("save_oncancelcallback",t),void 0):(t.setContent(n),t.undoManager.clear(),t.nodeChanged(),void 0)}}),tinymce.PluginManager.add("save",tinymce.plugins.Save)})();