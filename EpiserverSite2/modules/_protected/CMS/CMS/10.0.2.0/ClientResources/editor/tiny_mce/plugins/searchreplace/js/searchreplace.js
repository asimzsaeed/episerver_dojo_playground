tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(){var e=this,t=document.forms[0],n=tinyMCEPopup.getWindowArg("mode");e.switchMode(n),t[n+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),t[n+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(t){e.switchMode(t.substring(0,t.indexOf("_")))})},switchMode:function(e){var t,n=this.lastMode;n!=e&&(t=document.forms[0],n&&(t[e+"_panel_searchstring"].value=t[n+"_panel_searchstring"].value,t[e+"_panel_backwardsu"].checked=t[n+"_panel_backwardsu"].checked,t[e+"_panel_backwardsd"].checked=t[n+"_panel_backwardsd"].checked,t[e+"_panel_casesensitivebox"].checked=t[n+"_panel_casesensitivebox"].checked),mcTabs.displayTab(e+"_tab",e+"_panel"),document.getElementById("replaceBtn").style.display="replace"==e?"inline":"none",document.getElementById("replaceAllBtn").style.display="replace"==e?"inline":"none",this.lastMode=e)},searchNext:function(e){function t(){l=s.getRng().cloneRange(),r.getDoc().execCommand("SelectAll",!1,null),s.setRng(l)}function n(){r.selection.setContent(rs)}var i,o,a,r=tinyMCEPopup.editor,s=r.selection,l=s.getRng(),c=this.lastMode,d=0,u=r.getWin(),m=(r.windowManager,0);if(tinymce.isIE11&&!window.find)return r.windowManager.alert("This feature is not available in IE 11+. Upgrade TinyMCE to 4.x to get this functionallity back."),void 0;if(i=document.forms[0],o=i[c+"_panel_searchstring"].value,a=i[c+"_panel_backwardsu"].checked,ca=i[c+"_panel_casesensitivebox"].checked,rs=i.replace_panel_replacestring.value,tinymce.isIE&&(l=r.getDoc().selection.createRange()),""!=o){switch(ca&&(d=4|d),e){case"all":if(r.execCommand("SelectAll"),r.selection.collapse(!0),tinymce.isIE){for(r.focus(),l=r.getDoc().selection.createRange();l.findText(o,a?-1:1,d);)l.scrollIntoView(),l.select(),n(),m=1,a?l.moveEnd("character",-rs.length):l.moveStart("character",rs.length);tinyMCEPopup.storeSelection()}else for(;u.find(o,ca,a,!1,!1,!1,!1);)n(),m=1;return m?tinyMCEPopup.alert(r.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(r.getLang("searchreplace_dlg.notfound")),void 0;case"current":r.selection.isCollapsed()||n()}s.collapse(a),l=s.getRng(),o&&(tinymce.isIE?(r.focus(),l=r.getDoc().selection.createRange(),l.findText(o,a?-1:1,d)?(l.scrollIntoView(),l.select()):tinyMCEPopup.alert(r.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):u.find(o,ca,a,!1,!1,!1,!1)?t():tinyMCEPopup.alert(r.getLang("searchreplace_dlg.notfound")))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);