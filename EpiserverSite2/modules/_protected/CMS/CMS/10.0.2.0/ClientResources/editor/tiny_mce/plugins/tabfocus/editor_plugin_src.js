(function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.each,i=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(o){function a(e,n){return 9===n.keyCode?t.cancel(n):void 0}function r(o,a){function r(t){function i(e){return"BODY"===e.nodeName||"hidden"!=e.type&&!("none"==e.style.display)&&!("hidden"==e.style.visibility)&&i(e.parentNode)}function a(e){return e.attributes.tabIndex.specified||"INPUT"==e.nodeName||"TEXTAREA"==e.nodeName}function r(){return tinymce.isIE6||tinymce.isIE7}function d(e){return(!r()||a(e))&&"-1"!=e.getAttribute("tabindex")&&i(e)}if(c=e.select(":input:enabled,*[tabindex]:not(iframe)"),n(c,function(e,t){return e.id==o.id?(s=t,!1):void 0}),t>0){for(l=s+1;c.length>l;l++)if(d(c[l]))return c[l]}else for(l=s-1;l>=0;l--)if(d(c[l]))return c[l];return null}var s,l,c,d;return 9===a.keyCode&&(d=i(o.getParam("tab_focus",o.getParam("tabfocus_elements",":prev,:next"))),1==d.length&&(d[1]=d[0],d[0]=":prev"),c=a.shiftKey?":prev"==d[0]?r(-1):e.get(d[0]):":next"==d[1]?r(1):e.get(d[1]))?(c.id&&(o=tinymce.get(c.id||c.name))?o.focus():window.setTimeout(function(){tinymce.isWebKit||window.focus(),c.focus()},10),t.cancel(a)):void 0}o.onKeyUp.add(a),tinymce.isGecko?(o.onKeyPress.add(r),o.onKeyDown.add(a)):o.onKeyDown.add(r)},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)})();