function initCommonAttributes(e){var t=document.forms[0],n=tinyMCEPopup.editor.dom;setFormValue("title",n.getAttrib(e,"title")),setFormValue("id",n.getAttrib(e,"id")),selectByValue(t,"class",n.getAttrib(e,"class"),!0),setFormValue("style",n.getAttrib(e,"style")),selectByValue(t,"dir",n.getAttrib(e,"dir")),setFormValue("lang",n.getAttrib(e,"lang")),setFormValue("onfocus",n.getAttrib(e,"onfocus")),setFormValue("onblur",n.getAttrib(e,"onblur")),setFormValue("onclick",n.getAttrib(e,"onclick")),setFormValue("ondblclick",n.getAttrib(e,"ondblclick")),setFormValue("onmousedown",n.getAttrib(e,"onmousedown")),setFormValue("onmouseup",n.getAttrib(e,"onmouseup")),setFormValue("onmouseover",n.getAttrib(e,"onmouseover")),setFormValue("onmousemove",n.getAttrib(e,"onmousemove")),setFormValue("onmouseout",n.getAttrib(e,"onmouseout")),setFormValue("onkeypress",n.getAttrib(e,"onkeypress")),setFormValue("onkeydown",n.getAttrib(e,"onkeydown")),setFormValue("onkeyup",n.getAttrib(e,"onkeyup"))}function setFormValue(e,t){document.forms[0].elements[e]&&(document.forms[0].elements[e].value=t)}function insertDateTime(e){document.getElementById(e).value=getDateTime(new Date,"%Y-%m-%dT%H:%M:%S")}function getDateTime(e,t){return t=t.replace("%D","%m/%d/%y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+e.getFullYear()),t=t.replace("%y",""+e.getYear()),t=t.replace("%m",addZeros(e.getMonth()+1,2)),t=t.replace("%d",addZeros(e.getDate(),2)),t=t.replace("%H",""+addZeros(e.getHours(),2)),t=t.replace("%M",""+addZeros(e.getMinutes(),2)),t=t.replace("%S",""+addZeros(e.getSeconds(),2)),t=t.replace("%I",""+((e.getHours()+11)%12+1)),t=t.replace("%p",""+(12>e.getHours()?"AM":"PM")),t=t.replace("%%","%")}function addZeros(e,t){var n;if(e=""+e,t>e.length)for(n=0;t-e.length>n;n++)e="0"+e;return e}function selectByValue(e,t,n,i,o){if(e&&e.elements[t]){for(var a=e.elements[t],r=!1,l=0;a.options.length>l;l++){var s=a.options[l];s.value==n||o&&s.value.toLowerCase()==n.toLowerCase()?(s.selected=!0,r=!0):s.selected=!1}if(!r&&i&&""!=n){var s=new Option("Value: "+n,n);s.selected=!0,a.options[a.options.length]=s}return r}}function setAttrib(e,t,n){var i=document.forms[0],o=i.elements[t.toLowerCase()];tinyMCEPopup.editor.dom.setAttrib(e,t,n||o.value)}function setAllCommonAttribs(e){setAttrib(e,"title"),setAttrib(e,"id"),setAttrib(e,"class"),setAttrib(e,"style"),setAttrib(e,"dir"),setAttrib(e,"lang")}function insertInlineElement(e){var t=tinyMCEPopup.editor,n=t.dom;t.getDoc().execCommand("FontName",!1,"mceinline"),tinymce.each(n.select("span,font"),function(t){("mceinline"==t.style.fontFamily||"mceinline"==t.face)&&n.replace(n.create(e,{"data-mce-new":1}),t,1)})}tinyMCEPopup.requireLangPack(),SXE={currentAction:"insert",inst:tinyMCEPopup.editor,updateElement:null},SXE.focusElement=SXE.inst.selection.getNode(),SXE.initElementDialog=function(e){addClassesToList("class",tinyMCEPopup.getParam("style_formats",!1)?{tag:e}:"xhtmlxtras_styles"),TinyMCE_EditableSelects.init(),e=e.toLowerCase();var t=SXE.inst.dom.getParent(SXE.focusElement,e.toUpperCase());null!=t&&t.nodeName.toUpperCase()==e.toUpperCase()&&(SXE.currentAction="update"),"update"==SXE.currentAction&&(initCommonAttributes(t),SXE.updateElement=t),document.forms[0].insert.value=tinyMCEPopup.getLang(SXE.currentAction,"Insert",!0)},SXE.insertElement=function(e){var t,n=SXE.inst.dom.getParent(SXE.focusElement,e.toUpperCase());if(null==n){var i=SXE.inst.selection.getContent();if(i.length>0){t=e,insertInlineElement(e);for(var o=tinymce.grep(SXE.inst.dom.select(e)),a=0;o.length>a;a++){var n=o[a];SXE.inst.dom.getAttrib(n,"data-mce-new")&&(n.id="",n.setAttribute("id",""),n.removeAttribute("id"),n.removeAttribute("data-mce-new"),setAllCommonAttribs(n))}}}else setAllCommonAttribs(n);SXE.inst.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel")},SXE.removeElement=function(e){e=e.toLowerCase(),elm=SXE.inst.dom.getParent(SXE.focusElement,e.toUpperCase()),elm&&elm.nodeName.toUpperCase()==e.toUpperCase()&&(tinyMCE.execCommand("mceRemoveNode",!1,elm),SXE.inst.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel"))},SXE.showRemoveButton=function(){document.getElementById("remove").style.display=""},SXE.containsClass=function(e,t){return e.className.indexOf(t)>-1?!0:!1},SXE.removeClass=function(e,t){if(null==e.className||""==e.className||!SXE.containsClass(e,t))return!0;for(var n=e.className.split(" "),i="",o=0,a=n.length;a>o;o++)n[o]!=t&&(i+=n[o]+" ");e.className=i.substring(0,i.length-1)},SXE.addClass=function(e,t){return SXE.containsClass(e,t)||(e.className?e.className+=" "+t:e.className=t),!0};