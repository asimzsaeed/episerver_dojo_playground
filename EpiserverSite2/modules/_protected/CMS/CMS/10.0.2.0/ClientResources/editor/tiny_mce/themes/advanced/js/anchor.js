tinyMCEPopup.requireLangPack();var AnchorDialog={init:function(e){var t,n=document.forms[0];this.editor=e,t=e.dom.getParent(e.selection.getNode(),"A"),v=e.dom.getAttrib(t,"name")||e.dom.getAttrib(t,"id"),v&&(this.action="update",n.anchorName.value=v),n.insert.value=e.getLang(t?"update":"insert")},update:function(){var e,t,n=this.editor,i=document.forms[0].anchorName.value;if(!i||!/^[a-z][a-z0-9\-\_:\.]*$/i.test(i))return tinyMCEPopup.alert("advanced_dlg.anchor_invalid"),void 0;tinyMCEPopup.restoreSelection(),"update"!=this.action&&n.selection.collapse(1);var o=n.schema.getElementRule("a");if(t=!o||o.attributes.name?"name":"id",e=n.dom.getParent(n.selection.getNode(),"A"))e.setAttribute(t,i),e[t]=i,n.undoManager.add();else{var a={"class":"mceItemAnchor"};a[t]=i,n.execCommand("mceInsertContent",0,n.dom.createHTML("a",a,"ï»¿")),n.nodeChanged()}tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(AnchorDialog.init,AnchorDialog);