var Validator={isEmail:function(e){return this.test(e,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(e){return this.test(e,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(e){return this.test(e,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(e){return this.test(e,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(e){var t,n;if("SELECT"==e.nodeName&&1>e.selectedIndex)return!0;if("checkbox"==e.type&&!e.checked)return!0;if("radio"==e.type){for(n=0,t=e.form.elements;t.length>n;n++)if("radio"==t[n].type&&t[n].name==e.name&&t[n].checked)return!1;return!0}return RegExp("^\\s*$").test(1==e.nodeType?e.value:e)},isNumber:function(e,t){return!(isNaN(1==e.nodeType?e.value:e)||t&&this.test(e,"^-?[0-9]*\\.[0-9]*$"))},test:function(e,t){return e=1==e.nodeType?e.value:e,""==e||RegExp(t).test(e)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(e){var t;for(t in e)this.settings[t]=e[t]},validate:function(e){var t,n,i=this.settings,o=0;for(n=this.tags(e,"label"),t=0;n.length>t;t++)this.removeClass(n[t],i.invalid_cls),n[t].setAttribute("aria-invalid",!1);return o+=this.validateElms(e,"input"),o+=this.validateElms(e,"select"),o+=this.validateElms(e,"textarea"),3==o},invalidate:function(e){this.mark(e.form,e)},getErrorMessages:function(e){var t,n,i,o,a=this.settings,r=[],s=tinyMCEPopup.editor;for(t=this.tags(e,"label"),n=0;t.length>n;n++)this.hasClass(t[n],a.invalid_cls)&&(i=document.getElementById(t[n].getAttribute("for")),o={field:t[n].textContent},this.hasClass(i,a.min_cls,!0)?(message=s.getLang("invalid_data_min"),o.min=this.getNum(i,a.min_cls)):message=this.hasClass(i,a.number_cls)?s.getLang("invalid_data_number"):this.hasClass(i,a.size_cls)?s.getLang("invalid_data_size"):s.getLang("invalid_data"),message=message.replace(/{\#([^}]+)\}/g,function(e,t){return o[t]||"{#"+t+"}"}),r.push(message));return r},reset:function(e){var t,n,i,o=["label","input","select","textarea"],a=this.settings;if(null!=e)for(t=0;o.length>t;t++)for(i=this.tags(e.form?e.form:e,o[t]),n=0;i.length>n;n++)this.removeClass(i[n],a.invalid_cls),i[n].setAttribute("aria-invalid",!1)},validateElms:function(e,t){var n,i,o,a,r=this.settings,s=!0,l=Validator;for(n=this.tags(e,t),i=0;n.length>i;i++)o=n[i],this.removeClass(o,r.invalid_cls),this.hasClass(o,r.required_cls)&&l.isEmpty(o)&&(s=this.mark(e,o)),this.hasClass(o,r.number_cls)&&!l.isNumber(o)&&(s=this.mark(e,o)),this.hasClass(o,r.int_cls)&&!l.isNumber(o,!0)&&(s=this.mark(e,o)),this.hasClass(o,r.url_cls)&&!l.isAbsUrl(o)&&(s=this.mark(e,o)),this.hasClass(o,r.email_cls)&&!l.isEmail(o)&&(s=this.mark(e,o)),this.hasClass(o,r.size_cls)&&!l.isSize(o)&&(s=this.mark(e,o)),this.hasClass(o,r.id_cls)&&!l.isId(o)&&(s=this.mark(e,o)),this.hasClass(o,r.min_cls,!0)&&(a=this.getNum(o,r.min_cls),(isNaN(a)||parseInt(o.value)<parseInt(a))&&(s=this.mark(e,o))),this.hasClass(o,r.max_cls,!0)&&(a=this.getNum(o,r.max_cls),(isNaN(a)||parseInt(o.value)>parseInt(a))&&(s=this.mark(e,o)));return s},hasClass:function(e,t,n){return RegExp("\\b"+t+(n?"[0-9]+":"")+"\\b","g").test(e.className)},getNum:function(e,t){return t=e.className.match(RegExp("\\b"+t+"([0-9]+)\\b","g"))[0],t=t.replace(/[^0-9]/g,"")},addClass:function(e,t,n){var i=this.removeClass(e,t);e.className=n?t+(""!=i?" "+i:""):(""!=i?i+" ":"")+t},removeClass:function(e,t){return t=e.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),e.className=" "!=t?t:""},tags:function(e,t){return e.getElementsByTagName(t)},mark:function(e,t){var n=this.settings;return this.addClass(t,n.invalid_cls),t.setAttribute("aria-invalid","true"),this.markLabels(e,t,n.invalid_cls),!1},markLabels:function(e,t,n){var i,o;for(i=this.tags(e,"label"),o=0;i.length>o;o++)(i[o].getAttribute("for")==t.id||i[o].htmlFor==t.id)&&this.addClass(i[o],n);return null}};