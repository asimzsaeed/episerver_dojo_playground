//>>built
define("epi-cms/ContextSynchronizer",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/when","epi/shell/_ContextMixin","epi-cms/core/ContentReference"],function(_1,_2,_3,_4,_5,_6){return _1([_5],{_subscribeHandle:null,constructor:function(){this._subscribeHandle=_3.subscribe("/epi/cms/contentdata/updated",this,this._updateCurrentContext);},_updateCurrentContext:function(_7){var _8=_7.contentLink;_4(this.getCurrentContext(),function(_9){if(_9&&_6.compareIgnoreVersion(_9.id,_8)){var _a={uri:"epi.cms.contentdata:///"+_8};if(_9.languageContext){_a.epslanguage=_9.languageContext.preferredLanguage;}_3.publish("/epi/shell/context/updateRequest",_a);}});},destroy:function(){_3.unsubscribe(this._subscribeHandle);}});});