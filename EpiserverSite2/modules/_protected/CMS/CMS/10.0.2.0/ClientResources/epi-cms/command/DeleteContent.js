//>>built
define("epi-cms/command/DeleteContent",["dojo/_base/declare","dojo/_base/lang","dojo/promise/all","dojo/topic","dojo/when","epi-cms/ApplicationSettings","epi-cms/contentediting/ContentActionSupport","epi/shell/command/_Command","epi/shell/command/_ClipboardCommandMixin","epi/shell/command/_SelectionCommandMixin","epi/i18n!epi/cms/nls/episerver.cms.command","epi/i18n!epi/nls/episerver.shared"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){return _1([_8,_9,_a],{label:_b.movetotrash,iconClass:"epi-iconTrash",hasWastebasket:true,_execute:function(){var _d=this.model,_e=this.clipboard,_f=this.selection.data,_10=this.hasWastebasket?_d.move(_f,{contentLink:_6.wastebasketPage,isWastebasket:true}):_d.remove(_f);return _5(_10,_2.hitch(this,function(){var _11=[];if(_e&&_e.data){_f.forEach(function(_12){var map=_e.data.map(function(_13){return _d.isAncestor(_12.data,_13.data);});_11=_11.concat(map);});}_5(_3(_11),function(_14){var _15=_14.every(function(_16){return _16;});if(_15){_e.clear();}});}),_2.hitch(this,function(){_4.publish("/epi/cms/action/delete/error");}));},_hasWastebasketSetter:function(_17){this.hasWastebasket=_17;this.set("iconClass",_17?"epi-iconTrash":"epi-iconClose");this.set("label",_17?_b.movetotrash:_c.action.deletelabel);},_onModelChange:function(){var _18=this.model,_19=this.selection.data,_1a=function(_1b){var _1c=_1b.data;return _1c&&!_1c.isDeleted&&_18.canDelete(_1c);},_1d=function(_1e){var _1f=_1e.data;return _1f&&_7.hasProviderCapability(_1f.providerCapabilityMask,_7.providerCapabilities.Wastebasket);};this.set("hasWastebasket",!!_19.length&&_19.every(_1d));this.set("canExecute",!!(_18&&_19.length)&&_19.every(_1a)&&(this.hasWastebasket||!_19.some(_1d)));}});});