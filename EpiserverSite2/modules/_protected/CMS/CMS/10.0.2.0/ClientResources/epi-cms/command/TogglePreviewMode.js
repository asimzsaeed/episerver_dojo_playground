//>>built
define("epi-cms/command/TogglePreviewMode",["dojo/_base/declare","dojo/_base/lang","dojo/topic","epi/i18n!epi/cms/nls/episerver.cms.contentediting.toolbar.buttons.togglepreviewmode","epi/shell/command/ToggleCommand","epi-cms/command/_NonEditViewCommandMixin","epi-cms/_SidePanelsToggleMixin","dijit/Destroyable"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1([_5,_6,_7,_8],{iconClass:"epi-iconPreview",tooltip:_4.label,label:_4.label,canExecute:true,constructor:function(){this.own(_3.subscribe("/epi/cms/action/disablepreview",_2.hitch(this,"_deactivate")));},_execute:function(){this.set("active",!this.active);if(this.active){_3.publish("/epi/shell/action/changeview","view");this._hideSidePanels();}else{this._restoreSidePanels();_3.publish("/epi/shell/action/changeview",null);}},_deactivate:function(){if(this.active){this.set("active",false);this._restoreSidePanels();}},_viewChanged:function(_9,_a,_b){this.inherited(arguments);var _c=_b&&_b.viewName;if(_c!=="view"){this._deactivate();}}});});