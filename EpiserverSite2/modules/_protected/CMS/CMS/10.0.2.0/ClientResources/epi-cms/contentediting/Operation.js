//>>built
define("epi-cms/contentediting/Operation",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/Evented","dojo/Stateful"],function(_1,_2,_3,_4,_5){return _2([_5,_4],{inProgress:false,changes:null,constructor:function(){this.changes=[];},begin:function(){this.set("inProgress",true);},save:function(_6){if(this.inProgress){this.changes=_1.filter(this.changes,function(_7){if(_7.propertyName===_6.propertyName){_6.oldValue=_7.oldValue;return false;}return true;});this.changes.push(_6);return;}if(!_3.isArray(_6)){_6=[_6];}this.emit("commit",_6);},end:function(){this.set("inProgress",false);if(this.changes.length>0){this.save(this.changes);}this.changes=[];},abort:function(){this.set("inProgress",false);this.changes=[];}});});