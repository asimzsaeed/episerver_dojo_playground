//>>built
define("epi-cms/contentediting/command/BlockEdit",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/when","epi","epi/dependency","epi-cms/contentediting/command/_ContentAreaCommand","epi-cms/contentediting/ContentActionSupport","epi/i18n!epi/cms/nls/episerver.shared.action"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1([_7],{name:"edit",label:_5.resources.action.edit,tooltip:_5.resources.action.edit,iconClass:"epi-iconPen",category:"menuWithSeparator",constructor:function(){this.contentActionSupport=this.contentActionSupport||_8;var _a=_6.resolve("epi.storeregistry");this._store=_a.get("epi.cms.content.light");},_execute:function(){var _b=this.model.contentLink;_3.publish("/epi/shell/context/request",{uri:"epi.cms.contentdata:///"+_b},{});},_onModelValueChange:function(){var _c=this.model;if(!_c||!_c.contentLink){this.set("canExecute",false);return;}var _d=_c&&this._store.get(_c.contentLink);_4(_d,_2.hitch(this,function(_e){this.set("canExecute",_e&&!_e.isDeleted);if(_e&&_e.accessMask){if(this.contentActionSupport.hasAccess(_e.accessMask,this.contentActionSupport.accessLevel[this.contentActionSupport.action.Edit])){this.set("label",_9.edit);this.set("iconClass","epi-iconPen");}else{this.set("label",_9.view);this.set("iconClass","epi-iconSearch");}}}));}});});