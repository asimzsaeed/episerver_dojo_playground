//>>built
define("epi-cms/contentediting/command/CancelAndEdit",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/date","epi/dependency","epi/shell/command/_Command","epi-cms/core/ContentReference","epi-cms/contentediting/ContentActionSupport","epi-cms/contentediting/command/_ChangeContentStatus","epi/i18n!epi/cms/nls/episerver.cms.contentediting.toolbar.buttons.cancelandedit"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1([_9],{name:"cancelAndEdit",label:_a.label,tooltip:_a.title,iconClass:"epi-iconPen",action:_8.action.Reject,postscript:function(){this.inherited(arguments);this.projectService=this.projectService||_5.resolve("epi.cms.ProjectService");},_execute:function(){this.inherited(arguments).then(_3.hitch(this,function(){var _b=this.model.contentData;this.model.setProperty("iversionable_startpublish",_b.isPendingPublish?_b.created:_b.lastPublished);}));},_onModelChange:function(){this.inherited(arguments);var _c=this,_d=this.model.contentData,_e=_8.hasAccess(_d.accessMask,_8.accessLevel.Edit)&&_d.status===_8.versionStatus.DelayedPublish&&!_d.isPartOfAnotherProject;this.set("canExecute",false);this.set("isAvailable",_e);if(!_e){return;}this.projectService.isPartOfDelayedPublishedProject(_d.contentLink).then(function(_f){_c.set("canExecute",_e&&!_f);});}});});