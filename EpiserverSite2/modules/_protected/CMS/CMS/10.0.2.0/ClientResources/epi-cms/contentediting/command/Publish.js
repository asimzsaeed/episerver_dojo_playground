//>>built
define("epi-cms/contentediting/command/Publish",["dojo/_base/declare","dojo/_base/Deferred","dojo/topic","epi/datetime","epi/shell/command/_Command","epi/shell/TypeDescriptorManager","epi-cms/core/ContentReference","epi-cms/contentediting/ContentActionSupport","epi-cms/contentediting/command/_ChangeContentStatus","epi/i18n!epi/cms/nls/episerver.cms.contentediting.toolbar.buttons"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1([_9],{name:"publish",label:_a.publish.label,executingLabel:_a.publish.executinglabel,tooltip:_a.publish.title,action:_8.action.Publish,forceReload:true,_execute:function(){var _b=new _2();_2.when(this.inherited(arguments),function(_c){var _d=new _7(_c.oldId).createVersionUnspecificReference().toString();_3.publish("/epi/cms/contentdata/childrenchanged",_d);_b.resolve();},function(){_b.reject();});return _b;},_onModelChange:function(){this.inherited(arguments);var _e=this.model.contentData,_f=_e.status,_10=this.model.canChangeContent(_8.action.Publish),_11=_10&&!(_f===_8.versionStatus.Published&&!_e.isCommonDraft),res=null;switch(_f){case _8.versionStatus.CheckedIn:res=_a.approveandpublish;break;case _8.versionStatus.PreviouslyPublished:res=_a.republish;break;case _8.versionStatus.CheckedOut:if(_e.isMasterVersion){res=_a.publish;}else{res=_a.publishchanges;}break;default:res=_a.publishchanges;}var _12=_6.getValue(_e.typeIdentifier,"publishView");this.set("label",res.label);this.set("title",res.title);this.set("executingLabel",res.executinglabel);this.set("canExecute",_11);this.set("isAvailable",_10);this.set("viewName",_12);}});});