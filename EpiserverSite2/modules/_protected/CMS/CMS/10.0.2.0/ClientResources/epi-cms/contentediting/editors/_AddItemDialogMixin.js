//>>built
define("epi-cms/contentediting/editors/_AddItemDialogMixin",["dojo/_base/declare","dojo/_base/lang","dojo/on","epi/shell/widget/_ValueRequiredMixin","epi/shell/widget/dialog/Dialog","../../widget/_HasChildDialogMixin","epi/i18n!epi/cms/nls/episerver.cms.contentediting.editors.collectioneditor","epi/i18n!epi/nls/episerver.shared"],function(_1,_2,on,_3,_4,_5,_6,_7){return _1([_3,_5],{itemEditorType:null,_itemEditor:null,_dialog:null,dialogParams:null,_editingItemIndex:null,postCreate:function(){this.inherited(arguments);this.own(on(this.model,"toggleItemEditor",_2.hitch(this,this._onToggleItemEditor)));},_onToggleItemEditor:function(_8,_9){this._setupItemEditor();this._itemEditor.set("value",_8);this._editingItemIndex=_9;this.isShowingChildDialog=true;this._dialog.show();this._setDialogConfirmActionText(_8);this._setDialogTitle(_8);this._setDialogConfirmActionStatus(_8);},_setupItemEditor:function(){this._itemEditor=this._createItemEditor();this.own(this._dialog=new _4(_2.mixin({title:this._getDialogTitleText(),content:this._itemEditor},this.dialogParams)));this._dialog.own(this._itemEditor,this.connect(this._itemEditor,"onChange","_setDialogConfirmActionStatus"),on(this._dialog,"execute",_2.hitch(this,this._onDialogExecute)),on(this._dialog,"hide",_2.hitch(this,this._onCancelDialog)));},_createItemEditor:function(){return new this.itemEditorType({metadata:this.model.get("itemMetadata"),doLayout:false});},_setDialogTitle:function(_a){this._dialog.set("title",this._getDialogTitleText(_a));},_getDialogTitleText:function(_b){return _6.title;},_onCancelDialog:function(){this.isShowingChildDialog=false;this.onCancelDialog();},_onDialogExecute:function(){if(this.validate()){this.onExecuteDialog();}},onExecuteDialog:function(){},onCancelDialog:function(){},_setDialogConfirmActionText:function(_c){this._dialog.onActionPropertyChanged({name:this._dialog._okButtonName},"label",this._getDialogConfirmActionText(_c));},_getDialogConfirmActionText:function(_d){return _d?_7.action.ok:_7.action.add;},_setDialogConfirmActionStatus:function(_e){this._dialog.onActionPropertyChanged({name:this._dialog._okButtonName},"disabled",!_e||_e==="");}});});