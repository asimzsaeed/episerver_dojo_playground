//>>built
define("epi-cms/contentediting/editors/_ContentAreaTreeModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dijit/tree/model","epi-cms/contentediting/viewmodel/ContentBlockViewModel","epi-cms/contentediting/viewmodel/PersonalizedGroupViewModel"],function(_1,_2,_3,_4,_5,_6){return _2([_4],{model:null,root:{id:"root",name:"root"},constructor:function(_7){_2.safeMixin(this,_7);},pasteItem:function(_8,_9,_a,_b,_c,_d){var _e=_9.id==="root"?this.model:this.model.getChildById(_9.id);var _f=_e.getChildById(_8.id);var _10=_a.id==="root"?this.model:this.model.getChildById(_a.id);if(_f instanceof _5&&!_f.hasAnyRoles()){_f.set("ensurePersonalization",true);}if(_e===_10){this.model.modify(function(){_10.move(_f,_c);});return;}this.model.modify(function(){_e.removeChild(_f);_10.addChild(_f,_c);});},deleteItem:function(_11){this.model.modify(_3.hitch(this,function(){this.model.removeChild(_11,true);}));},newItem:function(_12,_13,_14,_15){if(_12.dndData&&_12.dndData.data){var _16=_13.id==="root"?this.model:this.model.getChildById(_13.id);var _17=_12.dndData.data;if(!(_17 instanceof _5)&&!(_17 instanceof _6)){_17=new _5(_17);}_17.set("ensurePersonalization",true);this.model.modify(function(){_16.addChild(_17,_14);});}},checkItemAcceptance:function(_18,_19,_1a){if(_1a==="over"){if(!(_18 instanceof _6)){return false;}if(!(_19 instanceof _5)){return false;}}if(_18 instanceof _5&&_19 instanceof _6&&_18.contentGroup){return false;}return true;},getRoot:function(_1b){_1b(this.root);},getLabel:function(_1c){return _1c.label;},mayHaveChildren:function(_1d){if(typeof _1d.getChildren=="function"||_1d.id==="root"){return true;}return false;},getIdentity:function(_1e){return _1e.id;},getChildren:function(_1f,_20){var _21;if(_1f.id==="root"){_21=this.model.getChildren();_20(_21);this.model.on("childrenChanged",_3.hitch(this,function(_22,_23,_24){this.onChildrenChange(this.root,this.model.getChildren());}));}else{var _25=this.model.getChildById(_1f.id);if(_25&&typeof _25.getChildren=="function"){_21=_25.getChildren();_20(_21);_25.on("childrenChanged",_3.hitch(this,function(_26,_27,_28){this.onChildrenChange(_1f,_25.getChildren());}));}else{_20([]);}}}});});