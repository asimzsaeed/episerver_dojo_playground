//>>built
require({cache:{"url:epi-cms/contentediting/editors/templates/_PreviewableEditor.html":"<div class=\"dijitReset dijitInline epi-previewableTextBox-wrapper\">\r\n    <span data-dojo-attach-point=\"labelNode\" class=\"epi-previewableTextBox-text dojoxEllipsis dijitInline\"></span>\r\n    <a href=\"#\" data-dojo-attach-point=\"changeNode, focusNode\" class=\"epi-previewableTextBox-link epi-functionLink\">${changeLabel}</a>\r\n</div>\r\n"}});define("epi-cms/contentediting/editors/_PreviewableEditor",["dojo/_base/array","dojo/_base/event","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dijit","dijit/_CssStateMixin","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/ValidationTextBox","epi","dojo/text!./templates/_PreviewableEditor.html","dojox/html/entities"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f){return _3([_9,_8,_a,_b],{value:null,changeLabel:_d.resources.action.change,templateString:_e,control:null,controlParams:[],state:"",_setLabelValueAttr:function(_10){this._set("labelValue",_10);this.labelNode.innerHTML=_10;},_setIsEmptyAttr:function(_11){this._set("isEmpty",_11);if(_11){_5.add(this.domNode,"epi-state-empty");}else{_5.remove(this.domNode,"epi-state-empty");}},_setValueAttr:function(_12){this._set("value",_12);this.control.set("value",_12);this.set("labelValue",typeof (_12)=="string"?_f.encode(_12):_12);this.set("isEmpty",!_12);},onChange:function(val){},buildRendering:function(){this.inherited(arguments);if(!this.control){this.control=new _c();this.own(this.control);}this.control.placeAt(this.domNode,"first");},postCreate:function(){this.inherited(arguments);this._setDisplay(false);this.connect(this.labelNode,"onclick",this._onChangeNodeClick);this.connect(this.changeNode,"onclick",this._onChangeNodeClick);this.connect(this.control,"onChange",this._onControlChange);this.connect(this.control,"onBlur",this._onControlBlur);this.own(this.control.watch("state",_4.hitch(this,function(_13,old,_14){this.set("state",_14);})));this.control.validate();this.set("state",this.control.state);_1.forEach(this.controlParams,function(_15){this.control.set(_15,this.get(_15));},this);},onBlur:function(){this._setDisplay(false);},_setDisplay:function(_16){if(!_16&&!this.validate()){return;}this.showControl=_16;_6.set(this.labelNode,"display",_16?"none":"");_6.set(this.control.domNode,"display",_16?"":"none");if(!this.readOnly){_6.set(this.changeNode,"display",_16?"none":"");}},focus:function(){if(this.showControl){this.control.focus();}else{this.changeNode.focus();}},_onControlChange:function(_17){this._set("value",_17);this.set("labelValue",typeof (_17)=="string"?_f.encode(_17):_17);this.set("isEmpty",!_17);this.onChange(_17);},_onControlBlur:function(){this._setDisplay(false);},_onChangeNodeClick:function(e){_2.stop(e);this._setDisplay(true&&!this.readOnly);_7.selectInputText(this.control.focusNode);},_setReadOnlyAttr:function(_18){this._set("readOnly",_18);_6.set(this.changeNode,"display",this.readOnly?"none":"");this.readOnly&&this._setDisplay(false);},validate:function(){return this.control.validate();},isValid:function(){return this.control.isValid();},getErrorMessage:function(){return this.control.getErrorMessage();}});});