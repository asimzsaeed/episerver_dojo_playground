//>>built
define("epi-cms/contentediting/viewmodel/ContentDetailsViewModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/when","epi","epi/datetime","epi/dependency","epi/username","epi-cms/contentediting/command/AccessRights","epi-cms/contentediting/command/LanguageSettings","epi-cms/contentediting/command/DynamicProperties","epi/shell/command/_CommandConsumerMixin","epi/shell/command/_GlobalCommandProviderMixin","epi-cms/contentediting/ContentActionSupport","epi-cms/core/ContentReference","epi-cms/contentediting/viewmodel/_ContentViewModelObserver"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){return _2([_10,_c,_d],{commandKey:"epi.cms.contentdetailsmenu",res:null,contentTypeName:null,contentId:null,visibleToEveryOne:null,existingLanguages:null,accessRightsCommand:null,languageSettingsCommand:null,dynamicPropertiesCommand:null,expirationCommand:null,constructor:function(_11){_2.safeMixin(this,_11);},postscript:function(){this.initializeCommandProviders();this.accessRightsCommand=new _9();this.languageSettingsCommand=new _a();this.dynamicPropertiesCommand=new _b();if(!this.expirationCommand){var _12=_7.resolve("epi.cms.contentEditing.command.Editing");this.expirationCommand=_12.manageExpiration;}if(!this.store){var _13=_7.resolve("epi.storeregistry");this.store=_13.get("epi.cms.contenttype");}this.inherited(arguments);},destroy:function(){this.accessRightsCommand.destroy();this.languageSettingsCommand.destroy();this.dynamicPropertiesCommand.destroy();this.inherited(arguments);},_setDataModelAttr:function(_14){this.updateCommandModel(_14);this.accessRightsCommand.set("model",_14);this.languageSettingsCommand.set("model",_14);this.dynamicPropertiesCommand.set("model",_14);this.inherited(arguments);},onDataModelChange:function(_15,_16,_17){var _18=this.dataModel.contentData,_19=new _f(_18.contentLink);this.set("contentId",_19.id);this.set("existingLanguages",_1.map(_18.existingLanguageBranches,function(_1a){return {text:_1a.languageId,urlSegment:_1a.urlSegment,isCurrentLanguage:_18.currentLanguageBranch&&_1a.languageId===_18.currentLanguageBranch.languageId,contentLink:new _f(_1a.commonDraftLink).createVersionUnspecificReference().toString()};}));this.set("visibleToEveryOne",_18.visibleToEveryOne);_4(this.store.get(_18.contentTypeID),_3.hitch(this,function(_1b){this.set("contentTypeName",_1b.localizedName);}));this.set("commands",this.getCommands());},getCommands:function(){var _1c=this.inherited(arguments);return [this.dynamicPropertiesCommand,this.languageSettingsCommand,this.expirationCommand].concat(_1c);}});});