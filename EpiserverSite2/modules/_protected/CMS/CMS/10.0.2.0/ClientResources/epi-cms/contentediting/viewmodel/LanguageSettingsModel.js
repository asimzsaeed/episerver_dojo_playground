//>>built
define("epi-cms/contentediting/viewmodel/LanguageSettingsModel",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/Stateful","dojo/when","dojo/Deferred","epi/dependency","epi-cms/component/SiteTreeModel","dijit/Destroyable"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1([_4,_9],{enabled:false,documentLanguage:"",selectedLanguage:"",availableLanguages:[],profile:null,siteTreeModel:null,postscript:function(){this.inherited(arguments);var _a=this;if(!this.siteTreeModel){var _b=_7.resolve("epi.storeregistry"),_c=_b.get("epi.cms.sitestructure");this.siteTreeModel=new _8({store:_c});}this.profile=this.profile||_7.resolve("epi.shell.Profile");this.siteTreeModel.getCurrentSite().then(_2.hitch(this,"_setAvailableLanguages")).then(_2.hitch(this,function(){_5(this.profile.getContentLanguage(),_2.hitch(this,function(_d){this.set("documentLanguage",_d);this.set("selectedLanguage",_d,false);}));}));},_setAvailableLanguages:function(_e){if(_e){var _f=new _6();this.siteTreeModel.getChildren({url:_e.currentSite},_2.hitch(this,function(_10){var obj=_10.filter(function(_11){return (_11.languageId&&_11.name);}).map(function(_12){return {label:_12.name,value:_12.languageId};});this.set("availableLanguages",obj);_f.resolve();}));return _f.promise;}else{return new _6().resolve();}},_enabledSetter:function(_13){if(this.enabled!==_13){this.enabled=_13;_3.publish("/epi/cms/action/eyetoggle",_13);}},_selectedLanguageSetter:function(_14,_15){if(_15!==false){_3.publish("/epi/cms/action/viewsettingvaluechanged","viewlanguage",_14);}}});});