//>>built
define("epi-cms/contentediting/viewmodel/LinkItemModel",["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","dojo/when","epi/Url","epi-cms/contentediting/viewmodel/CollectionItemModel","epi-cms/core/PermanentLinkHelper"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_6],{titleKey:"publicUrl",publicUrl:null,permanentUrl:null,_defaultDataStoreName:"epi.cms.content.light",serialize:function(){return {text:this.text,href:this.href||this.url,target:this.target||null,title:this.title||"",publicUrl:this.publicUrl,typeIdentifier:this.typeIdentifier||""};},_buildPublicUrl:function(_8){var _9=new _5(_8);if(!_9.scheme){_9=new _5("",{scheme:window.location.protocol,authority:window.location.hostname,path:_8});}return _9.toString();},_publicUrlGetter:function(){return this._buildPublicUrl(this.publicUrl||this.url||this.href);},_permanentUrlSetter:function(_a){this.href=this.permanentUrl=_a;},_onTryUpdateItemModel:function(){if(!this.typeIdentifier){return _4(_7.getContent(this.href),_2.hitch(this,function(_b){if(_b){this._parseFromContent(_b);}}));}},_parseFromContent:function(_c){if(_c){this.typeIdentifier=_c.typeIdentifier;this.publicUrl=this._buildPublicUrl(_c.publicUrl);}}});});