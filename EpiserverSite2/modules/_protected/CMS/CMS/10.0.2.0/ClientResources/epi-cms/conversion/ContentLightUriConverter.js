//>>built
define("epi-cms/conversion/ContentLightUriConverter",["dojo/_base/declare","dojo/_base/lang","dojo/when","epi/dependency","epi/UriParser","epi-cms/core/ContentReference"],function(_1,_2,_3,_4,_5,_6){return _1(null,{_contentStore:null,constructor:function(_7){_2.mixin(this,_7);this._contentStore=this._contentStore||_4.resolve("epi.storeregistry").get("epi.cms.content.light");},registerDefaultConverters:function(_8){},convert:function(_9,_a,_b){if(!_b||(!_b.contentLink&&!_b.uri)){return null;}var _c=_b.contentLink||new _5(_b.uri).getId();if(!_c){return null;}_c=new _6(_c).createVersionUnspecificReference().toString();return _3(this._contentStore.get(_c),function(_d){return {url:_d.publicUrl,previewUrl:_d.previewUrl,permanentUrl:_d.permanentLink,text:_d.name,typeIdentifier:_d.typeIdentifier};});}});});