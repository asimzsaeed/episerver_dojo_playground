//>>built
define("epi-cms/legacy/LegacyDialogPopup",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/Deferred","dojo/DeferredList","epi","epi/shell/widget/dialog/Dialog"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1([_8],{url:null,dialogArguments:null,callbackArguments:null,features:null,autoFit:false,showLoadingOverlay:false,legacyDialogObject:null,defaultActionsVisible:false,legacyButtonQuery:null,contentClass:"epi-dialog-fullWidth",dialogClass:"",dialogTitle:null,_legacyDialogContainer:null,_legacyDialogLoadDeferred:null,wrapper:null,buildRendering:function(){this.inherited(arguments);_3.add(this.domNode,"epi-legacyDialog");},postCreate:function(){this.inherited(arguments);this._legacyDialogContainer=_4.create("div");this.set("content",this._legacyDialogContainer);},onCallback:function(_9,_a){},onClose:function(){},onLoad:function(_b){},onMapDialogButton:function(_c){return true;},onBeforePerformAction:function(_d){},show:function(){var _e=new _6([this._loadLegacyDialog(),this.inherited(arguments)]);return _e.then(_2.hitch(this,function(_f){var _10=_f[1];if(this.features&&this.features.left&&this.features.top){this.dialog._relativePosition={x:this.features.left,y:this.features.top};}return _10;}));},_loadLegacyDialog:function(){if(this._legacyDialogLoadDeferred){return this._legacyDialogLoadDeferred;}this._legacyDialogLoadDeferred=new _5();require(["epi-cms/legacy/LegacyDialogWrapper"],_2.hitch(this,function(_11){var _12=new _11({url:this.url,dialogArguments:this.dialogArguments,callbackArguments:this.callbackArguments,features:this.features,autoFit:this.autoFit,showLoadingOverlay:this.showLoadingOverlay,dialogTitle:this.dialogTitle,legacyButtonQuery:this.legacyButtonQuery,showCloseButton:this.showCloseButton,opener:this.opener},this._legacyDialogContainer);if(this._started&&!_12._started){_12.startup();}this.legacyDialogObject=_12.getLegacyDialog();this.connect(_12,"onMapDialogButton",this.onMapDialogButton);this.connect(_12,"onBeforePerformAction",this.onBeforePerformAction);this.connect(_12,"onCallback",function(_13,_14){this.onCallback(_13,_14);setTimeout(_2.hitch(this,function(){this.hide();}),1);});this.connect(_12,"onLoad",function(){this.set("title",_12.title);this.onLoad(_12);});this.connect(_12,"onCancel",function(){this.hide();});this.connect(_12,"onResize",function(){this.resize();});this.connect(this,"onHide",function(){this.onClose();});this.wrapper=_12;this._legacyDialogLoadDeferred.resolve();}));return this._legacyDialogLoadDeferred;}});});