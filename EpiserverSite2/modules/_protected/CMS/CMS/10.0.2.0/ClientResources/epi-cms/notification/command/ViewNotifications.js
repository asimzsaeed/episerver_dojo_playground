//>>built
define("epi-cms/notification/command/ViewNotifications",["dojo/_base/declare","dojo/_base/lang","dojo/on","epi/dependency","dijit/Destroyable","epi/shell/command/_Command","epi/i18n!epi/cms/nls/episerver.cms.notification.command"],function(_1,_2,on,_3,_4,_5,_6){return _1([_5,_4],{iconClass:"epi-iconBell epi-icon--medium",label:"",isAvailable:true,canExecute:true,badgeValue:"",_unreadCount:0,postscript:function(){this.inherited(arguments);this.service=this.service||_3.resolve("epi.cms.NotificationService");this.own(this.service.on("notification-updated",function(_7){if(!_7.hasRead){this.set("_unreadCount",this._unreadCount+1);}}.bind(this)));this._updateUnreadCount();},_execute:function(){this.set("_unreadCount",0);},_updateUnreadCount:function(){this.service.getUnreadNotificationCount().then(function(_8){this.set("_unreadCount",_8);}.bind(this));},__unreadCountSetter:function(_9){var _a=_9>0?"("+_9+")":"";this._unreadCount=_9;this.set({badgeValue:_9>0?_9:null,label:_2.replace(_6.viewnotifications,{unreadcount:_a})});}});});