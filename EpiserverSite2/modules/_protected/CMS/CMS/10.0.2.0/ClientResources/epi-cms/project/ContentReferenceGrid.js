//>>built
require({cache:{"url:epi-cms/project/templates/ContentReferenceGrid.html":"<div class=\"epi-contentReferences\">\n    <div data-dojo-attach-point=\"notificationBar\" class=\"dijitHidden epi-notificationBar epi-notificationBarWithBorders epi-notificationBarItem\">\n        <div data-dojo-attach-point=\"notificationNode\" class=\"epi-notificationBarText\"></div>\n    </div>\n    <div class=\"epi-captionPanel\" data-dojo-attach-point=\"captionPanelNode\">\n        <strong data-dojo-attach-point=\"resultSummaryNode\"></strong>\n        <div class=\"epi-floatRight\">\n            <button class=\"epi-chromelessButton\"\n                    data-dojo-type=\"dijit/form/Button\"\n                    data-dojo-attach-event=\"onClick:_refresh\"\n                    data-dojo-props=\"iconClass:'epi-iconReload'\">${res.buttons.refresh}</button>\n        </div>\n    </div>\n    <div data-dojo-attach-point=\"gridNode\"></div>\n</div>\n"}});define("epi-cms/project/ContentReferenceGrid",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/keys","dojo/on","dojo/when","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dgrid/OnDemandGrid","dgrid/Keyboard","dgrid/Selection","epi/shell/dgrid/Formatter","epi/shell/widget/_ModelBindingMixin","dojo/text!./templates/ContentReferenceGrid.html","epi/i18n!epi/cms/nls/episerver.cms.widget.contentreferences","dijit/form/Button"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f){function _10(_11){return function(_12){if(this._grid){this._grid.set(_11,_12);}};};return _1([_6,_7,_8,_d],{res:_f,templateString:_e,model:null,_gridClass:_1([_9,_a,_b,_c]),_grid:null,_loadCompleteEmitted:false,modelBindingMap:{query:["query"],store:["store"],columns:["columns"],notificationText:["notificationText"],resultSummary:["resultSummary"]},_setResultSummaryAttr:{node:"resultSummaryNode",type:"innerText"},_setQueryAttr:_10("query"),_setColumnsAttr:_10("columns"),_setStoreAttr:_10("store"),_setNotificationTextAttr:function(_13){var _14=_13&&_13.length;_3.toggle(this.notificationBar,"dijitHidden",!_14);this.notificationNode.textContent=_13||"";},_onRowClicked:function(e){if(this.model&&typeof this.model.onItemClicked==="function"){var _15=this._grid.row(e).data;this.model.onItemClicked(_15);}},buildRendering:function(){this.inherited(arguments);var _16=this.model&&this.model.get("columns");this._grid=new this._gridClass({"class":"epi-plain-grid epi-plain-grid--no-border epi-plain-grid--no-header epi-plain-grid--margin-bottom",columns:_16,showHeader:false,cellNavigation:false,selectionMode:"single"},this.gridNode);this._grid.addKeyHandler(_4.ENTER,_2.hitch(this,"_onRowClicked"));this._grid.addKeyHandler(_4.SPACE,_2.hitch(this,"_onRowClicked"));this._grid.on(".dgrid-cell a:click",_2.hitch(this,"_onRowClicked"));this.own(this._grid,on(this._grid,"dgrid-refresh-complete",_2.hitch(this,"_onGridRefreshComplete")));},startup:function(){this.inherited(arguments);this._grid.startup();if(!this._grid.store){this._emitLoadComplete();}},_onGridRefreshComplete:function(_17){var _18=_17.results;_5(_18.total,_2.hitch(this,function(_19){this.model.set("totalItems",_19);this._emitLoadComplete();}));},_emitLoadComplete:function(){if(!this._loadCompleteEmitted){this.emit("contentreferencegrid-loading-complete",{});this._loadCompleteEmitted=true;}},_refresh:function(){this._grid.refresh();}});});