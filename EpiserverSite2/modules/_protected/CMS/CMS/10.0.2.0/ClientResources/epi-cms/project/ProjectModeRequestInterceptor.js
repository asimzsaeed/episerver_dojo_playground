//>>built
define("epi-cms/project/ProjectModeRequestInterceptor",["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","dijit/Destroyable","epi/dependency"],function(_1,_2,_3,_4,_5){return _1([_4],{constructor:function(_6){_1.safeMixin(this,_6);this.projectService=this.projectService||_5.resolve("epi.cms.ProjectService");this.contextService=this.contextService||_5.resolve("epi.shell.ContextService");this.own(this.contextService.registerRequestInterceptor(_2.hitch(this,this._onInterceptRequest)));},_onInterceptRequest:function(_7){var _8=new _3();if(!this.projectService.isProjectModeEnabled){_8.resolve();}else{this.projectService.getCurrentProject().then(function(_9){if(_9){_7.epiprojects=_9.id;_7.epieditmode=true;}}).always(_8.resolve);}return _8.promise;}});});