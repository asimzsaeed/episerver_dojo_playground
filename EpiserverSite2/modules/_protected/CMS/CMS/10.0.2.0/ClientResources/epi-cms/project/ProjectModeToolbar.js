//>>built
require({cache:{"url:epi-cms/project/templates/ProjectModeToolbar.html":"<div class=\"epi-project-mode-toolbar\">\n\t<span data-dojo-attach-point=\"projectIconNode\" class=\"dijitReset dijitInline epi-project-mode-toolbar__icon-node\">\n\t\t<span class=\"dijitReset dijitInline dijitIcon epi-iconProject epi-icon--inverted\"></span>\n    </span>\n    <span data-dojo-attach-point=\"projectLabelNode\" class=\"dijitInline\">${localizations.label}</span>\n    <span data-dojo-attach-point=\"projectSelectorNode\"></span>\n    <span class=\"dijitInline epi-project-mode-toolbar__warning-label\">${localizations.projectdoesnotexists.currentprojectdoesnotexists}</span>\n    <span data-dojo-attach-point=\"contextMenu\" class=\"epi-project-mode-toolbar__contextmenu\"></span>\n    <span data-dojo-attach-point=\"projectOverviewButtonNode\"></span>\n</div>\n","url:epi-cms/project/templates/CurrentProjectDoesNotExistsWarning.html":"<div class=\"epi-project-mode-project-deleted-warning\">${warning}</div>\n<p>${description}</p>"}});define("epi-cms/project/ProjectModeToolbar",["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/on","dojo/dom-style","dojo/dom-class","dojo/string","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/_LayoutWidget","dijit/form/Button","epi/shell/widget/dialog/Alert","epi/shell/widget/_ModelBindingMixin","./ProjectSelector","./viewmodels/ProjectModeToolbarViewModel","epi/dependency","epi/shell/command/builder/DropDownButtonBuilder","epi/shell/command/builder/MenuAssembler","dojo/text!./templates/ProjectModeToolbar.html","dojo/text!./templates/CurrentProjectDoesNotExistsWarning.html","epi/i18n!epi/cms/nls/episerver.cms.components.project.toolbar"],function(_1,_2,_3,on,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14){return _1([_9,_7,_8,_c],{modelBindingMap:{projectName:["projectName"]},templateString:_12,localizations:_14,_projectDoesNotExistWarning:"",postscript:function(){this.inherited(arguments);this.projectService=this.projectService||_f.resolve("epi.cms.ProjectService");},postMixInProperties:function(){this.inherited(arguments);if(!this.model){this.own(this.model=new _e());}this._projectDoesNotExistWarning=_6.substitute(_13,{warning:_14.projectdoesnotexists.alert.warning,description:_14.projectdoesnotexists.alert.description});},buildRendering:function(){this.inherited(arguments);this._setupContextMenu();var _15=this.domNode,_16=this._projectDoesNotExistWarning;this.own(this.projectOverviewButton=new _a({showLabel:true,"class":"dijitHidden epi-chromeless",label:_14.overview.label},this.projectOverviewButtonNode),this.projectOverviewButton.on("click",_2.hitch(this,"_openProjectOverview")),this.projectSelector=new _d({iconClass:"dijitNoIcon","class":"epi-chromeless epi-chromeless--inverted epi-chromeless--with-arrow epi-project-mode-toolbar__selector",enableDefaultValue:true,defaultValueText:_14.defaultoption,store:this.model.projectStore},this.projectSelectorNode),this.model.on("currentProjectDoesNotExists",function(){var _17=new _b({description:_16});_17.show();}));},_toggleOverviewButton:function(_18){var _19=this.projectOverviewButton.domNode;_5.toggle(_19,"dijitHidden",!_18);},startup:function(){this.inherited(arguments);this.own(this.model.watch("overviewButtonVisible",_2.hitch(this,function(_1a,_1b,_1c){this._toggleOverviewButton(_1c);})));var _1d=this.model;this.model.initialize().then(_2.hitch(this,function(){var _1e=this.domNode;this.own(this.projectSelector.watch("value",_2.hitch(this,function(_1f,_20,_21){_5.toggle(_1e,"epi-project-mode-toolbar--project-selected",!!_21);_5.remove(_1e,"epi-project-mode-toolbar--project-deleted");_1d.set("currentProject",_21);})));this.projectSelector.set("value",_1d.get("currentProject"));}));this.own(this.projectService.on("currentProjectChanged",_2.hitch(this,function(_22){this.projectSelector.set("value",_22);})));this.own(this.model.on("animateToolbar",_2.hitch(this,function(){_5.add(this.domNode,"epi-project-mode-toolbar--flash");var _23=on(this.domNode,"animationend",_2.hitch(this,function(){_5.remove(this.domNode,"epi-project-mode-toolbar--flash");_23.remove();}));})));this.own(this.model.watch("currentProject",_2.hitch(this,function(_24,_25,_26){if(_26&&_26.isDeleted){_5.add(this.domNode,"epi-project-mode-toolbar--project-deleted");}})));},_openProjectOverview:function(){var _27=this.projectSelector.get("value");if(_27){this.model.showProjectOverview(_27.id);}},_setProjectNameAttr:function(_28){this.projectSelector.set("label",_28);},_setupContextMenu:function(){this.own(new _11({configuration:[{builder:new _10({settings:{"class":"epi-chromeless",iconClass:"epi-iconContextMenu epi-icon--inverted",showLabel:false,label:_14.contextmenu.label},optionClass:""}),category:"context",target:this.contextMenu}],commandSource:this.model}));}});});