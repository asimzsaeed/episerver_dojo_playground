//>>built
define("epi-cms/project/request/projectMode",["dojo/Deferred","dojo/when","epi/dependency"],function(_1,_2,_3){return {_getCurrentProjectId:function(){var _4="epi.cms.ProjectService";if(_3.exists(_4)){var _5=_3.resolve(_4);return _5.getCurrentProjectId();}return _2(null);},beforeSend:function(_6){var _7=_6.options;if(_7.isProfileRequest){return _2(_6);}var _8=new _1();this._getCurrentProjectId().then(function(_9){if(_9){_7.headers["X-EPiCurrentProject"]=_9;}}).otherwise(function(_a){console.error("Failed to get current project id from project service",_a);}).always(function(){_8.resolve(_6);});return _8.promise;}};});