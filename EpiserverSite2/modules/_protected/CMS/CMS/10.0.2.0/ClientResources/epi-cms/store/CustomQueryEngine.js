//>>built
define("epi-cms/store/CustomQueryEngine",["dojo/_base/array"],function(_1){return function(_2,_3){switch(typeof _2){case "object":case "undefined":var _4=_2;_2=function(_5){for(var _6 in _4){if(_3&&_3.ignore){var _7;for(var _8 in _3.ignore){if(_6===_3.ignore[_8]){_7=true;break;}}if(_7){_7=false;continue;}}var _9=_4[_6];if(_3&&_3.comparers&&_3.comparers[_6]){if(!_3.comparers[_6](_9,_5)){return false;}}else{if(_9&&_9.test){if(!_9.test(_5[_6])){return false;}}else{if(_9&&_9!==_5[_6]){return false;}}}}return true;};break;case "string":if(!this[_2]){throw new Error("No filter function "+_2+" was found in store");}_2=this[_2];break;case "function":break;default:throw new Error("Can not query with a "+typeof _2);}function _a(_b){var _c=_1.filter(_b,_2);if(_3&&_3.sort){_c.sort(function(a,b){for(var _d,i=0;(_d=_3.sort[i]);i++){var _e=a[_d.attribute];var _f=b[_d.attribute];if(typeof _e==="string"&&typeof _f==="string"){_e=_e.toLowerCase();_f=_f.toLowerCase();}if(_e!==_f){return _d.descending===(_e>_f)?-1:1;}}return 0;});}if(_3&&(_3.start||_3.count)){var _10=_c.length;_c=_c.slice(_3.start||0,(_3.start||0)+(_3.count||Infinity));_c.total=_10;}return _c;};_a.matches=_2;return _a;};});