//>>built
define("epi-cms/store/PageVersionQueryEngine",["dojo/_base/array","epi-cms/core/ContentReference"],function(_1,_2){return function(_3,_4){switch(typeof _3){case "object":case "undefined":var _5=_3;_3=function(_6){for(var _7 in _5){var _8=_5[_7],_9=_8.toString();if(_9!==_6[_7]&&(!_2.isContentReference(_9)||!_2.compareIgnoreVersion(_9,_6[_7]))){return false;}}return true;};break;case "string":if(!this[_3]){throw new Error("No filter function "+_3+" was found in store");}_3=this[_3];break;case "function":break;default:throw new Error("Can not query with a "+typeof _3);}function _a(_b){var _c=_1.filter(_b,_3);if(_4&&_4.sort){_c.sort(function(a,b){for(var _d,i=0;(_d=_4.sort[i]);i++){var _e=a[_d.attribute];var _f=b[_d.attribute];if(_e!==_f){return _d.descending===(_e>_f)?-1:1;}}return 0;});}if(_4&&(_4.start||_4.count)){var _10=_c.length;_c=_c.slice(_4.start||0,(_4.start||0)+(_4.count||Infinity));_c.total=_10;}return _c;};_a.matches=_3;return _a;};});