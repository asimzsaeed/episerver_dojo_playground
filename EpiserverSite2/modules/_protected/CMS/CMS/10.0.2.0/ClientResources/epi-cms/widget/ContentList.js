//>>built
define("epi-cms/widget/ContentList",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/aspect","dojo/Evented","dojo/on","dgrid/Keyboard","dgrid/OnDemandList","dgrid/Selection","dojox/html/entities","epi","epi/shell/dgrid/Formatter","epi/shell/dgrid/selection/Extensions","epi/shell/TypeDescriptorManager","epi-cms/core/ContentReference","epi-cms/dgrid/formatters","epi-cms/dgrid/DnD","epi-cms/dgrid/WithContextMenu","epi-cms/widget/ReadOnlyContentList"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,DnD,_11,_12){return _1([_12,_6],{_gridClass:_1([_8,_c,_9,_d,DnD,_7,_11]),resources:"",noDataMessage:null,editingItem:null,postCreate:function(){this.inherited(arguments);_3.add(this.domNode,"epi-contentList");},_setCurrentItemAttr:function(_13){if(!this.get("editingItem")){this.set("editingItem",_13);}this._set("currentItem",_13);this.select(_13);},_setNoDataMessageAttr:function(_14){this.noDataMessage=_14;this.grid.set("noDataMessage",_14);},_dndNodeCreator:function(_15,_16){var _17=_e.getAndConcatenateValues(_15.typeIdentifier,"dndTypes");if(!_17&&this.dndTypes){_17=this.dndTypes;}return {node:_4.create("div").appendChild(document.createTextNode(_15.name)),type:_17,data:_15};},getListSettings:function(){var _18={hasMenu:!!this.contextMenu,settings:{title:_b.resources.action.options}};return _2.delegate(this._getBaseSettings(_18),{noDataMessage:this.noDataMessage,dndParams:{copyOnly:true,selfAccept:false,accept:[],creator:_2.hitch(this,this._dndNodeCreator)}});},setupEvents:function(){this.inherited(arguments);this.own(_5.around(this.grid,"insertRow",_2.hitch(this,this._aroundInsertRow)),this.grid.on("dgrid-contextmenu",_2.hitch(this,"_itemSelected")));},_onSelect:function(evt){this.inherited(arguments);if(this.grid.selectionMode==="single"){this._itemSelected(evt.rows[0].element);}},_itemSelected:function(_19){var row=this.grid.row(_19);this.emit("itemSelected",row.data);},editContent:function(_1a){if(!_1a||!this.grid.row(_1a).element){return;}this.emit("itemAction",_1a);this.set("editingItem",this.currentItem);},editSelectedContent:function(){var _1b=this.grid.getFirstSelectedRow();if(!_1b){return;}this.editContent(_1b.data);},_onChangeContext:function(evt){var _1c=this.grid;on.once(_1c.domNode,"dgrid-refresh-complete",function(evt){_1c.focus(_1c.getFirstSelectedRow());});this.editContent(_1c.row(evt).data);},toggleCut:function(_1d,_1e){var row;if(_1d){row=this.grid.row(_f.toContentReference(_1d.contentLink).id);if(row&&row.element){_3.toggle(row.element,"epi-opacity50",_1e);}}}});});