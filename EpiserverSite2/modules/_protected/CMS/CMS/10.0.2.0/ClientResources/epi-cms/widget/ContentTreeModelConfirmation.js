//>>built
define("epi-cms/widget/ContentTreeModelConfirmation",["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","dojo/string","dojo/when","dojo/_base/json","dojox/html/entities","epi/dependency","epi/string","epi/shell/TypeDescriptorManager","epi/shell/widget/dialog/Alert","epi/shell/widget/dialog/Confirmation","epi-cms/contentediting/ContentActionSupport","epi-cms/widget/sharedContentDialogHandler","epi/i18n!epi/cms/nls/episerver.cms.components.pagetree","epi/i18n!epi/cms/nls/episerver.cms.components.project"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,res,_10){return function(_11){var _12=function(_13){return _13&&typeof _13=="function";};var _14=function(_15,_16){var _17=new _c({description:_a.toHTML(_15),onAction:function(){if(_12(_16)){_16();}}});_17.show();};var _18=function(_19,_1a){var _1b=new _4();_6(_1a,function(_1c){var _1d=new _d({description:_a.toHTML(_1c),title:_19,onAction:function(_1e){_1e?_1b.resolve():_1b.cancel();}});_1d.show();});return _1b;};var _1f=function(_20,_21){_6(_20,function(_22){if(_22&&(_22.message||_22.statusDescription)){var _23=_22.message||_22.statusDescription;_14(_23,_21);}else{if(_12(_21)){_21();}}},function(e){_14(_8.encode(_7.fromJson(e.xhr.responseText)));});return _20;};_3.around(_11,"pasteItem",function(_24){return function(_25,_26,_27,_28,_29){var _2a=_b.getResourceValue(_25.typeIdentifier,"move");var _2b=true;if(_27.isWastebasket){_2b=_f({contentData:_25});}else{if(_29!==undefined&&(_27.properties.pageChildOrderRule!==_e.sortOrder.Index)){var _2c=_5.substitute(res.changepeerorderconfirmation,[_11.getLabel(_27)]);_2b=_18(_2a,_2c);}else{if(!_28){if(!_11.canCut(_25)){_14(_b.getResourceValue(_25.typeIdentifier,"moverequiresdeleteaccess"),function(){return false;});return;}var _2d="{0}<br/><br/>{1}",_2e=_2.replace(_2d,[_b.getResourceValue(_25.typeIdentifier,"moveconfirmation"),_b.getResourceValue(_25.typeIdentifier,"movedescription")]);var _2f=_9.resolve("epi.cms.ProjectService");if(_2f.isProjectModeEnabled){_2e=_2.replace(_2d,[_2e,_10.moveconfirmation]);}_2b=_18(_2a,_2e);}else{if(!_11.canCopy(_25)){_14(_b.getResourceValue(_25.typeIdentifier,"copynotsupported"));return;}}}}var _30=arguments;return _6(_2b,function(){return _24.apply(_11,_30);},function(){return false;});};});_3.after(_11,"pasteItem",function(_31){return _31&&_1f(_31);});_3.after(_11,"remove",function(_32){return _32&&_1f(_32);});return _11;};});