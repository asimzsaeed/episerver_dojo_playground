//>>built
define("epi-cms/widget/LinkEditor",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/dom-class","dijit/_CssStateMixin","epi","epi/dependency","epi/shell/widget/dialog/_DialogContentMixin","epi/shell/widget/FormContainer","epi/shell/widget/_ActionProviderWidget","epi/shell/widget/_ModelBindingMixin","epi-cms/widget/viewmodel/LinkEditorViewModel","epi-cms/widget/HyperLinkSelector"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e){return _2([_a,_b,_9,_6,_c],{_metadataManager:null,modelClassName:_d,hiddenFields:[],postMixInProperties:function(){this.inherited(arguments);this.doLayout=false;this._metadataManager=this._metadataManager||_8.resolve("epi.shell.MetadataManager");if(!this.model&&this.modelClassName){var _f=_2(this.modelClassName);this.model=new _f();}this._actions=[{name:"ok",label:_7.resources.action.ok,settings:{type:"button","class":"Salt"},action:_3.hitch(this,function(){if(this.validate()){this.executeDialog({action:"ok"});}})},{name:"delete",label:_7.resources.action.deletelabel,settings:{type:"button",disabled:true},action:_3.hitch(this,function(){_1.forEach(this.form._getDescendantFormWidgets(),function(_10){_10.set("value","");},this);this.executeDialog({action:"delete"});})},{name:"cancel",label:_7.resources.action.cancel,settings:{type:"button"},action:_3.hitch(this,function(){this.cancelDialog();})}];},postCreate:function(){if(this.modelType){this.metadata=this._metadataManager.getMetadataForType(this.modelType);}this.inherited(arguments);},_setValueAttr:function(_11){this.inherited(arguments);this._handleActions(_11);},onFormCreated:function(_12){_1.forEach(this.form._getDescendantFormWidgets(),function(_13){if(this.hiddenFields&&this.hiddenFields.indexOf(_13.name)>-1){var _14=this._getAncestorNode(_13.domNode,"epi-form-container__section__row");_4.set(_14,{display:"none"});_13.set("required",false);}},this);this._handleActions(this.value);},_handleActions:function(_15){if(this.hasAction("delete")){this.setActionProperty("delete","disabled",this.model._isEmptyObject(_15));}},getFormWidget:function(_16){var _17=_1.filter(this.form._getDescendantFormWidgets(),function(_18){return _18&&_18.name===_16;},this);return _17?_17[0]:null;},_getAncestorNode:function(_19,_1a){var _1b=_19?_19.parentNode:null;if(!_1b){return null;}if(!_5.contains(_1b,_1a)){return this._getAncestorNode(_1b,_1a);}return _1b;},getActions:function(){return this._actions;},isValidValue:function(){return _1.every(this.form._getDescendantFormWidgets(),function(_1c){return _1c.get("required")?!!_1c.get("value"):true;});}});});