//>>built
define("epi-cms/widget/SearchBox",["dojo/_base/declare","dojo/_base/connect","dojo/_base/json","dojo/_base/lang","dojo/when","dojo/dom-construct","dijit/_Widget","epi/shell/SearchManager","epi-cms/widget/ContentSearchBox"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1([_7],{area:null,searchRoots:null,filterOnCulture:null,triggerContextChange:true,_searchBox:null,_searchManager:null,innerSearchBoxClass:"",parameters:null,postCreate:function(){this.inherited(arguments);this._searchManager=new _8();_5(this._searchManager.getStore(),_4.hitch(this,function(_a){this._searchBox=new _9({baseClass:this.innerSearchBoxClass,searchAttr:"searchQuery",store:_a});var _b=_4.mixin({filterOnDeleted:true},this.parameters);_4.mixin(this._searchBox.query,{parameters:_3.toJson(_b)});this._searchBox.on("select",_4.hitch(this,function(_c){this._searchBox.set("value","");this._searchBox.focus();this._searchBox.toggleClearButton();this.onItemAction(_c);}));this.set("filterOnCulture",false);_6.place(this._searchBox.domNode,this.domNode);}));},_setAreaAttr:function(_d){this._set("area",_d);if(this._searchBox){_5(this._searchManager.getProviderQuery(_d),_4.hitch(this,function(_e){_4.mixin(this._searchBox.query,_e);}));}},_setSearchRootsAttr:function(_f){this._set("searchRoots",_f);if(this._searchBox){_4.mixin(this._searchBox.query,{searchRoots:_f});}},_setFilterOnCultureAttr:function(_10){this._set("filterOnCulture",_10);if(this._searchBox){_4.mixin(this._searchBox.query,{filterOnCulture:_10});}},onItemAction:function(_11){if(this.triggerContextChange){var _12={uri:"epi.cms.contentdata:///"+_11.metadata.id};if(_11.metadata.isUntranslatedContent==="false"){_12.epslanguage=_11.metadata.languageBranch;}_2.publish("/epi/shell/context/request",[_12,{sender:null}]);}}});});