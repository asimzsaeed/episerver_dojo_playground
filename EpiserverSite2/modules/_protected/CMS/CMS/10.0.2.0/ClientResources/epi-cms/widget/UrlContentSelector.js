//>>built
define("epi-cms/widget/UrlContentSelector",["dojo/_base/declare","dojo/Deferred","dojo/_base/lang","dojo/when","epi","epi/Url","epi-cms/core/ContentReference","epi-cms/core/PermanentLinkHelper","epi-cms/widget/ContentSelector"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1([_9],{_contentData:null,_isValueInitilized:false,_setValueAndFireOnChange:function(_a){var _b;if(this._valueChangedPromise){this._valueChangedPromise.cancel("");this._valueChangedPromise=null;}if(!_a){this._updateDisplayNode(null);_b=this.value!==_a;this.value=_a;this._contentData=null;if(_b&&this._isValueInitilized){this.onChange(_a);}this._started&&this.validate();this._isValueInitilized=true;return;}_4(this._getContentByPermanentLink(_a),_3.hitch(this,function(_c){this._updateDisplayNode(_c);var _d=_c.permanentLink;this._started&&this.validate();_b=!_5.areEqual(this.value,_d);this.value=_d;if(this._isValueInitilized&&_b){this.onChange(_d);}this._isValueInitilized=true;}));},_convertValueToContentReference:function(_e){if(this._contentData){return new _7(this._contentData.contentLink);}return null;},_getContentByPermanentLink:function(_f){if(_5.areEqual(this.value,_f)&&this._contentData){return this._contentData;}this._valueChangedPromise=new _2();_4(_8.getContent(_f,{allLanguages:true}),_3.hitch(this,function(_10){this._contentData=_10;if(this._valueChangedPromise){this._valueChangedPromise.resolve(_10);}}));return this._valueChangedPromise.promise;}});});