//>>built
define("epi-cms/widget/viewmodel/FileListViewModel",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/Stateful","epi/shell/_StatefulGetterSetterMixin","epi-cms/widget/UploadUtil","epi/i18n!epi/cms/nls/episerver.cms.widget.uploadmultiplefiles"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_4,_5],{progress:null,uploadFiles:null,uploadStatus:null,showProgressBar:false,_setUploadFilesAttr:function(_8){if(!_6.validUploadFiles(_8)){return;}var _9=[];_2.forEach(_8,function(_a){_9.push({fileName:_a.name,size:_a.size,status:_7.uploadform.uploading});},this);this._set("uploadFiles",_9);},_setUploadStatusAttr:function(_b){var _c=this.get("uploadFiles");if(_2.some(_c,function(_d){return _d.status!==_7.uploadform.uploading;})){return;}_2.forEach(_c,function(_e){if(!_b||_b.length<=0){_e.status=_7.uploadform.uploaded;return false;}if(_b[0]&&_b[0].scope===_6.StatusScope.All&&_b[0].itemName===""){_e.status=_7.uploadform.failed;_e.statusMessage=_b[0].message;return false;}var _f=_2.filter(_b,function(_10){return _e.fileName===_10.itemName;});if(_f&&_f.length>0){_e.status=_7.uploadform.failed;_e.statusMessage=_f[0].message;}else{_e.status=_7.uploadform.uploaded;}},this);this._set("uploadFiles",_c);},clear:function(){this._set("uploadFiles",null);}});});