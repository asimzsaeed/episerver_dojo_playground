//>>built
define("epi-cms/widget/viewmodel/MultipleFileUploadViewModel",["dojo/_base/array","dojo/_base/declare","dojo/when","dojo/Stateful","epi/shell/_StatefulGetterSetterMixin"],function(_1,_2,_3,_4,_5){return _2([_4,_5],{upload:function(_6){return _3(this._filterUploadingFiles(_6),function(_7){if(!_7||!(_7.existingContents instanceof Array)||_7.existingContents.length===0){return {showConfirmation:false,uploadingFiles:_6};}return {showConfirmation:true,uploadingFiles:_6,newFiles:_7.newFiles,existingContents:_7.existingContents};});},_filterUploadingFiles:function(_8){var _9=this;if(!_9.store){return null;}return _3(_9.store.query(_9.get("query")),function(_a){var _b=_1.filter(_a,function(_c){return _1.some(_8,function(_d){return _d.name.toLowerCase()===_c.name.toLowerCase();});});var _e=_1.filter(_8,function(_f){return _1.every(_a,function(_10){return _f.name.toLowerCase()!==_10.name.toLowerCase();});});return {existingContents:_b,newFiles:_e};});}});});