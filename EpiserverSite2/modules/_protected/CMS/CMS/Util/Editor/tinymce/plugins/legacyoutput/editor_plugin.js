(function(e){e.onAddEditor.addToTop(function(e,t){t.settings.inline_styles=!1}),e.create("tinymce.plugins.LegacyOutput",{init:function(t){t.onInit.add(function(){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",i=e.explode(t.settings.font_size_style_values),o=t.serializer;t.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignfull:{selector:n,attributes:{align:"full"}},bold:{inline:"b"},italic:{inline:"i"},underline:{inline:"u"},strikethrough:{inline:"strike"},fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return e.inArray(i,t.value)+1}}},forecolor:{inline:"font",styles:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),o._setup(),e.each("b,i,u,strike".split(","),function(e){var t=o.rules[e];t||o.addRules(e)}),o.rules.font||o.addRules("font[face|size|color|style]"),e.each(n.split(","),function(t){var n,i=o.rules[t];i&&(e.each(i.attribs,function(e,t){return"align"==t.name?(n=!0,!1):void 0}),n||i.attribs.push({name:"align"}))}),t.onNodeChange.add(function(t,n){var o,a,r,s;a=t.dom.getParent(t.selection.getNode(),"font"),a&&(r=a.face,s=a.size),(o=n.get("fontselect"))&&o.select(function(e){return e==r}),(o=n.get("fontsizeselect"))&&o.select(function(t){var n=e.inArray(i,t.fontSize);return n+1==s})})})},getInfo:function(){return{longname:"LegacyOutput",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput",version:e.majorVersion+"."+e.minorVersion}}}),e.PluginManager.add("legacyoutput",e.plugins.LegacyOutput)})(tinymce);