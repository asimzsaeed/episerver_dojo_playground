tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(){var e=document.forms[0],t=tinyMCEPopup.getWindowArg("mode");this.switchMode(t),e[t+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),e[t+"_panel_searchstring"].focus()},switchMode:function(e){var t,n=this.lastMode;n!=e&&(t=document.forms[0],n&&(t[e+"_panel_searchstring"].value=t[n+"_panel_searchstring"].value,t[e+"_panel_backwardsu"].checked=t[n+"_panel_backwardsu"].checked,t[e+"_panel_backwardsd"].checked=t[n+"_panel_backwardsd"].checked,t[e+"_panel_casesensitivebox"].checked=t[n+"_panel_casesensitivebox"].checked),mcTabs.displayTab(e+"_tab",e+"_panel"),document.getElementById("replaceBtn").style.display="replace"==e?"inline":"none",document.getElementById("replaceAllBtn").style.display="replace"==e?"inline":"none",this.lastMode=e)},searchNext:function(e){function t(){l=s.getRng().cloneRange(),r.getDoc().execCommand("SelectAll",!1,null),s.setRng(l)}function n(){tinymce.isIE?r.selection.getRng().duplicate().pasteHTML(rs):r.getDoc().execCommand("InsertHTML",!1,rs)}var i,o,a,r=tinyMCEPopup.editor,s=r.selection,l=s.getRng(),c=this.lastMode,d=0,m=r.getWin(),u=(r.windowManager,0);if(i=document.forms[0],o=i[c+"_panel_searchstring"].value,a=i[c+"_panel_backwardsu"].checked,ca=i[c+"_panel_casesensitivebox"].checked,rs=i.replace_panel_replacestring.value,tinymce.isIE&&(l=r.getDoc().selection.createRange()),""!=o){switch(ca&&(d=4|d),e){case"all":if(r.execCommand("SelectAll"),r.selection.collapse(!0),tinymce.isIE){for(;l.findText(o,a?-1:1,d);)l.scrollIntoView(),l.select(),n(),u=1,a&&l.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else for(;m.find(o,ca,a,!1,!1,!1,!1);)n(),u=1;return u?tinyMCEPopup.alert(r.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(r.getLang("searchreplace_dlg.notfound")),void 0;case"current":r.selection.isCollapsed()||n()}s.collapse(a),l=s.getRng(),tinymce.isIE&&(l=r.getDoc().selection.createRange()),o&&(tinymce.isIE?(l.findText(o,a?-1:1,d)?(l.scrollIntoView(),l.select()):tinyMCEPopup.alert(r.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):m.find(o,ca,a,!1,!1,!1,!1)?t():tinyMCEPopup.alert(r.getLang("searchreplace_dlg.notfound")))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);