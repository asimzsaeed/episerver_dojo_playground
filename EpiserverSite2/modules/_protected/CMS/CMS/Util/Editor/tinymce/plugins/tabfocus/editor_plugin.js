(function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.each,i=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(o){function a(e,n){return 9===n.keyCode?t.cancel(n):void 0}function r(o,a){function r(t){if(c=e.getParent(o.id,"form"),d=c.elements,c)if(n(d,function(e,t){return e.id==o.id?(l=t,!1):void 0}),t>0){for(s=l+1;d.length>s;s++)if("hidden"!=d[s].type)return d[s]}else for(s=l-1;s>=0;s--)if("hidden"!=d[s].type)return d[s];return null}var l,s,c,d,m;return 9===a.keyCode&&(m=i(o.getParam("tab_focus",o.getParam("tabfocus_elements",":prev,:next"))),1==m.length&&(m[1]=m[0],m[0]=":prev"),d=a.shiftKey?":prev"==m[0]?r(-1):e.get(m[0]):":next"==m[1]?r(1):e.get(m[1]))?((o=tinymce.get(d.id||d.name))?o.focus():window.setTimeout(function(){window.focus(),d.focus()},10),t.cancel(a)):void 0}o.onKeyUp.add(a),tinymce.isGecko?(o.onKeyPress.add(r),o.onKeyDown.add(a)):o.onKeyDown.add(r),o.onInit.add(function(){n(e.select("a:first,a:last",o.getContainer()),function(e){t.add(e,"focus",function(){o.focus()})})})},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)})();