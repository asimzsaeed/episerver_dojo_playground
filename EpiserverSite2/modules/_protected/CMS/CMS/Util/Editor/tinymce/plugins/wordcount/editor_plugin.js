(function(){tinymce.create("tinymce.plugins.WordCount",{block:0,id:null,countre:null,cleanre:null,init:function(e){var t=this,n=0;t.countre=e.getParam("wordcount_countregex",/\S\s+/g),t.cleanre=e.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$Â¿'"_+=\\\/-]*/g),t.id=e.id+"-word-count",e.onPostRender.add(function(e){var n,i;i=e.getParam("wordcount_target_id"),i?tinymce.DOM.add(i,"span",{},'<span id="'+t.id+'">0</span>'):(n=tinymce.DOM.get(e.id+"_path_row"),n&&tinymce.DOM.add(n.parentNode,"div",{style:"float: right"},e.getLang("wordcount.words","Words: ")+'<span id="'+t.id+'">0</span>'))}),e.onInit.add(function(e){e.selection.onSetContent.add(function(){t._count(e)}),t._count(e)}),e.onSetContent.add(function(e){t._count(e)}),e.onKeyUp.add(function(e,i){i.keyCode!=n&&((13==i.keyCode||8==n||46==n)&&t._count(e),n=i.keyCode)})},_count:function(e){var t=this,n=0;t.block||(t.block=1,setTimeout(function(){var i=e.getContent({format:"raw"});i&&(i=i.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),i=i.replace(t.cleanre,""),i.replace(t.countre,function(){n++})),tinymce.DOM.setHTML(t.id,""+n),setTimeout(function(){t.block=0},2e3)},1))},getInfo:function(){return{longname:"Word Count plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/wordcount",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("wordcount",tinymce.plugins.WordCount)})();