(function(e){var t,n=/^\s*|\s*$/g,o="$1"==="B".replace(/A(.)|B/,"$1"),i={majorVersion:"3",minorVersion:"3.9.3",releaseDate:"2010-12-20",isEPiServerUIVersion:!0,_init:function(){function n(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(c.suffix="_src"),-1!=(s=e.src.indexOf("?"))&&(c.query=e.src.substring(s+1)),c.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),r&&-1==c.baseURL.indexOf("://")&&0!==c.baseURL.indexOf("/")&&(c.baseURL=r+c.baseURL),c.baseURL):null}var o,i,a,r,s,l,c=this,d=document,u=navigator,m=u.userAgent;if(c.isOpera=e.opera&&opera.buildNumber,c.isWebKit=/WebKit/.test(m),c.isIE=!c.isWebKit&&!c.isOpera&&/MSIE/gi.test(m)&&/Explorer/gi.test(u.appName),c.isIE6=c.isIE&&/MSIE [56]/.test(m),c.isIE11=-1!=m.indexOf("Trident/")&&(-1!=m.indexOf("rv:")||-1!=u.appName.indexOf("Netscape")),c.isGecko=!c.isWebKit&&/Gecko/.test(m),c.isMac=-1!=m.indexOf("Mac"),c.isAir=/adobeair/i.test(m),c.isIDevice=/(iPad|iPhone)/.test(m),e.tinyMCEPreInit)return c.suffix=tinyMCEPreInit.suffix,c.baseURL=tinyMCEPreInit.base,c.query=tinyMCEPreInit.query,t;for(c.suffix="",i=d.getElementsByTagName("base"),o=0;i.length>o;o++)(l=i[o].href)&&(/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),r=l?l.match(/.*\//)[0]:"");for(i=d.getElementsByTagName("script"),o=0;i.length>o;o++)if(n(i[o]))return;if(a=d.getElementsByTagName("head")[0])for(i=a.getElementsByTagName("script"),o=0;i.length>o;o++)if(n(i[o]))return},is:function(e,n){return n?"array"==n&&e.hasOwnProperty&&e instanceof Array?!0:typeof e==n:e!==t},each:function(e,n,o){var i,a;if(!e)return 0;if(o=o||e,e.length!==t){for(i=0,a=e.length;a>i;i++)if(n.call(o,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(o,e[i],i,e)===!1)return 0;return 1},trim:function(e){return(e?""+e:"").replace(n,"")},create:function(e,n){var o,i,a,r,s,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],i=l.createNS(e[3].replace(/\.\w+$/,"")),!i[a]){if("static"==e[2])return i[a]=n,this.onCreate&&this.onCreate(e[2],e[3],i[a]),t;n[a]||(n[a]=function(){},c=1),i[a]=n[a],l.extend(i[a].prototype,n),e[5]&&(o=l.resolve(e[5]).prototype,r=e[5].match(/\.(\w+)$/i)[1],s=i[a],i[a]=c?function(){return o[r].apply(this,arguments)}:function(){return this.parent=o[r],s.apply(this,arguments)},i[a].prototype[a]=i[a],l.each(o,function(e,t){i[a].prototype[t]=o[t]}),l.each(n,function(e,t){o[t]?i[a].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=a&&(i[a].prototype[t]=e)})),l.each(n["static"],function(e,t){i[a][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],i[a].prototype)}},walk:function(e,n,o,a){a=a||this,e&&(o&&(e=e[o]),i.each(e,function(e,r){return n.call(a,e,r,o)===!1?!1:(i.walk(e,n,o,a),t)}))},createNS:function(t,n){var o,i;for(n=n||e,t=t.split("."),o=0;t.length>o;o++)i=t[o],n[i]||(n[i]={}),n=n[i];return n},resolve:function(t,n){var o,i;for(n=n||e,t=t.split("."),o=0,i=t.length;i>o&&(n=n[t[o]],n);o++);return n},addUnload:function(t,n){function o(){var t,n,r=a.unloads;if(r){for(n in r)t=r[n],t&&t.func&&t.func.call(t.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",i),e.detachEvent("onunload",o)):e.removeEventListener&&e.removeEventListener("unload",o,!1),a.unloads=t=r=w=o=0,e.CollectGarbage&&CollectGarbage()}}function i(){function t(){n.detachEvent("onstop",t),o&&o(),n=0}var n=document;"interactive"==n.readyState&&(n&&n.attachEvent("onstop",t),e.setTimeout(function(){n&&n.detachEvent("onstop",t)},0))}var a=this;return t={func:t,scope:n||this},a.unloads?a.unloads.push(t):(e.attachEvent?(e.attachEvent("onunload",o),e.attachEvent("onbeforeunload",i)):e.addEventListener&&e.addEventListener("unload",o,!1),a.unloads=[t]),t},removeUnload:function(e){var n=this.unloads,o=null;return i.each(n,function(i,a){return i&&i.func==e?(n.splice(a,1),o=e,!1):t}),o},explode:function(e,t){return e?i.map(e.split(t||","),i.trim):e},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e},_replace:function(e,n,i){return o?i.replace(e,function(){var e,o=n,i=arguments;for(e=0;i.length-2>e;e++)o=i[e]===t?o.replace(RegExp("\\$"+e,"g"),""):o.replace(RegExp("\\$"+e,"g"),i[e]);return o}):i.replace(e,n)}};i._init(),e.tinymce=e.tinyMCE=i})(window),function(e,t){var n,o=(t.is,/^(href|src|style)$/i);if(!e)return alert("Load jQuery first!");t.$=e,t.adapter={patchEditor:function(t){function i(e,t){var n=this;return t&&n.removeAttr("_mce_style"),l.css.apply(n,arguments)}function a(e,i){var a=this;return o.test(e)?i!==n?(a.each(function(n,o){t.dom.setAttrib(o,e,i)}),a):a.attr("_mce_"+e):l.attr.apply(a,arguments)}function r(e){return function(n){return n&&(n=t.dom.processHTML(n)),e.call(this,n)}}function s(e){return e.css!==i&&(e.css=i,e.attr=a,e.html=r(l.html),e.append=r(l.append),e.prepend=r(l.prepend),e.after=r(l.after),e.before=r(l.before),e.replaceWith=r(l.replaceWith),e.tinymce=t,e.pushStack=function(){return s(l.pushStack.apply(this,arguments))}),e}var l=e.fn;t.$=function(n,o){var i=t.getDoc();return s(e(n||i,i||o))}}},t.extend=e.extend,t.extend(t,{map:e.map,grep:function(t,n){return e.grep(t,n||function(){return 1})},inArray:function(t,n){return e.inArray(n,t||[])}});var i={"tinymce.dom.DOMUtils":{select:function(t,n){var o=this;return e.find(t,o.get(n)||o.get(o.settings.root_element)||o.doc,[])},is:function(t,n){return e(this.get(t)).is(n)}}};t.onCreate=function(e,n,o){t.extend(o,i[n])}}(window.epiJQuery||window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){return this.listeners.unshift({cb:e,scope:t||this.scope}),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(o,i){return e==o.cb?(n=e,t.splice(i,1),!1):void 0}),n},dispatch:function(){var e,t,n,o=arguments,i=this.listeners;for(t=0;i.length>t&&(n=i[t],e=n.cb.apply(n.scope,o),e!==!1);t++);return e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var o,i=this;return t=tinymce.trim(t),n=i.settings=n||{},/^(mailto|tel|news|javascript|about|data):/i.test(t)||/^\s*#/.test(t)?(i.source=t,void 0):(0===t.indexOf("/")&&0!==t.indexOf("//")&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^\w*:?\/\//.test(t)||(t=(n.base_uri.protocol||"http")+"://mce_host"+i.toAbsPath(n.base_uri.path,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var o=t[n];o&&(o=o.replace(/\(mce_at\)/g,"@@")),i[e]=o}),(o=n.base_uri)&&(i.protocol||(i.protocol=o.protocol),i.userInfo||(i.userInfo=o.userInfo),i.port||"mce_host"!=i.host||(i.port=o.port),i.host&&"mce_host"!=i.host||(i.host=o.host),i.source=""),void 0)},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;return"./"===e?e:(e=new tinymce.util.URI(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol?e.getURI():(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t))},toAbsolute:function(e,t){var e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,o,i,a=0,r="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,i=e.length;i>o;o++)if(o>=n.length||e[o]!=n[o]){a=o+1;break}if(e.length<n.length)for(o=0,i=n.length;i>o;o++)if(o>=e.length||e[o]!=n[o]){a=o+1;break}if(1==a)return t;for(o=0,i=e.length-(a-1);i>o;o++)r+="../";for(o=a-1,i=n.length;i>o;o++)r+=o!=a-1?"/"+n[o]:n[o];return r},toAbsPath:function(t,n){var o,i,a,r=0,s=[];for(i=/\/$/.test(n)?"/":"",t=t.split("/"),n=n.split("/"),e(t,function(e){e&&s.push(e)}),t=s,o=n.length-1,s=[];o>=0;o--)0!=n[o].length&&"."!=n[o]&&(".."!=n[o]?r>0?r--:s.push(n[o]):r++);return o=t.length-r,a=0>=o?s.reverse().join("/"):t.slice(0,o).join("/")+"/"+s.reverse().join("/"),0!==a.indexOf("/")&&(a="/"+a),i&&a.lastIndexOf("/")!==a.length-1&&(a+=i),a},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,o=this.get(t);return o&&e(o.split("&"),function(e){e=e.split("="),n=n||{},n[unescape(e[0])]=unescape(e[1])}),n},setHash:function(t,n,o,i,a,r){var s="";e(n,function(e,t){s+=(s?"&":"")+escape(t)+"="+escape(e)}),this.set(t,s,o,i,a,r)},get:function(e){var t,n,o=document.cookie,i=e+"=";if(o){if(n=o.indexOf("; "+i),-1==n){if(n=o.indexOf(i),0!=n)return null}else n+=2;return t=o.indexOf(";",n),-1==t&&(t=o.length),unescape(o.substring(n+i.length,t))}},set:function(e,t,n,o,i,a){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(o?"; path="+escape(o):"")+(i?"; domain="+i:"")+(a?"; secure":"")},remove:function(e,t){var n=new Date;n.setTime(n.getTime()-1e3),this.set(e,"",n,t,n)}})}(),tinymce.create("static tinymce.util.JSON",{serialize:function(e){var t,n,o,i=tinymce.util.JSON.serialize;if(null==e)return"null";if(o=typeof e,"string"==o)return n="\bb	t\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,o){return t=n.indexOf(o),t+1?"\\"+n.charAt(t+1):(e=o.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+'"';if("object"==o){if(e.hasOwnProperty&&e instanceof Array){for(t=0,n="[";e.length>t;t++)n+=(t>0?",":"")+i(e[t]);return n+"]"}n="{";for(t in e)n+="function"!=typeof e[t]?(n.length>1?',"':'"')+t+'":'+i(e[t]):"";return n+"}"}return""+e},parse:function(s){try{return eval("("+s+")")}catch(ex){}}}),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(e){o=0;try{o=new ActiveXObject(e)}catch(t){}return o}function n(){!e.async||4==o.readyState||r++>1e4?(e.success&&1e4>r&&200==o.status?e.success.call(e.success_scope,""+o.responseText,o,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",o,e),o=null):a.setTimeout(n,10)}var o,i,a=window,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",o=a.XMLHttpRequest?new XMLHttpRequest:t("Microsoft.XMLHTTP")||t("Msxml2.XMLHTTP")){if(o.overrideMimeType&&o.overrideMimeType(e.content_type),o.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&o.setRequestHeader("Content-Type",e.content_type),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(e.data),!e.async)return n();i=a.setTimeout(n,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(o){var i=o.error,a=o.success;o=e(this.settings,o),o.success=function(e,n){e=t.parse(e),e===void 0&&(e={error:"JSON Parse error."}),e.error?i.call(o.error_scope||o.scope,e.error,n):a.call(o.success_scope||o.scope,e.result)},o.error=function(e,t){i.call(o.error_scope||o.scope,e,t)},o.data=t.serialize({id:o.id||"c"+this.count++,method:o.method,params:o.params}),o.content_type="application/json",n.send(o)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){function t(e){var t,n={};for(e=e.split(","),t=e.length;t>=0;t--)n[e[t]]=1;return n}var n=e.each,o=e.is,i=e.isWebKit,a=e.isIE,r=/^(H[1-6R]|P|DIV|ADDRESS|PRE|FORM|T(ABLE|BODY|HEAD|FOOT|H|R|D)|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)$/,s=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),l=t("src,href,style,coords,shape"),c={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},d=/[<>&\"]/g,u=/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)(\s*\/?)>/g,m=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,o){var i=this;if(i.doc=t,i.win=window,i.files={},i.cssFlicker=!1,i.counter=0,i.stdMode=t.documentMode>=8,i.boxModel=!e.isIE||"CSS1Compat"==t.compatMode||i.stdMode,i.settings=o=e.extend({keep_values:!1,hex_colors:1,process_html:1},o),e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(a){i.cssFlicker=!0}o.valid_styles&&(i._styles={},n(o.valid_styles,function(t,n){i._styles[n]=e.explode(t)})),e.addUnload(i.destroy,i)},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,o=this;return e=o.get(e),t=o.getPos(e),n=o.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,o=this;return e=o.get(e),t=o.getStyle(e,"width"),n=o.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t)||e.offsetWidth||e.clientWidth,h:parseInt(n)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,i){var a,r=this,s=r.settings,l=[];for(e=r.get(e),i=void 0===i,s.strict_root&&(n=n||r.getRoot()),o(t,"string")&&(a=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return r.is(e,a)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!i)return e;l.push(e)}e=e.parentNode}return i?l:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},add:function(e,t,n,i,a){var r=this;return this.run(e,function(e){var s;return s=o(t,"string")?r.doc.createElement(t):t,r.setAttribs(s,n),i&&(i.nodeType?s.appendChild(i):r.setHTML(s,i)),a?s:e.appendChild(s)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o,i="",a=this;i+="<"+e;for(o in t)t.hasOwnProperty(o)&&(i+=" "+o+'="'+a.encode(t[o])+'"');return n!==void 0?i+">"+n+"</"+e+">":i+" />"},remove:function(t,n){return this.run(t,function(t){var o,i;if(o=t.parentNode,!o)return null;if(n)for(;i=t.firstChild;)!e.isIE||3!==i.nodeType||i.nodeValue?o.insertBefore(i,t):t.removeChild(i);return o.removeChild(t)})},setStyle:function(t,n,o){var i=this;return i.run(t,function(r){var s;switch(s=r.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),i.pixelStyles.test(n)&&(e.is(o,"number")||/^[\-0-9\.]+$/.test(o))&&(o+="px"),n){case"opacity":a&&(s.filter=""===o?"":"alpha(opacity="+100*o+")",t.currentStyle&&t.currentStyle.hasLayout||(s.display="inline-block")),s[n]=s["-moz-opacity"]=s["-khtml-opacity"]=o||"";break;case"float":a?s.styleFloat=o:s.cssFloat=o;break;default:s[n]=o||""}i.settings.update_styles&&i.setAttrib(r,"_mce_style")})},getStyle:function(e,t,n){if(e=this.get(e),!e)return!1;if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(o){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=a?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style[t]},setStyles:function(e,t){var o,i=this,a=i.settings;o=a.update_styles,a.update_styles=0,n(t,function(t,n){i.setStyle(e,n,t)}),a.update_styles=o,a.update_styles&&i.setAttrib(e,a.cssText)},setAttrib:function(e,t,i){var a=this;if(e&&t)return a.settings.strict&&(t=t.toLowerCase()),this.run(e,function(e){var r=a.settings;switch(t){case"style":if(!o(i,"string"))return n(i,function(t,n){a.setStyle(e,n,t)}),void 0;r.keep_values&&(i&&!a._isRes(i)?e.setAttribute("_mce_style",i,2):e.removeAttribute("_mce_style",2)),e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":r.keep_values&&(r.url_converter&&(i=r.url_converter.call(r.url_converter_scope||a,i,t,e)),a.setAttrib(e,"_mce_"+t,i,2));break;case"shape":e.setAttribute("_mce_style",i)}o(i)&&null!==i&&0!==i.length?e.setAttribute(t,""+i,2):e.removeAttribute(t,2)})},setAttribs:function(e,t){var o=this;return this.run(e,function(e){n(t,function(t,n){o.setAttrib(e,n,t)})})},getAttrib:function(t,n,r){var s,l=this;if(t=l.get(t),!t||1!==t.nodeType)return!1;if(o(r)||(r=""),/^(src|href|style|coords|shape)$/.test(n)&&(s=t.getAttribute("_mce_"+n)))return s;if(a&&l.props[n]&&(s=t[l.props[n]],s=s&&s.nodeValue?s.nodeValue:s),s||(s=t.getAttribute(n,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(n))return t[l.props[n]]===!0&&""===s?n:s?n:"";if("FORM"===t.nodeName&&t.getAttributeNode(n))return t.getAttributeNode(n).nodeValue;if("style"===n&&(s=s||t.style.cssText,s&&(s=l.serializeStyle(l.parseStyle(s),t.nodeName),l.settings.keep_values&&!l._isRes(s)&&t.setAttribute("_mce_style",s))),i&&"class"===n&&s&&(s=s.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),a)switch(n){case"rowspan":case"colspan":1===s&&(s="");break;case"size":("+0"===s||20===s||0===s)&&(s="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===s&&(s="");break;case"hspace":-1===s&&(s="");break;case"maxlength":case"tabindex":(32768===s||2147483647===s||"32768"===s)&&(s="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===s?n:r;case"shape":s=s.toLowerCase();break;default:0===n.indexOf("on")&&s&&(s=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+s))}return void 0!==s&&null!==s&&""!==s?""+s:r},getPos:function(e,t){var n,o,i=this,r=0,s=0,l=i.doc;if(e=i.get(e),t=t||l.body,e){if(a&&!i.stdMode)return e=e.getBoundingClientRect(),n=i.boxModel?l.documentElement:l.body,r=i.getStyle(i.select("html")[0],"borderWidth"),r=("medium"==r||i.boxModel&&!i.isIE6)&&2||r,{x:e.left+n.scrollLeft-r,y:e.top+n.scrollTop-r};for(o=e;o&&o!=t&&o.nodeType;)r+=o.offsetLeft||0,s+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!=t&&o.nodeType;)r-=o.scrollLeft||0,s-=o.scrollTop||0,o=o.parentNode}return{x:r,y:s}},parseStyle:function(t){function o(e,t,n){var o,i,a,r;o=l[e+"-top"+t],o&&(i=l[e+"-right"+t],o==i&&(a=l[e+"-bottom"+t],i==a&&(r=l[e+"-left"+t],a==r&&(l[n]=r,delete l[e+"-top"+t],delete l[e+"-right"+t],delete l[e+"-bottom"+t],delete l[e+"-left"+t]))))}function i(e,t,n,o){var i;i=l[t],i&&(i=l[n],i&&(i=l[o],i&&(l[e]=l[t]+" "+l[n]+" "+l[o],delete l[t],delete l[n],delete l[o])))}var r=this,s=r.settings,l={};return t?(t=t.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_"),n(t.split(";"),function(t){var n,o=[];t&&(t=t.replace(/_MCE_SEMI_/g,";"),t=t.replace(/url\([^\)]+\)/g,function(e){return o.push(e),"url("+o.length+")"}),t=t.split(":"),n=e.trim(t[1]),n=n.replace(/url\(([^\)]+)\)/g,function(e,t){return o[parseInt(t)-1]}),n=n.replace(/rgb\([^\)]+\)/g,function(e){return r.toHex(e)}),s.url_converter&&(n=n.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(e,t){return"url("+s.url_converter.call(s.url_converter_scope||r,r.decode(t),"style",null)+")"})),l[e.trim(t[0]).toLowerCase()]=n)}),o("border","","border"),o("border","-width","border-width"),o("border","-color","border-color"),o("border","-style","border-style"),o("padding","","padding"),o("margin","","margin"),i("border","border-width","border-style","border-color"),a&&"medium none"==l.border&&(l.border=""),l):l},serializeStyle:function(e,t){function o(e,t){if(t&&e){if(0===t.indexOf("-"))return;switch(t){case"font-weight":700==e&&(e="bold");break;case"color":case"background-color":e=e.toLowerCase()}a+=(a?" ":"")+t+": "+e+";"}}var i=this,a="";return t&&i._styles?(n(i._styles["*"],function(t){o(e[t],t)}),n(i._styles[t.toLowerCase()],function(t){o(e[t],t)})):n(e,o),a},loadCSS:function(t){var o,i=this,r=i.doc;t||(t=""),o=i.select("head")[0],n(t.split(","),function(t){var n;i.files[t]||(i.files[t]=!0,n=i.create("link",{rel:"stylesheet",href:e._addVer(t)}),a&&r.documentMode&&r.recalc&&(n.onload=function(){r.recalc(),n.onload=null}),o.appendChild(n))})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0})},removeClass:function(t,n){var o,i=this;return i.run(t,function(t){var a;return i.hasClass(t,n)?(o||(o=RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),a=t.className.replace(o," "),a=e.trim(" "!=a?a:""),t.className=a,a||(t.removeAttribute("class"),t.removeAttribute("className")),a):t.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var o=this;return this.run(e,function(e){function i(){for(;e.firstChild;)e.firstChild.removeNode();try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(i){r=o.create("div"),r.innerHTML="<br />"+t,n(r.childNodes,function(t,n){n&&e.appendChild(t)})}}var r,s,l,c,d,r;if(t=o.processHTML(t),a){if(o.settings.fix_ie_paragraphs&&(t=t.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>')),i(),o.settings.fix_ie_paragraphs)for(l=e.getElementsByTagName("p"),s=l.length-1,r=0;s>=0;s--)if(c=l[s],!c.hasChildNodes()){if(!c._mce_keep){r=1;break}c.removeAttribute("_mce_keep")}if(r&&(t=t.replace(/<p ([^>]+)>|<p>/gi,'<div $1 _mce_tmp="1">'),t=t.replace(/<\/p>/gi,"</div>"),i(),o.settings.fix_ie_paragraphs))for(l=e.getElementsByTagName("DIV"),s=l.length-1;s>=0;s--)if(c=l[s],c._mce_tmp){for(d=o.doc.createElement("p"),c.cloneNode(!1).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(e,t){var n;"_mce_tmp"!==t&&(n=c.getAttribute(t),n||"class"!==t||(n=c.className),d.setAttribute(t,n))}),r=0;c.childNodes.length>r;r++)d.appendChild(c.childNodes[r].cloneNode(!0));c.swapNode(d)}}else e.innerHTML=t;return t})},processHTML:function(t){function n(e){return e=e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n"),e=e.replace(/^[\r\n]*|[\r\n]*$/g,""),e=e.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,""),e=e.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}function o(e){return e.replace(u,function(e,t,n,o){return"<"+t+n.replace(m,function(e,o,a,c,d){var u;if(o=o.toLowerCase(),a=a||c||d||"",s[o]){if("false"===a||"0"===a)return;return o+'="'+o+'"'}return l[o]&&-1==n.indexOf("_mce_"+o)?(u=i.decode(a),!r.url_converter||"src"!=o&&"href"!=o||(u=r.url_converter.call(r.url_converter_scope||i,u,o,t)),"style"==o&&(u=i.serializeStyle(i.parseStyle(u),o)),o+'="'+a+'"'+" _mce_"+o+'="'+i.encode(u)+'"'):e})+o+">"})}var i=this,r=i.settings,c=[];return r.process_html?(a&&(t=t.replace(/&apos;/g,"&#39;"),t=t.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")),t=e._replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>",t),r.keep_values&&(/<script|noscript|style/i.test(t)&&(t=t.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(t,o,a){return o||(o=' type="text/javascript"'),o=o.replace(/src=\"([^\"]+)\"?/i,function(e,t){return r.url_converter&&(t=i.encode(r.url_converter.call(r.url_converter_scope||i,i.decode(t),"src","script"))),'_mce_src="'+t+'"'}),e.trim(a)&&(c.push(n(a)),a="<!--\nMCE_SCRIPT:"+(c.length-1)+"\n// -->"),"<mce:script"+o+">"+a+"</mce:script>"}),t=t.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(e,t,o){return o&&(c.push(n(o)),o="<!--\nMCE_SCRIPT:"+(c.length-1)+"\n-->"),"<mce:style"+t+">"+o+"</mce:style><style "+t+' _mce_bogus="1">'+o+"</style>"}),t=t.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(e,t,n){return"<mce:noscript"+t+"><!--"+i.encode(n).replace(/--/g,"&#45;&#45;")+"--></mce:noscript>"})),t=e._replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->",t),t=o(t),t=t.replace(/MCE_SCRIPT:([0-9]+)/g,function(e,t){return c[t]})),t):t},getOuterHTML:function(e){var t;return(e=this.get(e))?void 0!==e.outerHTML?e.outerHTML:(t=(e.ownerDocument||this.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function o(e,t,n){var o,a;for(a=n.createElement("body"),a.innerHTML=t,o=a.lastChild;o;)i.insertAfter(o.cloneNode(!0),e),o=o.previousSibling;i.remove(e)}var i=this;return this.run(e,function(e){if(e=i.get(e),1==e.nodeType)if(n=n||e.ownerDocument||i.doc,a)try{a&&1==e.nodeType?e.outerHTML=t:o(e,t,n)}catch(r){o(e,t,n)}else o(e,t,n)})},decode:function(e){var t,n,o;if(/&[\w#]+;/.test(e)){if(t=this.doc.createElement("div"),t.innerHTML=e,n=t.firstChild,o="",n)do o+=n.nodeValue;while(n=n.nextSibling);return o||e}return e},encode:function(e){return(""+e).replace(d,function(e){return c[e]})},insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,o;return n=t.parentNode,o=t.nextSibling,o?n.insertBefore(e,o):n.appendChild(e),e})},isBlock:function(e){return e.nodeType&&1!==e.nodeType?!1:(e=e.nodeName||e,r.test(e))},replace:function(t,i,a){var r=this;return o(i,"array")&&(t=t.cloneNode(!0)),r.run(i,function(o){return a&&n(e.grep(o.childNodes),function(e){t.appendChild(e)}),o.parentNode.replaceChild(t,o)})},rename:function(e,t){var o,i=this;return e.nodeName!=t.toUpperCase()&&(o=i.create(t),n(i.getAttribs(e),function(t){i.setAttrib(o,t.nodeName,i.getAttrib(e,t.nodeName))}),i.replace(o,e,1)),o||e},findCommonAncestor:function(e,t){for(var n,o=e;o;){for(n=t;n&&o!=n;)n=n.parentNode;if(o==n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},toHex:function(e){function t(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function t(i){n(i.imports,function(e){t(e)}),n(i.cssRules||i.rules,function(i){switch(i.type||1){case 1:i.selectorText&&n(i.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(t)&&/\.[\w\-]+$/.test(t)&&(o=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t),(!s||(t=s(t,o)))&&(r[t]||(a.push({"class":t}),r[t]=1)))});break;case 3:t(i.styleSheet)}})}var o,i=this,a=[],r={},s=i.settings.class_filter;if(i.classes)return i.classes;try{n(i.doc.styleSheets,t)}catch(l){}return a.length>0&&(i.classes=a),a},run:function(e,t,o){var i,a=this;return a.doc&&"string"==typeof e&&(e=a.get(e)),e?(o=o||this,e.nodeType||!e.length&&0!==e.length?t.call(o,e):(i=[],n(e,function(e,n){e&&("string"==typeof e&&(e=a.doc.getElementById(e)),i.push(t.call(o,e,n)))}),i)):!1},getAttribs:function(e){var t;return e=this.get(e),e?a?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},destroy:function(t){var n=this;n.events&&n.events.destroy(),n.win=n.doc=n.root=n.events=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n,o,i,a=0;if(e)for(n=e.nodeType,e=e.previousSibling,o=e;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=n&&e.nodeValue.length)&&(a++,n=i);return a},split:function(t,n,o){function i(t){var n,o=t.childNodes;if(1!=t.nodeType||"bookmark"!=t.getAttribute("_mce_type")){for(n=o.length-1;n>=0;n--)i(o[n]);if(9!=t.nodeType){if(3==t.nodeType&&t.nodeValue.length>0&&(!l.isBlock(t.parentNode)||e.trim(t.nodeValue).length>0))return;if(1==t.nodeType&&(o=t.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("_mce_type")&&t.parentNode.insertBefore(o[0],t),o.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;l.remove(t)}return t}}var a,r,s,l=this,c=l.createRng();return t&&n?(c.setStart(t.parentNode,l.nodeIndex(t)),c.setEnd(n.parentNode,l.nodeIndex(n)),a=c.extractContents(),c=l.createRng(),c.setStart(n.parentNode,l.nodeIndex(n)+1),c.setEnd(t.parentNode,l.nodeIndex(t)+1),r=c.extractContents(),s=t.parentNode,s.insertBefore(i(a),t),o?s.replaceChild(o,n):s.insertBefore(n,t),s.insertBefore(i(r),t),l.remove(t),o||n):void 0},bind:function(t,n,o,i){var a=this;return a.events||(a.events=new e.dom.EventUtils),a.events.add(t,n,o,i||this)},unbind:function(t,n,o){var i=this;return i.events||(i.events=new e.dom.EventUtils),i.events.remove(t,n,o)},_findSib:function(e,t,n){var i=this,a=t;if(e)for(o(a,"string")&&(a=function(e){return i.is(e,t)}),e=e[n];e;e=e[n])if(a(e))return e;return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function n(e,t){C(R,e,t)}function o(e,t){C(H,e,t)}function i(e){n(e.parentNode,U(e))}function a(e){n(e.parentNode,U(e)+1)}function r(e){o(e.parentNode,U(e))}function s(e){o(e.parentNode,U(e)+1)}function l(e){e?(I[V]=I[z],I[O]=I[F]):(I[z]=I[V],I[F]=I[O]),I.collapsed=R}function c(e){i(e),s(e)}function d(e){n(e,0),o(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function u(e){var t=I[z],n=I[F],o=I[V],i=I[O];return 0===e?b(t,n,t,n):1===e?b(t,n,o,i):2===e?b(o,i,o,i):3===e?b(o,i,t,n):void 0}function m(){w(D)}function p(){return w(N)}function g(){return w(L)}function h(t){var n,o,i=this[z],a=this[F];3!==i.nodeType&&4!==i.nodeType||!i.nodeValue?(i.childNodes.length>0&&(o=i.childNodes[a]),o?i.insertBefore(t,o):i.appendChild(t)):a?a>=i.nodeValue.length?e.insertAfter(t,i):(n=i.splitText(a),i.parentNode.insertBefore(t,n)):i.parentNode.insertBefore(t,i)}function f(e){var t=I.extractContents();I.insertNode(e),e.appendChild(t),I.selectNode(e)}function _(){return q(new t(e),{startContainer:I[z],startOffset:I[F],endContainer:I[V],endOffset:I[O],collapsed:I.collapsed,commonAncestorContainer:I.commonAncestorContainer})}function v(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function y(){return I[z]==I[V]&&I[F]==I[O]}function b(t,n,o,i){var a,r,s,l,c,d;if(t==o)return n==i?0:i>n?-1:1;for(a=o;a&&a.parentNode!=t;)a=a.parentNode;if(a){for(r=0,s=t.firstChild;s!=a&&n>r;)r++,s=s.nextSibling;return r>=n?-1:1}for(a=t;a&&a.parentNode!=o;)a=a.parentNode;if(a){for(r=0,s=o.firstChild;s!=a&&i>r;)r++,s=s.nextSibling;return i>r?-1:1}for(l=e.findCommonAncestor(t,o),c=t;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),d=o;d&&d.parentNode!=l;)d=d.parentNode;if(d||(d=l),c==d)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==d)return 1;s=s.nextSibling}}function C(t,n,o){var i,a;for(t?(I[z]=n,I[F]=o):(I[V]=n,I[O]=o),i=I[V];i.parentNode;)i=i.parentNode;for(a=I[z];a.parentNode;)a=a.parentNode;a==i?b(I[z],I[F],I[V],I[O])>0&&I.collapse(t):I.collapse(t),I.collapsed=y(),I.commonAncestorContainer=e.findCommonAncestor(I[z],I[V])}function w(e){var t,n,o,i,a,r,s,l=0,c=0;if(I[z]==I[V])return k(e);for(t=I[V],n=t.parentNode;n;t=n,n=n.parentNode){if(n==I[z])return x(t,e);++l}for(t=I[z],n=t.parentNode;n;t=n,n=n.parentNode){if(n==I[V])return E(t,e);++c}for(o=c-l,i=I[z];o>0;)i=i.parentNode,o--;
for(a=I[V];0>o;)a=a.parentNode,o++;for(r=i.parentNode,s=a.parentNode;r!=s;r=r.parentNode,s=s.parentNode)i=r,a=s;return M(i,a,e)}function k(e){var t,n,o,i,a,r,s;if(e!=D&&(t=B.createDocumentFragment()),I[F]==I[O])return t;if(3==I[z].nodeType){if(n=I[z].nodeValue,o=n.substring(I[F],I[O]),e!=L&&(I[z].deleteData(I[F],I[O]-I[F]),I.collapse(R)),e==D)return;return t.appendChild(B.createTextNode(o)),t}for(i=v(I[z],I[F]),a=I[O]-I[F];a>0;)r=i.nextSibling,s=T(i,e),t&&t.appendChild(s),--a,i=r;return e!=L&&I.collapse(R),t}function x(e,t){var n,o,i,a,r,s;if(t!=D&&(n=B.createDocumentFragment()),o=S(e,t),n&&n.appendChild(o),i=U(e),a=i-I[F],0>=a)return t!=L&&(I.setEndBefore(e),I.collapse(H)),n;for(o=e.previousSibling;a>0;)r=o.previousSibling,s=T(o,t),n&&n.insertBefore(s,n.firstChild),--a,o=r;return t!=L&&(I.setEndBefore(e),I.collapse(H)),n}function E(e,t){var n,o,i,a,r,s;for(t!=D&&(n=B.createDocumentFragment()),i=P(e,t),n&&n.appendChild(i),o=U(e),++o,a=I[O]-o,i=e.nextSibling;a>0;)r=i.nextSibling,s=T(i,t),n&&n.appendChild(s),--a,i=r;return t!=L&&(I.setStartAfter(e),I.collapse(R)),n}function M(e,t,n){var o,i,a,r,s,l,c,d;for(n!=D&&(i=B.createDocumentFragment()),o=P(e,n),i&&i.appendChild(o),a=e.parentNode,r=U(e),s=U(t),++r,l=s-r,c=e.nextSibling;l>0;)d=c.nextSibling,o=T(c,n),i&&i.appendChild(o),c=d,--l;return o=S(t,n),i&&i.appendChild(o),n!=L&&(I.setStartAfter(e),I.collapse(R)),i}function S(e,t){var n,o,i,a,r,s=v(I[V],I[O]-1),l=s!=I[V];if(s==e)return A(s,l,H,t);for(n=s.parentNode,o=A(n,H,H,t);n;){for(;s;)i=s.previousSibling,a=A(s,l,H,t),t!=D&&o.insertBefore(a,o.firstChild),l=R,s=i;if(n==e)return o;s=n.previousSibling,n=n.parentNode,r=A(n,H,H,t),t!=D&&r.appendChild(o),o=r}}function P(e,t){var n,o,i,a,r,s=v(I[z],I[F]),l=s!=I[z];if(s==e)return A(s,l,R,t);for(n=s.parentNode,o=A(n,H,R,t);n;){for(;s;)i=s.nextSibling,a=A(s,l,R,t),t!=D&&o.appendChild(a),l=R,s=i;if(n==e)return o;s=n.nextSibling,n=n.parentNode,r=A(n,H,R,t),t!=D&&r.appendChild(o),o=r}}function A(e,t,n,o){var i,a,r,s,l;if(t)return T(e,o);if(3==e.nodeType){if(i=e.nodeValue,n?(s=I[F],a=i.substring(s),r=i.substring(0,s)):(s=I[O],a=i.substring(0,s),r=i.substring(s)),o!=L&&(e.nodeValue=r),o==D)return;return l=e.cloneNode(H),l.nodeValue=a,l}if(o!=D)return e.cloneNode(H)}function T(e,t){return t!=D?t==L?e.cloneNode(R):e:(e.parentNode.removeChild(e),void 0)}var I=this,B=e.doc,N=0,L=1,D=2,R=!0,H=!1,F="startOffset",z="startContainer",V="endContainer",O="endOffset",q=tinymce.extend,U=e.nodeIndex;q(I,{startContainer:B,startOffset:0,endContainer:B,endOffset:0,collapsed:R,commonAncestorContainer:B,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:n,setEnd:o,setStartBefore:i,setStartAfter:a,setEndBefore:r,setEndAfter:s,collapse:l,selectNode:c,selectNodeContents:d,compareBoundaryPoints:u,deleteContents:m,extractContents:p,cloneContents:g,insertNode:h,surroundContents:f,cloneRange:_})}e.Range=t}(tinymce.dom),function(){function e(e){function t(){function t(e){var t,n,o,s,l,c,d,u,m,p=0;if(u=i.duplicate(),u.collapse(e),t=a.create("a"),d=u.parentElement(),!d.hasChildNodes())return r[e?"setStart":"setEnd"](d,0),void 0;if(d.appendChild(t),u.moveToElementText(t),m=i.compareEndPoints(e?"StartToStart":"EndToEnd",u),m>0)return r[e?"setStartAfter":"setEndAfter"](d),a.remove(t),void 0;for(s=tinymce.grep(d.childNodes),l=s.length-1;l>=p;)if(c=Math.floor((p+l)/2),d.insertBefore(t,s[c]),u.moveToElementText(t),m=i.compareEndPoints(e?"StartToStart":"EndToEnd",u),m>0)p=c+1;else{if(!(0>m)){found=!0;break}l=c-1}n=m>0||0==c?t.nextSibling:t.previousSibling,1==n.nodeType?(a.remove(t),o=a.nodeIndex(n),n=n.parentNode,(!e||c>0)&&o++):(m>0||0==c?(u.setEndPoint(e?"StartToStart":"EndToEnd",i),o=u.text.length):(u.setEndPoint(e?"StartToStart":"EndToEnd",i),o=n.nodeValue.length-u.text.length),a.remove(t)),r[e?"setStart":"setEnd"](n,o)}var n,o,i=e.getRng(),r=a.createRng();return n=i.item?i.item(0):i.parentElement(),n.ownerDocument!=a.doc?r:i.item||!n.hasChildNodes()?(r.setStart(n.parentNode,a.nodeIndex(n)),r.setEnd(r.startContainer,r.startOffset+1),r):(o=e.isCollapsed(),t(!0),o||t(),r)}var n,o,i="﻿",a=e.dom,r=!0;this.addRange=function(t){function n(e){var t,n,s,g,h;s=a.create("a"),t=e?l:d,n=e?c:u,g=o.duplicate(),t==m&&(t=p,n=0),3==t.nodeType?(t.parentNode.insertBefore(s,t),g.moveToElementText(s),g.moveStart("character",n),a.remove(s),o.setEndPoint(e?"StartToStart":"EndToEnd",g)):(h=t.childNodes,h.length?(n>=h.length?a.insertAfter(s,h[h.length-1]):t.insertBefore(s,h[n]),g.moveToElementText(s)):(s=m.createTextNode(i),t.appendChild(s),g.moveToElementText(s.parentNode),g.collapse(r)),o.setEndPoint(e?"StartToStart":"EndToEnd",g),a.remove(s))}var o,s,l,c,d,u,m=e.dom.doc,p=m.body;if(this.destroy(),l=t.startContainer,c=t.startOffset,d=t.endContainer,u=t.endOffset,o=p.createTextRange(),l==d&&1==l.nodeType&&c==u-1&&c==u-1)try{return s=p.createControlRange(),s.addElement(l.childNodes[c]),s.select(),s.scrollIntoView(),void 0}catch(g){}n(!0),n(),o.select(),o.scrollIntoView()},this.getRangeAt=function(){n&&tinymce.dom.RangeUtils.compareRanges(o,e.getRng())||(n=t(),o=e.getRng());try{n.startContainer.nextSibling}catch(i){n=t(),o=null}return n},this.destroy=function(){o=n=null}}tinymce.dom.TridentSelection=e}(),function(e){var t,n=e.each,o=e.DOM,i=e.isIE;e.isWebKit,e.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(t,a,r,s){var l,c,d=this,u=d.events;return a instanceof Array?(c=[],n(a,function(e){c.push(d.add(t,e,r,s))}),c):t&&t.hasOwnProperty&&t instanceof Array?(c=[],n(t,function(e){e=o.get(e),c.push(d.add(e,a,r,s))}),c):(t=o.get(t))?(l=function(t){return d.disabled?void 0:(t=t||window.event,t&&i&&(t.target||(t.target=t.srcElement),e.extend(t,d._stoppers)),s?r.call(s,t):r(t))},"unload"==a?(e.unloads.unshift({func:l}),l):"init"==a?(d.domLoaded?l():d.inits.push(l),l):(u.push({obj:t,name:a,func:r,cfunc:l,scope:s}),d._add(t,a,l),r)):void 0},remove:function(e,t,i){var a,r=this,s=r.events,l=!1;return e&&e.hasOwnProperty&&e instanceof Array?(a=[],n(e,function(e){e=o.get(e),a.push(r.remove(e,t,i))}),a):(e=o.get(e),n(s,function(n,o){return n.obj!=e||n.name!=t||i&&n.func!=i&&n.cfunc!=i?void 0:(s.splice(o,1),r._remove(e,t,n.cfunc),l=!0,!1)}),l)},clear:function(e){var t,n,i=this,a=i.events;if(e)for(e=o.get(e),t=a.length-1;t>=0;t--)n=a[t],n.obj===e&&(i._remove(n.obj,n.name,n.cfunc),n.obj=n.cfunc=null,a.splice(t,1))},cancel:function(e){return e?(this.stop(e),this.prevent(e)):!1},stop:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},prevent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},destroy:function(){var e=this;n(e.events,function(t){e._remove(t.obj,t.name,t.cfunc),t.obj=t.cfunc=null}),e.events=[],e=null},_add:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!1):e["on"+t]=n},_remove:function(e,t,n){if(e)try{e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!1):e["on"+t]=null}catch(o){}},_pageInit:function(){var e=this;e.domLoaded||(e.domLoaded=!0,n(e.inits,function(e){e()}),e.inits=[])},_wait:function(e){var t=this,n=e.document;return e.tinyMCE_GZ&&tinyMCE_GZ.loaded?(t.domLoaded=1,void 0):(n.attachEvent?(n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",arguments.callee),t._pageInit(e))}),n.documentElement.doScroll&&e==e.top&&function(){if(!t.domLoaded){try{n.documentElement.doScroll("left")}catch(o){return setTimeout(arguments.callee,0),void 0}t._pageInit(e)}}()):n.addEventListener&&t._add(e,"DOMContentLoaded",function(){t._pageInit(e)}),t._add(e,"load",function(){t._pageInit(e)}),void 0)},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),t=e.dom.Event=new e.dom.EventUtils,t._wait(window),e.addUnload(function(){t.destroy()})}(tinymce),function(e){e.dom.Element=function(t,n){var o,i,a=this;a.settings=n=n||{},a.id=t,a.dom=o=n.dom||e.DOM,e.isIE||(i=o.get(a.id)),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){a[e]=function(){var n,i=[t];for(n=0;arguments.length>n;n++)i.push(arguments[n]);return i=o[e].apply(o,i),a.update(e),i}}),e.extend(a,{on:function(t,n,o){return e.dom.Event.add(a.id,t,n,o)},getXY:function(){return{x:parseInt(a.getStyle("left")),y:parseInt(a.getStyle("top"))}},getSize:function(){var e=o.get(a.id);return{w:parseInt(a.getStyle("width")||e.clientWidth),h:parseInt(a.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){a.setStyles({left:e,top:t})},moveBy:function(e,t){var n=a.getXY();a.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){a.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=a.getSize();a.resizeTo(n.w+e,n.h+t)},update:function(t){var i;if(e.isIE6&&n.blocker){if(t=t||"",0===t.indexOf("get")||0===t.indexOf("has")||0===t.indexOf("is"))return;if("remove"==t)return o.remove(a.blocker),void 0;a.blocker?i=o.get(a.blocker):(a.blocker=o.uniqueId(),i=o.add(n.container||o.getRoot(),"iframe",{id:a.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),o.setStyle(i,"opacity",0)),o.setStyles(i,{left:a.getStyle("left",1),top:a.getStyle("top",1),width:a.getStyle("width",1),height:a.getStyle("height",1),display:a.getStyle("display",1),zIndex:parseInt(a.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){var t=e.is,n=e.isIE,o=e.each;e.create("tinymce.dom.Selection",{Selection:function(t,n,i){var a=this;a.dom=t,a.win=n,a.serializer=i,o(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){a[t]=new e.util.Dispatcher(a)}),a.win.getSelection||(a.tridentSel=new e.dom.TridentSelection(a)),e.isIE&&t.boxModel&&this._fixIESelection(),e.addUnload(a.destroy,a)},getContent:function(e){var n,o,i,a=this,r=a.getRng(),s=a.dom.create("body"),l=a.getSel();return e=e||{},n=o="",e.get=!0,e.format=e.format||"html",a.onBeforeGetContent.dispatch(a,e),"text"==e.format?a.isCollapsed()?"":r.text||(l.toString?""+l:""):(r.cloneContents?(i=r.cloneContents(),i&&s.appendChild(i)):s.innerHTML=t(r.item)||t(r.htmlText)?r.item?r.item(0).outerHTML:r.htmlText:""+r,/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(o=" "),e.getInner=!0,e.content=a.isCollapsed()?"":n+a.serializer.serialize(s,e)+o,a.onGetContent.dispatch(a,e),e.content)},setContent:function(e,t){var n,o=this,i=o.getRng(),a=o.win.document;if(t=t||{format:"html"},t.set=!0,e=t.content=o.dom.processHTML(e),o.onBeforeSetContent.dispatch(o,t),e=t.content,i.insertNode){if(e+='<span id="__caret">_</span>',i.startContainer==a&&i.endContainer==a)a.body.innerHTML=e;else if(i.deleteContents(),0==a.body.childNodes.length)a.body.innerHTML=e;else if(i.createContextualFragment)i.insertNode(i.createContextualFragment(e));else{var r=a.createDocumentFragment(),s=a.createElement("div");r.appendChild(s),s.outerHTML=e,i.insertNode(r)}n=o.dom.get("__caret"),i=a.createRange(),i.setStartBefore(n),i.setEndBefore(n),o.setRng(i),o.dom.remove("__caret")}else i.item&&(a.execCommand("Delete",!1,null),i=o.getRng()),i.pasteHTML(e);o.onSetContent.dispatch(o,t)},getStart:function(){var e,t,n,o,i=this.getRng();if(i.duplicate||i.item){if(i.item)return i.item(0);for(n=i.duplicate(),n.collapse(1),e=n.parentElement(),t=o=i.parentElement();o=o.parentNode;)if(o==e){e=t;break}return e&&"BODY"==e.nodeName?e.firstChild||e:e}return e=i.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,i.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,o=n.getRng();return o.duplicate||o.item?o.item?o.item(0):(o=o.duplicate(),o.collapse(0),e=o.parentElement(),e&&"BODY"==e.nodeName?e.lastChild||e:e):(e=o.endContainer,t=o.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){function n(e,t){var n=0;return o(p.select(e),function(e,o){e==t&&(n=o)}),n}function i(){function e(e,n){var i,a,r=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],l=[],c=0;if(3==r.nodeType){if(t)for(i=r.previousSibling;i&&3==i.nodeType;i=i.previousSibling)s+=i.nodeValue.length;l.push(s)}else a=r.childNodes,s>=a.length&&a.length&&(c=1,s=Math.max(0,a.length-1)),l.push(m.dom.nodeIndex(a[s],t)+c);for(;r&&r!=o;r=r.parentNode)l.push(m.dom.nodeIndex(r,t));return l}var n=m.getRng(!0),o=p.getRoot(),i={};return i.start=e(n,!0),m.isCollapsed()||(i.end=e(n)),i}var a,r,s,l,c,d,u,m=this,p=m.dom,g="﻿";if(2==e)return i();if(e)return{rng:m.getRng()};if(a=m.getRng(),s=p.uniqueId(),l=tinyMCE.activeEditor.selection.isCollapsed(),u="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return d=a.item(0),c=d.nodeName,{name:c,index:n(c,d)};r=a.duplicate(),a.collapse(),a.pasteHTML('<span _mce_type="bookmark" id="'+s+'_start" style="'+u+'">'+g+"</span>"),l||(r.collapse(!1),r.pasteHTML('<span _mce_type="bookmark" id="'+s+'_end" style="'+u+'">'+g+"</span>"))}else{if(d=m.getNode(),c=d.nodeName,"IMG"==c)return{name:c,index:n(c,d)};r=a.cloneRange(),l||(r.collapse(!1),r.insertNode(p.create("span",{_mce_type:"bookmark",id:s+"_end",style:u},g))),a.collapse(!0),a.insertNode(p.create("span",{_mce_type:"bookmark",id:s+"_start",style:u},g))}return m.moveToBookmark({id:s,keep:1}),{id:s}},moveToBookmark:function(t){function i(e){var n,o,i,a=t[e?"start":"end"];if(a){for(o=l,n=a.length-1;n>=1;n--)i=o.childNodes,i.length&&(o=i[a[n]]);e?s.setStart(o,a[0]):s.setEnd(o,a[0])}}function a(n){var i,a,r,s,l=g.get(t.id+"_"+n),p=t.keep;if(l&&(i=l.parentNode,"start"==n?(p?(i=l.firstChild,a=1):a=g.nodeIndex(l),c=d=i,u=m=a):(p?(i=l.firstChild,a=1):a=g.nodeIndex(l),d=i,m=a),!p)){for(s=l.previousSibling,r=l.nextSibling,o(e.grep(l.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=g.get(t.id+"_"+n);)g.remove(l,1);s&&r&&s.nodeType==r.nodeType&&3==s.nodeType&&!e.isOpera&&(a=s.nodeValue.length,s.appendData(r.nodeValue),g.remove(r),"start"==n?(c=d=s,u=m=a):(d=s,m=a))}}function r(e){return n||!g.isBlock(e)||e.innerHTML||(e.innerHTML='<br _mce_bogus="1" />'),e}var s,l,c,d,u,m,p=this,g=p.dom;p.tridentSel&&p.tridentSel.destroy(),t&&(t.start?(s=g.createRng(),l=g.getRoot(),i(!0),i(),p.setRng(s)):t.id?(a("start"),a("end"),c&&(s=g.createRng(),s.setStart(r(c),u),s.setEnd(r(d),m),p.setRng(s))):t.name?p.select(g.select(t.name)[t.index]):t.rng&&p.setRng(t.rng))},select:function(t,n){function o(t,n){var o=new e.dom.TreeWalker(t,t);do{if(3==t.nodeType&&0!=e.trim(t.nodeValue).length)return n?s.setStart(t,0):s.setEnd(t,t.nodeValue.length),void 0;if("BR"==t.nodeName)return n?s.setStartBefore(t):s.setEndBefore(t),void 0}while(t=n?o.next():o.prev())}var i,a=this,r=a.dom,s=r.createRng();return i=r.nodeIndex(t),s.setStart(t.parentNode,i),s.setEnd(t.parentNode,i+1),n&&(o(t,1),o(t)),a.setRng(s),t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t,n=this,o=n.getRng();o.item&&(t=o.item(0),o=this.win.document.body.createTextRange(),o.moveToElementText(t)),o.collapse(!!e),n.setRng(o)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(t){var n,o,i,a=this,r=a.win.document;if(t&&a.tridentSel)return a.tridentSel.getRangeAt(0);try{(n=a.getSel())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():r.createRange())}catch(s){}return e.isIE&&o.setStart&&r.selection.createRange().item&&(i=r.selection.createRange().item(0),o=r.createRange(),o.setStartBefore(i),o.setEndAfter(i)),o||(o=r.createRange?r.createRange():r.body.createTextRange()),a.selectedRange&&a.explicitRange&&(0===o.compareBoundaryPoints(o.START_TO_START,a.selectedRange)&&0===o.compareBoundaryPoints(o.END_TO_END,a.selectedRange)?o=a.explicitRange:(a.selectedRange=null,a.explicitRange=null)),o},setRng:function(e){var t,n=this;if(n.tridentSel){if(e.cloneRange)return n.tridentSel.addRange(e),void 0;try{e.select()}catch(o){}}else t=n.getSel(),t&&(n.explicitRange=e,t.removeAllRanges(),t.addRange(e),n.selectedRange=t.getRangeAt(0))},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){var t,n=this,o=n.getRng(),i=n.getSel();return o.setStart?o?(t=o.commonAncestorContainer,!o.collapsed&&(o.startContainer==o.endContainer&&2>o.startOffset-o.endOffset&&o.startContainer.hasChildNodes()&&(t=o.startContainer.childNodes[o.startOffset]),e.isWebKit&&i.anchorNode&&1==i.anchorNode.nodeType)?i.anchorNode.childNodes[i.anchorOffset]:t&&3==t.nodeType?t.parentNode:t):n.dom.getRoot():o.item?o.item(0):o.parentElement()},getSelectedBlocks:function(e,t){var n,o,i,a=this,r=a.dom,s=[];if(n=r.getParent(e||a.getStart(),r.isBlock),o=r.getParent(t||a.getEnd(),r.isBlock),n&&s.push(n),n&&o&&n!=o)for(i=n;(i=i.nextSibling)&&i!=o;)r.isBlock(i)&&s.push(i);return o&&n!=o&&s.push(o),s},destroy:function(t){var n=this;n.win=null,n.tridentSel&&n.tridentSel.destroy(),t||e.removeUnload(n.destroy)},_fixIESelection:function(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(o){n=null}return n}function t(t){var o;t.button?(o=e(t.x,t.y),o&&(o.compareEndPoints("StartToStart",i)>0?o.setEndPoint("StartToStart",i):o.setEndPoint("EndToEnd",i),o.select())):n()}function n(){a.unbind(r,"mouseup",n),a.unbind(r,"mousemove",t),o=0}var o,i,a=this.dom,r=a.doc,s=r.body;r.documentElement.unselectable=!0,a.bind(r,"mousedown",function(s){if("HTML"===s.target.nodeName&&(o&&n(),o=1,i=e(s.x,s.y))){a.bind(r,"mouseup",n),a.bind(r,"mousemove",t);var l=tinyMCE.activeEditor;if(l&&l._gainedFocus)return setTimeout(function(){i.select()},1),void 0;a.win.focus(),i.select()}})}})}(tinymce),function(e){e.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(){function t(){var e=document.implementation;if(e&&e.createDocument)return e.createDocument("","",null);try{return new ActiveXObject("MSXML2.DOMDocument")}catch(t){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(t){}}this.doc=t(),this.valid=e.isOpera||e.isWebKit,this.reset()},reset:function(){var e=this,t=e.doc;t.firstChild&&t.removeChild(t.firstChild),e.node=t.appendChild(t.createElement("html"))},writeStartElement:function(e){var t=this;t.node=t.node.appendChild(t.doc.createElement(e))},writeAttribute:function(e,t){this.valid&&(t=t.replace(/>/g,"%MCGT%")),this.node.setAttribute(e,t)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var e=this,t=e.node;t.appendChild(e.doc.createTextNode("")),e.node=t.parentNode},writeText:function(e){this.valid&&(e=e.replace(/>/g,"%MCGT%")),this.node.appendChild(this.doc.createTextNode(e))},writeCDATA:function(e){this.node.appendChild(this.doc.createCDATASection(e))},writeComment:function(t){e.isIE&&(t=t.replace(/^\-|\-$/g," ")),this.node.appendChild(this.doc.createComment(t.replace(/\-\-/g," ")))},getContent:function(){var e;return e=this.doc.xml||(new XMLSerializer).serializeToString(this.doc),e=e.replace(/<\?[^?]+\?>|<html[^>]*>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,""),e=e.replace(/ ?\/>/g," />"),this.valid&&(e=e.replace(/\%MCGT%/g,"&gt;")),e}})}(tinymce),function(e){var t=/[&\"<>]/g,n=/[<>&]/g,o={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};e.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(t){this.settings=e.extend({indent_char:" ",indentation:0},t),this.reset()},reset:function(){this.indent="",this.str="",this.tags=[],this.count=0},writeStartElement:function(e){this._writeAttributesEnd(),this.writeRaw("<"+e),this.tags.push(e),this.inAttr=!0,this.count++,this.elementCount=this.count,this.attrs={}},writeAttribute:function(e,t){var n=this;n.attrs[e]||(n.writeRaw(" "+n.encode(e,!0)+'="'+n.encode(t,!0)+'"'),n.attrs[e]=t)},writeEndElement:function(){var e;this.tags.length>0&&(e=this.tags.pop(),this._writeAttributesEnd(1)&&this.writeRaw("</"+e+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeFullEndElement:function(){this.tags.length>0&&(this._writeAttributesEnd(),this.writeRaw("</"+this.tags.pop()+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeText:function(e){this._writeAttributesEnd(),this.writeRaw(this.encode(e)),this.count++},writeCDATA:function(e){this._writeAttributesEnd(),this.writeRaw("<![CDATA["+e+"]]>"),this.count++},writeComment:function(e){this._writeAttributesEnd(),this.writeRaw("<!--"+e+"-->"),this.count++},writeRaw:function(e){this.str+=e},encode:function(e,i){return e.replace(i?t:n,function(e){return o[e]})},getContent:function(){return this.str},_writeAttributesEnd:function(e){return this.inAttr?(this.inAttr=!1,e&&this.elementCount==this.count?(this.writeRaw(" />"),!1):(this.writeRaw(">"),!0)):void 0}})}(tinymce),function(e){function t(e){return e.replace(/([?+*])/g,".$1")}var n=e.extend,o=e.each,i=e.util.Dispatcher,a=e.isIE,r=e.isGecko;e.create("tinymce.dom.Serializer",{Serializer:function(t){var a=this;a.key=0,a.onPreProcess=new i(a),a.onPostProcess=new i(a);try{a.writer=new e.dom.XMLWriter}catch(r){a.writer=new e.dom.StringWriter}e.isIE&&document.documentMode>8&&(a.writer=new e.dom.StringWriter),a.settings=t=n({dom:e.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(_mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",valid_elements:"*[*]",extended_valid_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:!0,fix_content_duplication:!0,convert_fonts_to_spans:!1,font_size_classes:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"	",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},t),a.dom=t.dom,a.schema=t.schema,"named"!=t.entity_encoding||t.entities||(t.entity_encoding="raw"),t.remove_redundant_brs&&a.onPostProcess.add(function(e,t){t.content=t.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(e,t,n){return/^<br \/>\s*<\//.test(e)?"</"+n+">":e})}),"html"==t.element_format&&a.onPostProcess.add(function(e,t){t.content=t.content.replace(/<([^>]+) \/>/g,"<$1>")}),t.fix_list_elements&&a.onPreProcess.add(function(e,t){function n(e,t){for(var n,o=t.split(",");null!=(e=e.previousSibling);)for(n=0;o.length>n;n++)if(e.nodeName==o[n])return e;return null}var o,i,r,s,l,c,d=["ol","ul"],u=/^(OL|UL)$/;for(i=0;d.length>i;i++)for(o=a.dom.select(d[i],t.node),r=0;o.length>r;r++)s=o[r],l=s.parentNode,u.test(l.nodeName)&&(c=n(s,"LI"),c?c.appendChild(s):(c=a.dom.create("li"),c.innerHTML="&nbsp;",c.appendChild(s),l.insertBefore(c,l.firstChild)))}),t.fix_table_elements&&a.onPreProcess.add(function(e,t){o(a.dom.select("p table",t.node).reverse(),function(e){var t=a.dom.getParent(e.parentNode,"table,p");if("TABLE"!=t.nodeName)try{a.dom.split(t,e)}catch(n){}})})},setEntities:function(e){var t,n,o,i=this,a={};if(!i.entityLookup){for(t=e.split(","),n=0;t.length>n;n+=2)o=t[n],34!=o&&38!=o&&60!=o&&62!=o&&(a[String.fromCharCode(t[n])]=t[n+1],o=parseInt(t[n]).toString(16));i.entityLookup=a}},setRules:function(e){var t=this;return t._setup(),t.rules={},t.wildRules=[],t.validElements={},t.addRules(e)},addRules:function(n){var i,a=this;n&&(a._setup(),o(n.split(","),function(n){var r,s,l,c=n.split(/\[|\]/),d=c[0].split("/"),u=[];i&&(s=e.extend([],i.attribs)),c.length>1&&o(c[1].split("|"),function(e){var n,o={};if(s=s||[],e=e.replace(/::/g,"~"),e=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(e),e[2]=e[2].replace(/~/g,":"),"!"==e[1]&&(r=r||[],r.push(e[2])),"-"==e[1])for(n=0;s.length>n;n++)if(s[n].name==e[2])return s.splice(n,1),void 0;switch(e[3]){case"=":o.defaultVal=e[4]||"";break;case":":o.forcedVal=e[4];break;case"<":o.validVals=e[4].split("?")}/[*.?]/.test(e[2])?(l=l||[],o.nameRE=RegExp("^"+t(e[2])+"$"),l.push(o)):(o.name=e[2],s.push(o)),u.push(e[2])}),o(d,function(e,n){var c=e.charAt(0),m=1,p={};switch(i&&(i.noEmpty&&(p.noEmpty=i.noEmpty),i.fullEnd&&(p.fullEnd=i.fullEnd),i.padd&&(p.padd=i.padd)),c){case"-":p.noEmpty=!0;break;case"+":p.fullEnd=!0;break;case"#":p.padd=!0;break;default:m=0}d[n]=e=e.substring(m),a.validElements[e]=1,/[*.?]/.test(d[0])?(p.nameRE=RegExp("^"+t(d[0])+"$"),a.wildRules=a.wildRules||{},a.wildRules.push(p)):(p.name=d[0],"@"==d[0]&&(i=p),a.rules[e]=p),p.attribs=s,r&&(p.requiredAttribs=r),l&&(e="",o(u,function(n){e&&(e+="|"),e+="("+t(n)+")"}),p.validAttribsRE=RegExp("^"+e.toLowerCase()+"$"),p.wildAttribs=l)})}),n="",o(a.validElements,function(e,t){n&&(n+="|"),"@"!=t&&(n+=t)}),a.validElementsRE=RegExp("^("+t(n.toLowerCase())+")$"))},findRule:function(e){var t,n,o=this,i=o.rules;if(o._setup(),n=i[e])return n;for(i=o.wildRules,t=0;i.length>t;t++)if(i[t].nameRE.test(e))return i[t];return null},findAttribRule:function(e,t){var n,o=e.wildAttribs;for(n=0;o.length>n;n++)if(o[n].nameRE.test(t))return o[n];return null},serialize:function(t,n){var i,r,s,l,c=this;return c._setup(),n=n||{},n.format=n.format||"html",c.processObj=n,a&&(l=[],o(t.getElementsByTagName("option"),function(e){var t=c.dom.getAttrib(e,"selected");l.push(t?t:null)})),t=t.cloneNode(!0),a&&o(t.getElementsByTagName("option"),function(e,t){c.dom.setAttrib(e,"selected",l[t])}),s=t.ownerDocument.implementation,s.createHTMLDocument&&(i=s.createHTMLDocument(""),o("BODY"==t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!=t.nodeName?i.body.firstChild:i.body,r=c.dom.doc,c.dom.doc=i),c.key=""+(parseInt(c.key)+1),n.no_events||(n.node=t,c.onPreProcess.dispatch(c,n)),c.writer.reset(),c._info=n,c._serializeNode(t,n.getInner),n.content=c.writer.getContent(),r&&(c.dom.doc=r),n.no_events||c.onPostProcess.dispatch(c,n),c._postProcess(n),n.node=null,e.trim(n.content)},_postProcess:function(t){var n,o=this,i=o.settings,a=t.content;"html"==t.format&&(n=o._protect({content:a,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]}),a=n.content,"raw"!==i.entity_encoding&&(a=o._encode(a)),t.set||(a=e._replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,"numeric"==i.entity_encoding?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>",a),i.remove_linebreaks&&(a=a.replace(/\r?\n|\r/g," "),a=e._replace(/(<[^>]+>)\s+/g,"$1 ",a),a=e._replace(/\s+(<\/[^>]+>)/g," $1",a),a=e._replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>",a),a=e._replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>",a),a=e._replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>",a)),i.apply_source_formatting&&"simple"==i.indent_mode&&(a=e._replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n",a),a=e._replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>",a),a=e._replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n",a),a=a.replace(/\n\n/g,"\n"))),a=o._unprotect(a,n),a=e._replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>",a),"raw"==i.entity_encoding&&(a=e._replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1> </p>",a)),a=a.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(e,t,n){return"<noscript"+t+">"+o.dom.decode(n.replace(/<!--|-->/g,""))+"</noscript>"})),t.content=a},_serializeNode:function(t,n){var o,i,s,l,c,d,u,m,p,g,h,f,_,v,y,b,C=this,w=C.settings,k=C.writer;if(!w.node_filter||w.node_filter(t))switch(t.nodeType){case 1:if(t.hasAttribute?t.hasAttribute("_mce_bogus"):t.getAttribute("_mce_bogus"))return;if(f=v=!1,o=t.hasChildNodes(),p=t.getAttribute("_mce_name")||t.nodeName.toLowerCase(),y=t.getAttribute("_mce_type")){if(!C._info.cleanup)return f=!0,void 0;v=1}if(a&&(b=t.scopeName,b&&"HTML"!==b&&"html"!==b&&(p=b+":"+p)),0===p.indexOf("mce:")&&(p=p.substring(4)),!v&&(!C.validElementsRE||!C.validElementsRE.test(p)||C.invalidElementsRE&&C.invalidElementsRE.test(p)||n)){f=!0;break}if(a){if(w.fix_content_duplication){if(t._mce_serialized==C.key)return;t._mce_serialized=C.key}"/"==p.charAt(0)&&(p=p.substring(1))}else if(r&&"BR"===t.nodeName&&"_moz"==t.getAttribute("type"))return;if(w.validate_children){if(C.elementName&&!C.schema.isValid(C.elementName,p)){f=!0;break}C.elementName=p}if(g=C.findRule(p),!g){f=!0;break}if(p=g.name||p,_=w.closed.test(p),!o&&g.noEmpty||a&&!p){f=!0;break}if(g.requiredAttribs){for(c=g.requiredAttribs,s=c.length-1;s>=0&&""===this.dom.getAttrib(t,c[s]);s--);if(-1==s){f=!0;break}}if(k.writeStartElement(p),g.attribs)for(s=0,d=g.attribs,l=d.length;l>s;s++)c=d[s],m=C._getAttrib(t,c),null!==m&&k.writeAttribute(c.name,m);if(g.validAttribsRE)for(d=C.dom.getAttribs(t),s=d.length-1;s>-1;s--)if(u=d[s],u.specified){if(c=u.nodeName.toLowerCase(),w.invalid_attrs.test(c)||!g.validAttribsRE.test(c))continue;h=C.findAttribRule(g,c),m=C._getAttrib(t,h,c),null!==m&&k.writeAttribute(c,m)}if(y&&v&&k.writeAttribute("_mce_type",y),"script"===p&&e.trim(t.innerHTML)){k.writeText("// "),k.writeCDATA(t.innerHTML.replace(/<!--|-->|<\[CDATA\[|\]\]>/g,"")),o=!1;break}g.padd&&(o&&(i=t.firstChild)&&1===i.nodeType&&1===t.childNodes.length?(i.hasAttribute?i.hasAttribute("_mce_bogus"):i.getAttribute("_mce_bogus"))&&k.writeText(" "):o||k.writeText(" "));break;case 3:if(w.validate_children&&C.elementName&&!C.schema.isValid(C.elementName,"#text"))return;return k.writeText(t.nodeValue);case 4:return k.writeCDATA(t.nodeValue);
case 8:return k.writeComment(t.nodeValue)}else 1==t.nodeType&&(o=t.hasChildNodes());if(o&&!_)for(i=t.firstChild;i;)C._serializeNode(i),C.elementName=p,i=i.nextSibling;f||(_?k.writeEndElement():k.writeFullEndElement())},_protect:function(e){function t(e){return e.replace(/[\r\n\\]/g,function(e){return"\n"===e?"\\n":"\\"===e?"\\\\":"\\r"})}function n(e){return e.replace(/\\[\\rn]/g,function(e){return"\\n"===e?"\n":"\\\\"===e?"\\":"\r"})}var i=this;return e.items=e.items||[],o(e.patterns,function(o){e.content=n(t(e.content).replace(o.pattern,function(t,a,r,s){return r=n(r),o.encode&&(r=i._encode(r)),e.items.push(r),a+"<!--mce:"+(e.items.length-1)+"-->"+s}))}),e},_unprotect:function(e,t){return e=e.replace(/\<!--mce:([0-9]+)--\>/g,function(e,n){return t.items[parseInt(n)]}),t.items=[],e},_encode:function(e){var t,n=this,o=n.settings;return"raw"!==o.entity_encoding&&(-1!=o.entity_encoding.indexOf("named")&&(n.setEntities(o.entities),t=n.entityLookup,e=e.replace(/[\u007E-\uFFFF]/g,function(e){var n;return(n=t[e])&&(e="&"+n+";"),e})),-1!=o.entity_encoding.indexOf("numeric")&&(e=e.replace(/[\u007E-\uFFFF]/g,function(e){return"&#"+e.charCodeAt(0)+";"}))),e},_setup:function(){var e=this,n=this.settings;e.done||(e.done=1,e.setRules(n.valid_elements),e.addRules(n.extended_valid_elements),n.invalid_elements&&(e.invalidElementsRE=RegExp("^("+t(n.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")),n.attrib_value_filter&&(e.attribValueFilter=n.attribValueFilter))},_getAttrib:function(e,t,n){var o,i;if(n=n||t.name,t.forcedVal&&(i=t.forcedVal))return"{$uid}"===i?this.dom.uniqueId():i;switch(i=this.dom.getAttrib(e,n),n){case"rowspan":case"colspan":"1"==i&&(i="")}if(this.attribValueFilter&&(i=this.attribValueFilter(n,i,e)),t.validVals){for(o=t.validVals.length-1;o>=0&&i!=t.validVals[o];o--);if(-1==o)return null}return""===i&&t.defaultVal!==void 0?(i=t.defaultVal,"{$uid}"===i?this.dom.uniqueId():i):("class"==n&&this.processObj.get&&(i=i.replace(/\s?mceItem\w+\s?/g,"")),""===i?null:i)}})}(tinymce),function(e){e.dom.ScriptLoader=function(){function t(t,o){function i(){c.remove(l),a&&(a.onreadystatechange=a.onload=a=null),o()}var a,r,s,l,c=e.DOM;return l=c.uniqueId(),e.isIE6&&(r=new e.util.URI(t),s=location,r.host==s.hostname&&r.port==s.port&&r.protocol+":"==s.protocol)?(e.util.XHR.send({url:e._addVer(r.getURI()),success:function(e){var t=c.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),c.remove(t),i()}}),n):(a=c.create("script",{id:l,type:"text/javascript",src:e._addVer(t)}),e.isIE||(a.onload=i),a.onreadystatechange=function(){var e=a.readyState;("complete"==e||"loaded"==e)&&i()},(document.getElementsByTagName("head")[0]||document.body).appendChild(a),n)}var n,o=0,i=1,a=2,r={},s=[],l={},c=[],d=0;this.isDone=function(e){return r[e]==a},this.markDone=function(e){r[e]=a},this.add=this.load=function(e,t,i){var a=r[e];a==n&&(s.push(e),r[e]=o),t&&(l[e]||(l[e]=[]),l[e].push({func:t,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(s,e,t)},this.loadScripts=function(o,s,u){function m(t){e.each(l[t],function(e){e.func.call(e.scope)}),l[t]=n}var p;c.push({func:s,scope:u||this}),p=function(){var s=e.grep(o);o.length=0,e.each(s,function(e){return r[e]==a?(m(e),n):(r[e]!=i&&(r[e]=i,d++,t(e,function(){r[e]=a,d--,m(e),p()})),n)}),d||(e.each(c,function(e){e.func.call(e.scope)}),c.length=0)},p()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(e,t){function n(e,n,o,i){var a,r;if(e){if(!i&&e[n])return e[n];if(e!=t){if(a=e[o])return a;for(r=e.parentNode;r&&r!=t;r=r.parentNode)if(a=r[o])return a}}}var o=e;this.current=function(){return o},this.next=function(e){return o=n(o,"firstChild","nextSibling",e)},this.prev=function(e){return o=n(o,"lastChild","lastSibling",e)}},function(){function e(e,n){function o(t){return t.replace(/[A-Z]+/g,function(t){return o(e[t])})}var i;for(i in e)e.hasOwnProperty(i)&&(e[i]=o(e[i]));o(n).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]/g,function(e,n,o){var i,a={};for(o=o.split(/\|/),i=o.length-1;i>=0;i--)a[o[i]]=1;t[n]=a})}var t={};e({Z:"#|H|K|N|O|P",Y:"#|X|form|R|Q",X:"p|T|div|U|W|isindex|fieldset|table",W:"pre|hr|blockquote|address|center|noframes",U:"ul|ol|dl|menu|dir",ZC:"#|p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"#|X|S|Q",S:"R|P",ZA:"#|a|G|J|M|O|P",R:"#|a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe"},"script[]style[]object[#|param|X|form|a|H|K|N|O|Q]param[]p[S]a[Z]br[]span[S]bdo[S]applet[#|param|X|form|a|H|K|N|O|Q]h1[S]img[]map[X|form|Q|area]h2[S]iframe[#|X|form|a|H|K|N|O|Q]h3[S]tt[S]i[S]b[S]u[S]s[S]strike[S]big[S]small[S]font[S]basefont[]em[S]strong[S]dfn[S]code[S]q[S]samp[S]kbd[S]var[S]cite[S]abbr[S]acronym[S]sub[S]sup[S]input[]select[optgroup|option]optgroup[option]option[]textarea[]label[S]button[#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[S]ins[#|X|form|a|H|K|N|O|Q]h5[S]del[#|X|form|a|H|K|N|O|Q]h6[S]div[#|X|form|a|H|K|N|O|Q]ul[li]li[#|X|form|a|H|K|N|O|Q]ol[li]dl[dt|dd]dt[S]dd[#|X|form|a|H|K|N|O|Q]menu[li]dir[li]pre[ZA]hr[]blockquote[#|X|form|a|H|K|N|O|Q]address[S|p]center[#|X|form|a|H|K|N|O|Q]noframes[#|X|form|a|H|K|N|O|Q]isindex[]fieldset[#|legend|X|form|a|H|K|N|O|Q]legend[S]table[caption|col|colgroup|thead|tfoot|tbody|tr]caption[S]col[]colgroup[col]thead[tr]tr[th|td]th[#|X|form|a|H|K|N|O|Q]form[#|X|a|H|K|N|O|Q]noscript[#|X|form|a|H|K|N|O|Q]td[#|X|form|a|H|K|N|O|Q]tfoot[tr]tbody[tr]area[]base[]body[#|X|form|a|H|K|N|O|Q]"),tinymce.dom.Schema=function(){var e=this,n=t;e.isValid=function(e,t){var o=n[e];return!(!o||t&&!o[t])}}}(),function(e){e.dom.RangeUtils=function(t){this.walk=function(n,o){function i(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function r(e,t,n){var a=n?"nextSibling":"previousSibling";for(d=e,u=d.parentNode;d&&d!=t;d=u)u=d.parentNode,m=i(d==e?d:d[a],a),m.length&&(n||m.reverse(),o(m))}var s,l,c,d,u,m,p,g=n.startContainer,h=n.startOffset,f=n.endContainer,_=n.endOffset;if(p=t.select("td.mceSelected,th.mceSelected"),p.length>0)return e.each(p,function(e){o([e])}),void 0;if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[h]),1==f.nodeType&&f.hasChildNodes()&&(f=f.childNodes[Math.min(h==_?_:_-1,f.childNodes.length-1)]),s=t.findCommonAncestor(g,f),g==f)return o([g]);for(d=g;d;d=d.parentNode){if(d==f)return r(g,s,!0);if(d==s)break}for(d=f;d;d=d.parentNode){if(d==g)return r(f,s);if(d==s)break}l=a(g,s)||g,c=a(f,s)||f,r(g,l,!0),m=i(l==g?l:l.nextSibling,"nextSibling",c==f?c.nextSibling:c),m.length&&o(m),r(f,c)}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0},setDisabled:function(e){var n;e!=this.disabled&&(n=t.get(this.id),n&&this.settings.unavailable_prefix&&(e?(this.prevTitle=n.title,n.title=this.settings.unavailable_prefix+": "+n.title):n.title=this.prevTitle),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e)},isActive:function(){return this.active},setState:function(e,n){var o=t.get(this.id);e=this.classPrefix+e,n?t.addClass(o,e):t.removeClass(o,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t){this.parent(e,t),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}}),function(e){var t=e.is;e.DOM,e.each,e.walk,e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=(e.is,e.DOM),n=(e.each,e.walk);e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var o=this;o.parent(t,n),o.items={},o.collapsed=!1,o.menuCount=0,o.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&n(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&n(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(n){return n.settings||(n=new e.ui.MenuItem(n.id||t.uniqueId(),n)),this.onAddItem.dispatch(this,n),this.items[n.id]=n},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;n(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(n){var o=new e.ui.Menu(n.id||t.uniqueId(),n);return o.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),o}})}(tinymce),function(e){var t=e.is,n=e.DOM,o=e.each,i=e.dom.Event,a=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(o,i){i=i||{},i.container=i.container||n.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,t(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(o,i),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var o,i=this,a=i.settings;return t.container=t.container||a.container,t.parent=i,t.constrain=t.constrain||a.constrain,t["class"]=t["class"]||a["class"],t.vp_offset_x=t.vp_offset_x||a.vp_offset_x,t.vp_offset_y=t.vp_offset_y||a.vp_offset_y,o=new e.ui.DropMenu(t.id||n.uniqueId(),t),o.onAddItem.add(i.onAddItem.dispatch,i.onAddItem),o},update:function(){var e,t,o=this,i=o.settings,a=n.get("menu_"+o.id+"_tbl"),r=n.get("menu_"+o.id+"_co");e=i.max_width?Math.min(a.clientWidth,i.max_width):a.clientWidth,t=i.max_height?Math.min(a.clientHeight,i.max_height):a.clientHeight,n.boxModel?o.element.setStyles({width:e,height:t}):o.element.setStyles({width:e+2,height:t+2}),i.max_width&&n.setStyle(r,"width",e),i.max_height&&(n.setStyle(r,"height",t),a.clientHeight<i.max_height&&n.setStyle(r,"overflow","hidden"))},showMenu:function(t,r,s){var l,c,d,u,m,p,g=this,h=g.settings,f=n.getViewPort(),_=2,v=g.classPrefix;g.collapse(1),g.isMenuVisible||(g.rendered?l=n.get("menu_"+g.id):(l=n.add(g.settings.container,g.renderNode()),o(g.items,function(e){e.postRender()}),g.element=new a("menu_"+g.id,{blocker:1,container:h.container})),e.isOpera||n.setStyles(l,{left:-65535,top:-65535}),n.show(l),g.update(),t+=h.offset_x||0,r+=h.offset_y||0,f.w-=4,f.h-=4,h.constrain&&(c=l.clientWidth-_,d=l.clientHeight-_,u=f.x+f.w,m=f.y+f.h,t+h.vp_offset_x+c>u&&(t=s?s-c:Math.max(0,u-h.vp_offset_x-c)),r+h.vp_offset_y+d>m&&(r=Math.max(0,m-h.vp_offset_y-d))),n.setStyles(l,{left:t,top:r}),g.element.update(),g.isMenuVisible=1,g.mouseClickFunc=i.add(l,"click",function(e){var t;if(e=e.target,e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,v+"ItemSub")){if(t=g.items[e.id],t.isDisabled())return;for(p=g;p;)p.hideMenu&&p.hideMenu(),p=p.settings.parent;return t.settings.onclick&&t.settings.onclick(e),i.cancel(e)}}),g.hasMenus()&&(g.mouseOverFunc=i.add(l,"mouseover",function(e){var t,o;if(e=e.target,e&&(e=n.getParent(e,"tr"))){if(t=g.items[e.id],g.lastMenu&&g.lastMenu.collapse(1),t.isDisabled())return;e&&n.hasClass(e,v+"ItemSub")&&(o=n.getRect(e),t.showMenu(o.x+o.w-_,o.y-_,o.x),g.lastMenu=t,n.addClass(n.get(t.id).firstChild,v+"ItemActive"))}})),g.onShowMenu.dispatch(g),h.keyboard_focus&&(i.add(l,"keydown",g._keyHandler,g),n.select("a","menu_"+g.id)[0].focus(),g._focusIdx=0))},hideMenu:function(e){var t,o=this,a=n.get("menu_"+o.id);o.isMenuVisible&&(i.remove(a,"mouseover",o.mouseOverFunc),i.remove(a,"click",o.mouseClickFunc),i.remove(a,"keydown",o._keyHandler),n.hide(a),o.isMenuVisible=0,e||o.collapse(1),o.element&&o.element.hide(),(t=n.get(o.id))&&n.removeClass(t.firstChild,o.classPrefix+"ItemActive"),o.onHideMenu.dispatch(o))},add:function(e){var t,o=this;return e=o.parent(e),o.isRendered&&(t=n.get("menu_"+o.id))&&o._add(n.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);i.remove(t,"mouseover",e.mouseOverFunc),i.remove(t,"click",e.mouseClickFunc),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e,t,i,r,s=this,l=s.settings;return r=n.create("div",{id:"menu_"+s.id,"class":l["class"],style:"position:absolute;left:0;top:0;z-index:200000"}),i=n.add(r,"div",{id:"menu_"+s.id+"_co","class":s.classPrefix+(l["class"]?" "+l["class"]:"")}),s.element=new a("menu_"+s.id,{blocker:1,container:l.container}),l.menu_line&&n.add(i,"span",{"class":s.classPrefix+"Line"}),e=n.add(i,"table",{id:"menu_"+s.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=n.add(e,"tbody"),o(s.items,function(e){s._add(t,e)}),s.rendered=!0,r},_keyHandler:function(e){function t(e){var t=o._focusIdx+e,i=n.select("a","menu_"+o.id)[t];i&&(o._focusIdx=t,i.focus())}var o=this,i=e.keyCode;switch(i){case 38:return t(-1),void 0;case 40:return t(1),void 0;case 13:return;case 27:return this.hideMenu()}},_add:function(e,t){var o,i,a,r,s,l=t.settings,c=this.classPrefix;return l.separator?(a=n.add(e,"tr",{id:t.id,"class":c+"ItemSeparator"}),n.add(a,"td",{"class":c+"ItemSeparator"}),(o=a.previousSibling)&&n.addClass(o,"mceLast"),void 0):(o=a=n.add(e,"tr",{id:t.id,"class":c+"Item "+c+"ItemEnabled"}),o=r=n.add(o,"td"),o=i=n.add(o,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),n.addClass(r,l["class"]),s=n.add(o,"span",{"class":"mceIcon"+(l.icon?" mce_"+l.icon:"")}),l.icon_src&&n.add(s,"img",{src:l.icon_src}),o=n.add(o,l.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&n.setAttrib(o,"style",t.settings.style),1==e.childNodes.length&&n.addClass(a,"mceFirst"),(o=a.previousSibling)&&n.hasClass(o,c+"ItemSeparator")&&n.addClass(a,"mceFirst"),t.collapse&&n.addClass(a,c+"ItemSub"),(o=a.previousSibling)&&n.removeClass(o,"mceLast"),n.addClass(a,"mceLast"),void 0)}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t){this.parent(e,t),this.classPrefix="mceButton"},renderHTML:function(){var e,n,o=this.classPrefix,i=this.settings;return n=t.encode(i.label||""),e='<a id="'+this.id+'" href="javascript:;" class="'+o+" "+o+"Enabled "+i["class"]+(n?" "+o+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+t.encode(i.title)+'">',e+=i.image?'<img class="mceIcon" src="'+i.image+'" />'+n+"</a>":'<span class="mceIcon '+i["class"]+'"></span>'+(n?'<span class="'+o+'Label">'+n+"</span>":"")+"</a>"},postRender:function(){var t=this,n=t.settings;e.dom.Event.add(t.id,"click",function(e){return t.isDisabled()?void 0:n.onclick.call(n.scope,e)})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each,i=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n){var o=this;o.parent(t,n),o.items=[],o.onChange=new i(o),o.onPostRender=new i(o),o.onAdd=new i(o),o.onRenderMenu=new e.util.Dispatcher(this),o.classPrefix="mceListBox"},select:function(e){var t,n,i=this;return void 0==e?i.selectByIndex(-1):(n=e&&e.call?e:function(t){return t==e},e!=i.selectedValue&&(o(i.items,function(e,o){return n(e.value)?(t=1,i.selectByIndex(o),!1):void 0}),t||i.selectByIndex(-1)),void 0)},selectByIndex:function(e){var n,o,i=this;e!=i.selectedIndex&&(n=t.get(i.id+"_text"),o=i.items[e],o?(i.selectedValue=o.value,i.selectedIndex=e,t.setHTML(n,t.encode(o.title)),t.removeClass(n,"mceTitle")):(t.setHTML(n,t.encode(i.settings.title)),t.addClass(n,"mceTitle"),i.selectedValue=i.selectedIndex=null),n=0)},add:function(t,n,o){var i=this;o=o||{},o=e.extend(o,{title:t,value:n}),i.items.push(o),i.onAdd.dispatch(i,o)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,o=n.settings,i=n.classPrefix;return e='<table id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(o["class"]?" "+o["class"]:"")+'"><tbody><tr>',e+="<td>"+t.createHTML("a",{id:n.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>",e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>",e+="</tr></tbody></table>"},showMenu:function(){var i,a,r,s=this,l=t.get(this.id);if(!s.isDisabled()&&0!=s.items.length){if(s.menu&&s.menu.isMenuVisible)return s.hideMenu();s.isMenuRendered||(s.renderMenu(),s.isMenuRendered=!0),i=t.getPos(this.settings.menu_container),a=t.getPos(l),r=s.menu,r.settings.offset_x=a.x,r.settings.offset_y=a.y,r.settings.keyboard_focus=!e.isOpera,s.oldID&&r.items[s.oldID].setSelected(0),o(s.items,function(e){e.value===s.selectedValue&&(r.items[e.id].setSelected(1),s.oldID=e.id)}),r.showMenu(0,l.clientHeight),n.add(t.doc,"mousedown",s.hideMenu,s),t.addClass(s.id,s.classPrefix+"Selected")}},hideMenu:function(e){var o=this;if(o.menu&&o.menu.isMenuVisible){if(e&&"mousedown"==e.type&&(e.target.id==o.id+"_text"||e.target.id==o.id+"_open"))return;e&&t.getParent(e.target,".mceMenu")||(t.removeClass(o.id,o.classPrefix+"Selected"),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu.hideMenu())}},renderMenu:function(){var e,n=this;e=n.settings.control_manager.createDropMenu(n.id+"_menu",{menu_line:1,"class":n.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),e.onHideMenu.add(n.hideMenu,n),e.add({title:n.settings.title,"class":"mceMenuItemTitle",onclick:function(){n.settings.onselect("")!==!1&&n.select("")}}),o(n.items,function(o){void 0===o.value?e.add({title:o.title,"class":"mceMenuItemTitle",onclick:function(){n.settings.onselect("")!==!1&&n.select("")}}):(o.id=t.uniqueId(),o.onclick=function(){n.settings.onselect(o.value)!==!1&&n.select(o.value)},e.add(o))}),n.onRenderMenu.dispatch(n,e),n.menu=e},postRender:function(){var i=this,a=i.classPrefix;n.add(i.id,"click",i.showMenu,i),n.add(i.id+"_text","focus",function(){i._focused||(i.keyDownHandler=n.add(i.id+"_text","keydown",function(e){var t,a=-1,r=e.keyCode;if(o(i.items,function(e,t){i.selectedValue==e.value&&(a=t)}),38==r)t=i.items[a-1];else if(40==r)t=i.items[a+1];else if(13==r)return t=i.selectedValue,i.selectedValue=null,i.settings.onselect(t),n.cancel(e);t&&(i.hideMenu(),i.select(t.value))})),i._focused=1}),n.add(i.id+"_text","blur",function(){n.remove(i.id+"_text","keydown",i.keyDownHandler),i._focused=0}),(e.isIE6||!t.boxModel)&&(n.add(i.id,"mouseover",function(){t.hasClass(i.id,a+"Disabled")||t.addClass(i.id,a+"Hover")}),n.add(i.id,"mouseout",function(){t.hasClass(i.id,a+"Disabled")||t.removeClass(i.id,a+"Hover")})),i.onPostRender.dispatch(i,t.get(i.id))},destroy:function(){this.parent(),n.clear(this.id+"_text"),n.clear(this.id+"_open")}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each;e.util.Dispatcher,e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t,n,i=this;return void 0==e?i.selectByIndex(-1):(n=e&&e.call?e:function(t){return t==e},e!=i.selectedValue&&(o(i.items,function(e,o){return n(e.value)?(t=1,i.selectByIndex(o),!1):void 0}),t||i.selectByIndex(-1)),void 0)},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,o){var i,a=this;o=o||{},o.value=n,a.isRendered()&&t.add(t.get(this.id),"option",o,e),i={title:e,value:n,attribs:o},a.items.push(i),a.onAdd.dispatch(a,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,n=this;return e=t.createHTML("option",{value:""},"-- "+n.settings.title+" --"),o(n.items,function(n){e+=t.createHTML("option",{value:n.value},n.title)}),e=t.createHTML("select",{id:n.id,"class":"mceNativeListBox"},e)},postRender:function(){function e(e){var t=i.items[e.target.selectedIndex-1];t&&(t=t.value)&&(i.onChange.dispatch(i,t),i.settings.onselect&&i.settings.onselect(t))}var o,i=this;i.rendered=!0,n.add(i.id,"change",e),n.add(i.id,"keydown",function(t){var a;return n.remove(i.id,"change",o),a=n.add(i.id,"blur",function(){n.add(i.id,"change",e),n.remove(i.id,"blur",a)}),13==t.keyCode||32==t.keyCode?(e(t),n.cancel(t)):void 0}),i.onPostRender.dispatch(i,t.get(i.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each,e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,o){this.parent(n,o),this.onRenderMenu=new e.util.Dispatcher(this),o.menu_container=o.menu_container||t.doc.body},showMenu:function(){var e,o,i,a=this,r=t.get(a.id);if(!a.isDisabled()){if(a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0),a.isMenuVisible)return a.hideMenu();e=t.getPos(a.settings.menu_container),o=t.getPos(r),i=a.menu,i.settings.offset_x=o.x,i.settings.offset_y=o.y,i.settings.vp_offset_x=o.x,i.settings.vp_offset_y=o.y,i.settings.keyboard_focus=a._focused,i.showMenu(0,r.clientHeight),n.add(t.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1}},renderMenu:function(){var e,t=this;e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:t.settings.icons}),e.onHideMenu.add(t.hideMenu,t),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(e){var o=this;e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id||e.id===o.id+"_open"})||(e&&t.getParent(e.target,".mceMenu")||(o.setState("Selected",0),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu&&o.menu.hideMenu()),o.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each,e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t){this.parent(e,t),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n,o=this,i=o.settings;return e="<tbody><tr>",n=i.image?t.createHTML("img ",{src:i.image,"class":"mceAction "+i["class"]}):t.createHTML("span",{"class":"mceAction "+i["class"]},""),e+="<td>"+t.createHTML("a",{id:o.id+"_action",href:"javascript:;","class":"mceAction "+i["class"],onclick:"return false;",onmousedown:"return false;",title:i.title},n)+"</td>",n=t.createHTML("span",{"class":"mceOpen "+i["class"]}),e+="<td>"+t.createHTML("a",{id:o.id+"_open",href:"javascript:;","class":"mceOpen "+i["class"],onclick:"return false;",onmousedown:"return false;",title:i.title},n)+"</td>",e+="</tr></tbody>",t.createHTML("table",{id:o.id,"class":"mceSplitButton mceSplitButtonEnabled "+i["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:i.title},e)},postRender:function(){var o=this,i=o.settings;i.onclick&&n.add(o.id+"_action","click",function(){o.isDisabled()||i.onclick(o.value)}),n.add(o.id+"_open","click",o.showMenu,o),n.add(o.id+"_open","focus",function(){o._focused=1}),n.add(o.id+"_open","blur",function(){o._focused=0}),(e.isIE6||!t.boxModel)&&(n.add(o.id,"mouseover",function(){t.hasClass(o.id,"mceSplitButtonDisabled")||t.addClass(o.id,"mceSplitButtonHover")}),n.add(o.id,"mouseout",function(){t.hasClass(o.id,"mceSplitButtonDisabled")||t.removeClass(o.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open")}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n){var o=this;o.parent(t,n),o.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},o.settings),o.onShowMenu=new e.util.Dispatcher(o),o.onHideMenu=new e.util.Dispatcher(o),o.value=n.default_color},showMenu:function(){var e,o,i=this;if(!i.isDisabled()){if(i.isMenuRendered||(i.renderMenu(),i.isMenuRendered=!0),i.isMenuVisible)return i.hideMenu();e=t.get(i.id),t.show(i.id+"_menu"),t.addClass(e,"mceSplitButtonSelected"),o=t.getPos(e),t.setStyles(i.id+"_menu",{left:o.x,top:o.y+e.clientHeight,zIndex:2e5}),e=0,n.add(t.doc,"mousedown",i.hideMenu,i),i.onShowMenu.dispatch(i),i._focused&&(i._keyHandler=n.add(i.id+"_menu","keydown",function(e){27==e.keyCode&&i.hideMenu()}),t.select("a",i.id+"_menu")[0].focus()),i.isMenuVisible=1}},hideMenu:function(e){var o=this;e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id+"_open"})||(e&&t.getParent(e.target,".mceSplitButtonMenu")||(t.removeClass(o.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",o.hideMenu,o),n.remove(o.id+"_menu","keydown",o._keyHandler),t.hide(o.id+"_menu")),o.onHideMenu.dispatch(o),o.isMenuVisible=0)},renderMenu:function(){var e,a,r,s,l,c=this,d=0,u=c.settings;return l=t.add(u.menu_container,"div",{id:c.id+"_menu","class":u.menu_class+" "+u["class"],style:"position:absolute;left:0;top:-1000px;"}),e=t.add(l,"div",{"class":u["class"]+" mceSplitButtonMenu"}),t.add(e,"span",{"class":"mceMenuLine"}),a=t.add(e,"table",{"class":"mceColorSplitMenu"}),r=t.add(a,"tbody"),d=0,i(o(u.colors,"array")?u.colors:u.colors.split(","),function(e){e=e.replace(/^#/,""),d--||(s=t.add(r,"tr"),d=u.grid_width-1),a=t.add(s,"td"),a=t.add(a,"a",{href:"javascript:;",style:{backgroundColor:"#"+e},_mce_color:"#"+e})}),u.more_colors_func&&(a=t.add(r,"tr"),a=t.add(a,"td",{colspan:u.grid_width,"class":"mceMoreColors"}),a=t.add(a,"a",{id:c.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},u.more_colors_title),n.add(a,"click",function(e){return u.more_colors_func.call(u.more_colors_scope||this),n.cancel(e)})),t.addClass(e,"mceColorSplitMenu"),n.add(c.id+"_menu","click",function(e){var t;return e=e.target,"A"==e.nodeName&&(t=e.getAttribute("_mce_color"))&&c.setColor(t),n.cancel(e)}),l},setColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e,n.hideMenu(),n.settings.onselect(e)},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){this.parent(),n.clear(this.id+"_menu"),n.clear(this.id+"_more"),t.remove(this.id+"_menu")}})}(tinymce),tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,t,n,o,i,a,r=this,s="",l=tinymce.DOM,c=r.settings;for(a=r.controls,n=0;a.length>n;n++)t=a[n],o=a[n-1],i=a[n+1],0===n&&(e="mceToolbarStart",t.Button?e+=" mceToolbarStartButton":t.SplitButton?e+=" mceToolbarStartSplitButton":t.ListBox&&(e+=" mceToolbarStartListBox"),s+=l.createHTML("td",{"class":e},l.createHTML("span",null,"<!-- IE -->"))),o&&t.ListBox&&(o.Button||o.SplitButton)&&(s+=l.createHTML("td",{"class":"mceToolbarEnd"},l.createHTML("span",null,"<!-- IE -->"))),s+=l.stdMode?'<td style="position: relative">'+t.renderHTML()+"</td>":"<td>"+t.renderHTML()+"</td>",i&&t.ListBox&&(i.Button||i.SplitButton)&&(s+=l.createHTML("td",{"class":"mceToolbarStart"},l.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",t.Button?e+=" mceToolbarEndButton":t.SplitButton?e+=" mceToolbarEndSplitButton":t.ListBox&&(e+=" mceToolbarEndListBox"),s+=l.createHTML("td",{"class":e},l.createHTML("span",null,"<!-- IE -->")),l.createHTML("table",{id:r.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:r.settings.align||""},"<tbody><tr>"+s+"</tr></tbody>")}}),function(e){var t=e.util.Dispatcher;e.each,e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]},requireLangPack:function(t){var n=e.settings;n&&n.language&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t){return this.items.push(t),this.lookup[e]=t,this.onAdd.dispatch(this,e,t),t},load:function(t,n,o,i){var a=this;a.urls[t]||(0!=n.indexOf("/")&&-1==n.indexOf("://")&&(n=e.baseURL+"/"+n),a.urls[t]=n.substring(0,n.lastIndexOf("/")),a.lookup[t]||e.ScriptLoader.add(n,o,i))}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t,n=e.each,o=e.extend,i=e.DOM,a=e.dom.Event,r=(e.ThemeManager,e.PluginManager,e.explode),s=e.util.Dispatcher,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=new e.util.URI(e.documentBaseURL).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new s(e),a.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new s(e),e.onRemoveEditor=new s(e),e.EditorManager=o(e,{editors:[],i18n:{},activeEditor:null,init:function(t){function s(t,n,o){var i=t[n];if(i)return e.is(i,"string")&&(o=i.replace(/\.\w+$/,""),o=o?e.resolve(o):0,i=e.resolve(i)),i.apply(o||this,Array.prototype.slice.call(arguments,2))}var c,d,u=this,m=(e.ScriptLoader,[]);t=o({theme:"simple",language:"en"},t),u.settings=t,a.add(document,"init",function(){function o(e,t){return t.constructor===RegExp?t.test(e.className):i.hasClass(e,t)}var a,p;switch(s(t,"onpageload"),t.mode){case"exact":a=t.elements||"",a.length>0&&n(r(a),function(o){i.get(o)?(d=new e.Editor(o,t),m.push(d),d.render(1)):n(document.forms,function(a){n(a.elements,function(n){n.name===o&&(o="mce_editor_"+l++,i.setAttrib(n,"id",o),d=new e.Editor(o,t),m.push(d),d.render(1))})})});break;case"textareas":case"specific_textareas":n(i.select("textarea"),function(n){t.editor_deselector&&o(n,t.editor_deselector)||(!t.editor_selector||o(n,t.editor_selector))&&(c=i.get(n.name),n.id||c||(n.id=n.name),(!n.id||u.get(n.id))&&(n.id=i.uniqueId()),d=new e.Editor(n.id,t),m.push(d),d.render(1))})}t.oninit&&(a=p=0,n(m,function(e){p++,e.initialized?a++:e.onInit.add(function(){a++,a==p&&s(t,"oninit")}),a==p&&s(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(t){var n=this,o=n.editors;return o[t.id]=t,o.push(t),n._setActive(t),n.onAddEditor.dispatch(n,t),e.adapter&&e.adapter.patchEditor(t),t},remove:function(e){var t,n=this,o=n.editors;if(!o[e.id])return null;for(delete o[e.id],t=0;o.length>t;t++)if(o[t]==e){o.splice(t,1);break}return n.activeEditor==e&&n._setActive(o[0]),e.destroy(),n.onRemoveEditor.dispatch(n,e),e
},execCommand:function(t,n,o){function i(){s.destroy(),a.detachEvent("onunload",i),a=a.tinyMCE=a.tinymce=null}var a,r=this,s=r.get(o);switch(t){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return r.get(o)||new e.Editor(o,r.settings).render(),!0;case"mceAddFrameControl":return a=o.window,a.tinyMCE=tinyMCE,a.tinymce=e,e.DOM.doc=a.document,e.DOM.win=a,s=new e.Editor(o.element_id,o),s.render(),e.isIE&&a.attachEvent("onunload",i),o.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(r.execCommand("mceAddControl",0,o),!0)}return r.activeEditor?r.activeEditor.execCommand(t,n,o):!1},execInstanceCommand:function(e,t,n,o){var i=this.get(e);return i?i.execCommand(t,n,o):!1},triggerSave:function(){n(this.editors,function(e){e.save()})},addI18n:function(t,o){var i=this.i18n;e.is(t,"string")?n(o,function(e,n){i[t+"."+n]=e}):n(t,function(e,t){n(e,function(e,o){n(e,function(e,n){"common"===o?i[t+"."+n]=e:i[t+"."+o+"."+n]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.extend,i=e.util.Dispatcher,a=e.each,r=e.isGecko,s=e.isIE,l=(e.isWebKit,e.is),c=e.ThemeManager,d=e.PluginManager,u=(e.inArray,e.grep,e.explode);e.create("tinymce.Editor",{Editor:function(t,n){var r=this;r.id=r.editorId=t,r.execCommands={},r.queryStateCommands={},r.queryValueCommands={},r.isNotDirty=!1,r.plugins={},a(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(e){r[e]=new i(r)}),r.settings=n=o({id:t,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0},n),r.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),r.baseURI=e.baseURI,r.execCallback("setup",r)},render:function(){function o(){r.language&&l.add(e.baseURL+"/langs/"+r.language+".js"),r.theme&&"-"!=r.theme.charAt(0)&&!c.urls[r.theme]&&c.load(r.theme,"themes/"+r.theme+"/editor_template"+e.suffix+".js"),a(u(r.plugins),function(t){if(t&&"-"!=t.charAt(0)&&!d.urls[t]){if("safari"==t)return;d.load(t,"plugins/"+t+"/editor_plugin"+e.suffix+".js")}}),l.loadQueue(function(){i.removed||i.init()})}var i=this,r=i.settings,s=i.id,l=e.ScriptLoader;return n.domLoaded?(tinyMCE.settings=r,i.getElement()&&(e.isIDevice||(!/TEXTAREA|INPUT/i.test(i.getElement().nodeName)&&r.hidden_input&&t.getParent(s,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:s}),s),e.WindowManager&&(i.windowManager=new e.WindowManager(i)),"xml"==r.encoding&&i.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),r.add_form_submit_trigger&&i.onSubmit.addToTop(function(){i.initialized&&(i.save(),i.isNotDirty=1)}),r.add_unload_trigger&&(i._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!i.initialized||i.destroyed||i.isHidden()||i.save({format:"raw",no_events:!0})})),e.addUnload(i.destroy,i),r.submit_patch&&i.onBeforeRenderUI.add(function(){var t=i.getElement().form;t&&(t._mceOldSubmit||(t.submit.nodeType||t.submit.length||(i.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),i.isNotDirty=1,i.formElement._mceOldSubmit(i.formElement)}),t=null))}),o())),void 0):(n.add(document,"init",function(){i.render()}),void 0)},init:function(){function n(e,t){t&&t.initial||_.execCommand("mceRepaint")}var o,i,l,m,p,g,h,f,_=this,v=_.settings,y=_.getElement();e.add(_),v.theme&&(v.theme=v.theme.replace(/-/,""),m=c.get(v.theme),_.theme=new m,_.theme.init&&v.init_theme&&_.theme.init(_,c.urls[v.theme]||e.documentBaseURL.replace(/\/$/,""))),a(u(v.plugins.replace(/\-/g,"")),function(t){var n,o=d.get(t),i=d.urls[t]||e.documentBaseURL.replace(/\/$/,"");o&&(n=new o(_,i),_.plugins[t]=n,n.init&&n.init(_,i))}),v.popup_css!==!1&&(v.popup_css=v.popup_css?_.documentBaseURI.toAbsolute(v.popup_css):_.baseURI.toAbsolute("themes/"+v.theme+"/skins/"+v.skin+"/dialog.css")),v.popup_css_add&&(v.popup_css+=","+_.documentBaseURI.toAbsolute(v.popup_css_add)),_.controlManager=new e.ControlManager(_),v.custom_undo_redo&&(_.onBeforeExecCommand.add(function(e,t,n,o,i){"Undo"==t||"Redo"==t||"mceRepaint"==t||i&&i.skip_undo||_.undoManager.hasUndo()||_.undoManager.add()}),_.onExecCommand.add(function(e,t,n,o,i){"Undo"==t||"Redo"==t||"mceRepaint"==t||i&&i.skip_undo||_.undoManager.add()})),_.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||_.nodeChanged()}),r&&(_.onUndo.add(n),_.onRedo.add(n),_.onSetContent.add(n)),_.onBeforeRenderUI.dispatch(_,_.controlManager),v.render_ui&&(i=v.width||y.style.width||y.offsetWidth,l=v.height||y.style.height||y.offsetHeight,_.orgDisplay=y.style.display,f=/^[0-9\.]+(|px)$/i,f.test(""+i)&&(i=Math.max(parseInt(i)+(m.deltaWidth||0),100)),f.test(""+l)&&(l=Math.max(parseInt(l)+(m.deltaHeight||0),100)),m=_.theme.renderUI({targetNode:y,width:i,height:l,deltaWidth:v.delta_width,deltaHeight:v.delta_height}),_.editorContainer=m.editorContainer),document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),t.setStyles(m.sizeContainer||m.editorContainer,{width:i,height:l}),l=(m.iframeHeight||l)+("number"==typeof l?m.deltaHeight||0:""),100>l&&(l=100),_.iframeHTML=v.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',v.document_base_url!=e.documentBaseURL&&(_.iframeHTML+='<base href="'+_.documentBaseURI.getURI()+'" />'),_.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',e.relaxedDomain&&(_.iframeHTML+='<script type="text/javascript">document.domain = "'+e.relaxedDomain+'";</script>'),g=v.body_id||"tinymce",-1!=g.indexOf("=")&&(g=_.getParam("body_id","","hash"),g=g[_.id]||g),h=v.body_class||"",-1!=h.indexOf("=")&&(h=_.getParam("body_class","","hash"),h=h[_.id]||""),_.iframeHTML+='</head><body id="'+g+'" class="mceContentBody '+h+'"></body></html>',e.relaxedDomain&&(s||e.isOpera&&parseFloat(opera.version())>=9.5?p='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+_.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()':e.isOpera&&(p='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()')),o=t.add(m.iframeContainer,"iframe",{id:_.id+"_ifr",src:p||'javascript:""',frameBorder:"0",style:{width:"100%",height:l}}),_.contentAreaContainer=m.iframeContainer,t.get(m.editorContainer).style.display=_.orgDisplay,t.get(_.id).style.display="none",r&&!e.isIE11?o.onload=function(){_.setupIframe()}:s&&e.relaxedDomain||_.setupIframe(),y=o=m=null},setupIframe:function(){function i(e,t){a(u(m.custom_elements),function(e){var n;0===e.indexOf("~")?(e=e.substring(1),n="span"):n="div",t.content=t.content.replace(RegExp("<("+e+")([^>]*)>","g"),"<"+n+' _mce_name="$1"$2>'),t.content=t.content.replace(RegExp("</("+e+")>","g"),"</"+n+">")})}function l(e){a(e.dom.select("a"),function(t){var n=t.parentNode;e.dom.isBlock(n)&&n.lastChild===t&&e.dom.add(n,"br",{_mce_bogus:1})})}var c,d=this,m=d.settings,p=t.get(d.id),g=d.getDoc();if(s&&e.relaxedDomain||(g.open(),g.write(d.iframeHTML),g.close()),!s)try{m.readonly||(g.designMode="On")}catch(h){}if(s&&(c=d.getBody(),t.hide(c),m.readonly||(c.contentEditable=!0),t.show(c)),d.dom=new e.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:m.force_hex_style_colors,class_filter:m.class_filter,update_styles:1,fix_ie_paragraphs:1,valid_styles:m.valid_styles}),d.schema=new e.dom.Schema,d.serializer=new e.dom.Serializer(o(m,{valid_elements:m.verify_html===!1?"*[*]":m.valid_elements,dom:d.dom,schema:d.schema})),d.selection=new e.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new e.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b"}],italic:[{inline:"em"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"u"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){d.formatter.register(e,{block:e,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new e.UndoManager(d),d.undoManager.onAdd.add(function(e,t){return t.initial?void 0:d.onChange.dispatch(d,t,e)}),d.undoManager.onUndo.add(function(e,t){return d.onUndo.dispatch(d,t,e)}),d.undoManager.onRedo.add(function(e,t){return d.onRedo.dispatch(d,t,e)}),d.forceBlocks=new e.ForceBlocks(d,{forced_root_block:m.forced_root_block}),d.editorCommands=new e.EditorCommands(d),d.serializer.onPreProcess.add(function(e,t){return d.onPreProcess.dispatch(d,t,e)}),d.serializer.onPostProcess.add(function(e,t){return d.onPostProcess.dispatch(d,t,e)}),d.onPreInit.dispatch(d),m.gecko_spellcheck||(d.getBody().spellcheck=0),m.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),m.directionality&&(d.getBody().dir=m.directionality),m.nowrap&&(d.getBody().style.whiteSpace="nowrap"),m.custom_elements&&(d.onBeforeSetContent.add(i),d.onPostProcess.add(function(e,t){t.set&&i(e,t)})),m.handle_node_change_callback&&d.onNodeChange.add(function(e,t,n){d.execCallback("handle_node_change_callback",d.id,n,-1,-1,!0,d.selection.isCollapsed())}),m.save_callback&&d.onSaveContent.add(function(e,t){var n=d.execCallback("save_callback",d.id,t.content,d.getBody());n&&(t.content=n)}),m.onchange_callback&&d.onChange.add(function(e,t){d.execCallback("onchange_callback",d,t)}),m.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(e,t){t.initial&&(t.content=t.content.replace(/\r?\n/g,"<br />"))}),m.fix_nesting&&s&&d.onBeforeSetContent.add(function(e,t){t.content=d._fixNesting(t.content)}),m.preformatted&&d.onPostProcess.add(function(e,t){t.content=t.content.replace(/^\s*<pre.*?>/,""),t.content=t.content.replace(/<\/pre>\s*$/,""),t.set&&(t.content='<pre class="mceItemHidden">'+t.content+"</pre>")}),m.verify_css_classes&&(d.serializer.attribValueFilter=function(e,t){var n,o;return"class"==e?(d.classesRE||(o=d.dom.getClasses(),o.length>0&&(n="",a(o,function(e){n+=(n?"|":"")+e["class"]}),d.classesRE=RegExp("("+n+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(t)||d.classesRE.test(t)?t:""):t}),m.cleanup_callback&&(d.onBeforeSetContent.add(function(e,t){t.content=d.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),d.onPreProcess.add(function(e,t){t.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&d.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),d.onPostProcess.add(function(e,t){t.set&&(t.content=d.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=d.execCallback("cleanup_callback","get_from_editor",t.content,t))})),m.save_callback&&d.onGetContent.add(function(e,t){t.save&&(t.content=d.execCallback("save_callback",d.id,t.content,d.getBody()))}),m.handle_event_callback&&d.onEvent.add(function(e,t,o){d.execCallback("handle_event_callback",t,e,o)===!1&&n.cancel(t)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),m.padd_empty_editor&&d.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),r&&(d.onExecCommand.add(function(e,t){"CreateLink"===t&&l(e)}),d.onSetContent.add(d.selection.onSetContent.add(l)),!m.readonly))try{g.designMode="Off",g.designMode="On"}catch(h){}setTimeout(function(){d.removed||(d.load({initial:!0,format:m.cleanup_on_startup?"html":"raw"}),d.startContent=d.getContent({format:"raw"}),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),m.content_css&&e.each(u(m.content_css),function(e){d.dom.loadCSS(d.documentBaseURI.toAbsolute(e))}),m.auto_focus&&setTimeout(function(){var t=e.get(m.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getWin().focus()},100))},1),p=null},focus:function(t){var n,o,i,a=this,r=a.settings.content_editable,s=a.getDoc();t||(o=a.selection.getRng(),o.item&&(i=o.item(0)),r||a.getWin().focus(),i&&i.ownerDocument==s&&(o=s.body.createControlRange(),o.addElement(i),o.select())),e.activeEditor!=a&&(null!=(n=e.activeEditor)&&n.onDeactivate.dispatch(n,a),a.onActivate.dispatch(a,n)),e._setActive(a)},execCallback:function(t){var n,o=this,i=o.settings[t];if(i)return o.callbackLookup&&(n=o.callbackLookup[t])&&(i=n.func,n=n.scope),l(i,"string")&&(n=i.replace(/\.\w+$/,""),n=n?e.resolve(n):0,i=e.resolve(i),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[t]={func:i,scope:n}),i.apply(n||o,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",o=e.i18n;return t?o[n+"."+t]||t.replace(/{\#([^}]+)\}/g,function(e,t){return o[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(l(n)?n:"{#"+t+"}")},getParam:function(t,n,o){var i,r=e.trim,s=l(this.settings[t])?this.settings[t]:n;return"hash"===o?(i={},l(s,"string")?a(s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(","),function(e){e=e.split("="),i[r(e[0])]=e.length>1?r(e[1]):r(e)}):i=s,i):s},nodeChanged:function(e){var t=this,n=t.selection,o=(s?n.getNode():n.getStart())||t.getBody();t.initialized&&(e=e||{},o=s&&o.ownerDocument!=t.getDoc()?t.getBody():o,e.parents=[],t.dom.getParent(o,function(t){return"BODY"==t.nodeName?!0:(e.parents.push(t),void 0)}),t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,o,n.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,o){var i,r=this;return r.settings.custom_shortcuts?(r.shortcuts=r.shortcuts||{},l(n,"string")&&(i=n,n=function(){r.execCommand(i,!1,null)}),l(n,"object")&&(i=n,n=function(){r.execCommand(i[0],i[1],i[2])}),a(u(e),function(e){var i={func:n,scope:o||this,desc:t,alt:!1,ctrl:!1,shift:!1};a(u(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":i[e]=!0;break;default:i.charCode=e.charCodeAt(0),i.keyCode=e.toUpperCase().charCodeAt(0)}}),r.shortcuts[(i.ctrl?"ctrl":"")+","+(i.alt?"alt":"")+","+(i.shift?"shift":"")+","+i.keyCode]=i}),!0):!1},execCommand:function(t,n,o,i){var r,s,l=this,c=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(t)||i&&i.skip_focus||l.focus(),r={},l.onBeforeExecCommand.dispatch(l,t,n,o,r),r.terminate?!1:l.execCallback("execcommand_callback",l.id,l.selection.getNode(),t,n,o)?(l.onExecCommand.dispatch(l,t,n,o,i),!0):(r=l.execCommands[t])&&(s=r.func.call(r.scope,n,o),s!==!0)?(l.onExecCommand.dispatch(l,t,n,o,i),s):(a(l.plugins,function(e){return e.execCommand&&e.execCommand(t,n,o)?(l.onExecCommand.dispatch(l,t,n,o,i),c=1,!1):void 0}),c?!0:l.theme&&l.theme.execCommand&&l.theme.execCommand(t,n,o)?(l.onExecCommand.dispatch(l,t,n,o,i),!0):e.GlobalCommands.execCommand(l,t,n,o)?(l.onExecCommand.dispatch(l,t,n,o,i),!0):l.editorCommands.execCommand(t,n,o)?(l.onExecCommand.dispatch(l,t,n,o,i),!0):(l.getDoc().execCommand(t,n,o),l.onExecCommand.dispatch(l,t,n,o,i),void 0))},queryCommandState:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryStateCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=o.editorCommands.queryCommandState(e),-1!==t)return t;try{return this.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryValueCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=o.editorCommands.queryCommandValue(e),l(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(i){}}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();s&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t,n=this,o=n.getElement();return o?(e=e||{},e.load=!0,t=n.setContent(l(o.value)?o.value:o.innerHTML,e),e.element=o,e.no_events||n.onLoadContent.dispatch(n,e),e.element=o=null,t):void 0},save:function(e){var n,o,i=this,r=i.getElement();if(r&&i.initialized)return e=e||{},e.save=!0,e.no_events||(i.undoManager.typing=0,i.undoManager.add()),e.element=r,n=e.content=i.getContent(e),e.no_events||i.onSaveContent.dispatch(i,e),n=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=n:(r.innerHTML=n,(o=t.getParent(i.id,"form"))&&a(o.elements,function(e){return e.name==i.id?(e.value=n,!1):void 0})),e.element=r=null,n},setContent:function(t,n){var o=this;return n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||o.onBeforeSetContent.dispatch(o,n),e.isIE||0!==t.length&&!/^\s+$/.test(t)||(n.content=o.dom.setHTML(o.getBody(),'<br _mce_bogus="1" />'),n.format="raw"),n.content=o.dom.setHTML(o.getBody(),e.trim(n.content)),"raw"!=n.format&&o.settings.cleanup&&(n.getInner=!0,n.content=o.dom.setHTML(o.getBody(),o.serializer.serialize(o.getBody(),n))),n.no_events||o.onSetContent.dispatch(o,n),n.content},getContent:function(e){var t,n=this;return e=e||{},e.format=e.format||"html",e.get=!0,e.no_events||n.onBeforeGetContent.dispatch(n,e),"raw"!=e.format&&n.settings.cleanup?(e.getInner=!0,t=n.serializer.serialize(n.getBody(),e)):t=n.getBody().innerHTML,t=t.replace(/^\s*|\s*$/g,""),e.content=t,e.no_events||n.onGetContent.dispatch(n,e),e.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e,n=this;return n.contentWindow||(e=t.get(n.id+"_ifr"),e&&(n.contentWindow=e.contentWindow)),n.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var o=this,i=o.settings;return i.urlconverter_callback?o.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:i.relative_urls?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t=this,n=t.settings;e=e||t.getBody(),l(t.hasVisual)||(t.hasVisual=n.visual),a(t.dom.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return o=t.dom.getAttrib(e,"border"),o&&"0"!=o||(t.hasVisual?t.dom.addClass(e,n.visual_table_class):t.dom.removeClass(e,n.visual_table_class)),void 0;case"A":return o=t.dom.getAttrib(e,"name"),o&&(t.hasVisual?t.dom.addClass(e,"mceItemAnchor"):t.dom.removeClass(e,"mceItemAnchor")),void 0}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var n=this,o=n.getContainer();n.removed=1,n.hide(),n.execCallback("remove_instance_callback",n),n.onRemove.dispatch(n),n.onExecCommand.listeners=[],e.remove(n),t.remove(o)},destroy:function(t){var o=this;o.destroyed||(t||(e.removeUnload(o.destroy),tinyMCE.onBeforeUnload.remove(o._beforeUnload),o.theme&&o.theme.destroy&&o.theme.destroy(),o.controlManager.destroy(),o.selection.destroy(),o.dom.destroy(),o.settings.content_editable||(n.clear(o.getWin()),n.clear(o.getDoc())),n.clear(o.getBody()),n.clear(o.formElement)),o.formElement&&(o.formElement.submit=o.formElement._mceOldSubmit,o.formElement._mceOldSubmit=null),o.contentAreaContainer=o.formElement=o.container=o.settings.content_element=o.bodyElement=o.contentDocument=o.contentWindow=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),o.destroyed=1)},_addEvents:function(){function o(e,t){e.type,u.removed||u.onEvent.dispatch(u,e,t)!==!1&&u[g[e.fakeType||e.type]].dispatch(u,e,t)}function i(){var e=this,t=e.getDoc(),n=e.settings;if(r&&!n.readonly){if(e._isHidden())try{n.content_editable||(t.designMode="On")}catch(o){}try{t.execCommand("styleWithCSS",0,!1)}catch(o){if(!e._isHidden())try{t.execCommand("useCSS",0,!0)}catch(o){}}if(!n.table_inline_editing)try{t.execCommand("enableInlineTableEditing",!1,!1)}catch(o){}if(!n.object_resizing)try{t.execCommand("enableObjectResizing",!1,!1)}catch(o){}}}function l(t){var n=null;return t.altKey||t.ctrlKey||t.metaKey?(a(u.shortcuts,function(o){return e.isMac&&o.ctrl!=t.metaKey||!e.isMac&&o.ctrl!=t.ctrlKey||o.alt!=t.altKey||o.shift!=t.shiftKey?void 0:t.keyCode==o.keyCode||t.charCode&&t.charCode==o.charCode?(n=o,!1):void 0}),n):n}function c(){u.undoManager.typing=0,u.undoManager.add()}var d,u=this,m=u.settings,p=u.dom,g={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};if(a(g,function(n,i){switch(i){case"contextmenu":e.isOpera?p.bind(u.getBody(),"mousedown",function(e){e.ctrlKey&&(e.fakeType="contextmenu",o(e))}):p.bind(u.getBody(),i,o);break;case"paste":p.bind(u.getBody(),i,function(e){o(e)});break;case"submit":case"reset":p.bind(u.getElement().form||t.getParent(u.id,"form"),i,o);break;default:p.bind(m.content_editable?u.getBody():u.getDoc(),i,o)}}),p.bind(m.content_editable?u.getBody():r?u.getDoc():u.getWin(),"focus",function(){u.focus(!0)}),e.isGecko&&p.bind(u.getDoc(),"DOMNodeInserted",function(e){var t;e=e.target,1===e.nodeType&&"IMG"===e.nodeName&&(t=e.getAttribute("_mce_src"))&&(e.src=u.documentBaseURI.toAbsolute(t))}),r&&(u.onBeforeExecCommand.add(i),u.onMouseDown.add(i)),e.isWebKit&&u.onClick.add(function(e,t){t=t.target,("IMG"==t.nodeName||"A"==t.nodeName&&p.hasClass(t,"mceItemAnchor"))&&(u.selection.getSel().setBaseAndExtent(t,0,t,1),u.nodeChanged())}),u.onMouseUp.add(u.nodeChanged),u.onKeyUp.add(function(t,n){var o=n.keyCode;(o>=33&&36>=o||o>=37&&40>=o||13==o||45==o||46==o||8==o||e.isMac&&(91==o||93==o)||n.ctrlKey)&&u.nodeChanged()}),u.onReset.add(function(){u.setContent(u.startContent,{format:"raw"})}),m.custom_shortcuts){for(m.custom_undo_redo_keyboard_shortcuts&&(u.addShortcut("ctrl+z",u.getLang("undo_desc"),"Undo"),u.addShortcut("ctrl+y",u.getLang("redo_desc"),"Redo")),u.addShortcut("ctrl+b",u.getLang("bold_desc"),"Bold"),u.addShortcut("ctrl+i",u.getLang("italic_desc"),"Italic"),u.addShortcut("ctrl+u",u.getLang("underline_desc"),"Underline"),d=1;6>=d;d++)u.addShortcut("ctrl+"+d,"",["FormatBlock",!1,"h"+d]);u.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]),u.addShortcut("ctrl+8","",["FormatBlock",!1,"<div>"]),u.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]),u.onKeyUp.add(function(e,t){var o=l(t);return o?n.cancel(t):void 0}),u.onKeyPress.add(function(e,t){var o=l(t);return o?n.cancel(t):void 0}),u.onKeyDown.add(function(e,t){var o=l(t);return o?(o.func.call(o.scope),n.cancel(t)):void 0})}e.isIE&&(p.bind(u.getDoc(),"controlselect",function(e){var t,o=u.resizeInfo;e=e.target,"IMG"===e.nodeName&&(o&&p.unbind(o.node,o.ev,o.cb),p.hasClass(e,"mceItemNoResize")?(ev="resizestart",t=p.bind(e,"resizestart",n.cancel,n)):(ev="resizeend",t=p.bind(e,ev,function(e){var t;e=e.target,(t=p.getStyle(e,"width"))&&(p.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),p.setStyle(e,"width","")),(t=p.getStyle(e,"height"))&&(p.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),p.setStyle(e,"height",""))})),o=u.resizeInfo={node:e,ev:ev,cb:t})}),u.onKeyDown.add(function(e,t){switch(t.keyCode){case 8:if(u.selection.getRng().item)return e.dom.remove(u.selection.getRng().item(0)),n.cancel(t)}})),e.isOpera&&u.onClick.add(function(e,t){n.prevent(t)}),m.custom_undo_redo&&(p.bind(u.getDoc(),"focusout",function(){!u.removed&&u.undoManager.typing&&c()}),u.onKeyUp.add(function(e,t){(t.keyCode>=33&&36>=t.keyCode||t.keyCode>=37&&40>=t.keyCode||13==t.keyCode||45==t.keyCode||t.ctrlKey)&&c()}),u.onKeyDown.add(function(e,t){var n,o,i;if(s&&46==t.keyCode&&(n=u.selection.getRng(),n.parentElement)){if(o=n.parentElement(),t.ctrlKey&&(n.moveEnd("word",1),n.select()),u.selection.getSel().clear(),n.parentElement()==o){i=u.selection.getBookmark();try{o.innerHTML=o.innerHTML}catch(a){}u.selection.moveToBookmark(i)}return t.preventDefault(),void 0}return t.keyCode>=33&&36>=t.keyCode||t.keyCode>=37&&40>=t.keyCode||13==t.keyCode||45==t.keyCode?(u.undoManager.typing&&c(),void 0):(u.undoManager.typing||(u.undoManager.add(),u.undoManager.typing=1),void 0)}),u.onMouseDown.add(function(){u.undoManager.typing&&c()}))},_isHidden:function(){var e;return r?(e=this.selection.getSel(),!e||!e.rangeCount||0==e.rangeCount):0},_fixNesting:function(e){var t,n=[];for(e=e.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(e,o,i){if("/"===o){if(!n.length)return"";if(i!==n[n.length-1].tag){for(t=n.length-1;t>=0;t--)if(n[t].tag===i){n[t].close=1;break}return""}n.pop(),n.length&&n[n.length-1].close&&(e=e+"</"+n[n.length-1].tag+">",n.pop())}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(i))return e;if(/\/>$/.test(e))return e;n.push({tag:i})}return e}),t=n.length-1;t>=0;t--)e+="</"+n[t].tag+">";return e}})}(tinymce),function(e){var t,n=e.each,o=!0,i=!1;e.EditorCommands=function(a){function r(e,t,n){var a;return e=e.toLowerCase(),(a=v.exec[e])?(a(e,t,n),o):i}function s(e){var t;return e=e.toLowerCase(),(t=v.state[e])?t(e):-1}function l(e){var t;return e=e.toLowerCase(),(t=v.value[e])?t(e):i}function c(e,t){t=t||"exec",n(e,function(e,o){n(o.toLowerCase().split(","),function(n){v[t][n]=e})})}function d(e,n,o){return n===t&&(n=i),o===t&&(o=null),a.getDoc().execCommand(e,n,o)}function u(e){return a.formatter.match(e)}function m(e,n){a.formatter.toggle(e,n?{value:n}:t)}function p(e){h=_.getBookmark(e)}function g(){_.moveToBookmark(h)}var h,f=a.dom,_=a.selection,v={state:{},exec:{},value:{}},y=a.settings;e.extend(this,{execCommand:r,queryCommandState:s,queryCommandValue:l,addCommands:c}),c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},"Cut,Copy,Paste":function(t){var n,i=a.getDoc();try{d(t)}catch(r){n=o}(n||!i.queryCommandSupported(t))&&(e.isGecko?a.windowManager.confirm(a.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):a.windowManager.alert(a.getLang("clipboard_no_support")))},unlink:function(e){_.isCollapsed()&&_.select(_.getNode()),d(e),_.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);n("left,center,right,full".split(","),function(e){t!=e&&a.formatter.remove("align"+e)}),m("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;d(e),t=f.getParent(_.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(p(),f.split(n,t),g()))},"Bold,Italic,Underline,Strikethrough":function(e){m(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){m(e,n)},FontSize:function(t,n,o){var i,a;o>=1&&7>=o&&(a=e.explode(y.font_size_style_values),i=e.explode(y.font_size_classes),o=i?i[o-1]||o:a[o-1]||o),m(t,o)},RemoveFormat:function(e){a.formatter.remove(e)},mceBlockQuote:function(){m("blockquote")},FormatBlock:function(e,t,n){return m(n||"p")},mceCleanup:function(){var e=_.getBookmark();a.setContent(a.getContent({cleanup:o}),{cleanup:o}),_.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||_.getNode();i!=a.getBody()&&(p(),a.dom.remove(i,o),g())},mceSelectNodeDepth:function(e,n,o){var r=0;f.getParent(_.getNode(),function(e){return 1==e.nodeType&&r++==o?(_.select(e),i):t
},a.getBody())},mceSelectNode:function(e,t,n){_.select(n)},mceInsertContent:function(e,t,n){_.setContent(n)},mceInsertRawHTML:function(e,t,n){_.setContent("tiny_mce_marker"),a.setContent(a.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceSetContent:function(e,t,n){a.setContent(n)},"Indent,Outdent":function(e){var t,o,i;t=y.indentation,o=/[a-z%]+$/i.exec(t),t=parseInt(t),s("InsertUnorderedList")||s("InsertOrderedList")?d(e):n(_.getSelectedBlocks(),function(n){"outdent"==e?(i=Math.max(0,parseInt(n.style.paddingLeft||0)-t),f.setStyle(n,"paddingLeft",i?i+o:"")):f.setStyle(n,"paddingLeft",parseInt(n.style.paddingLeft||0)+t+o)})},mceRepaint:function(){if(e.isGecko)try{p(o),_.getSel()&&_.getSel().selectAllChildren(a.getBody()),_.collapse(o),g()}catch(t){}},mceToggleFormat:function(e,t,n){a.formatter.toggle(n)},InsertHorizontalRule:function(){_.setContent("<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(e,t,n){_.setContent(n.replace(/\{\$selection\}/g,_.getContent({format:"text"})))},mceInsertLink:function(t,r,s){var l=f.getParent(_.getNode(),"a");e.is(s,"string")&&(s={href:s}),l?s.href?f.setAttribs(l,s):a.dom.remove(l,o):(d("CreateLink",i,"javascript:mctmp(0);"),n(f.select("a[href=javascript:mctmp(0);]"),function(e){f.setAttribs(e,s)}))},selectAll:function(){var e=f.getRoot(),t=f.createRng();t.setStart(e,0),t.setEnd(e,e.childNodes.length),a.selection.setRng(t)}}),c({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){return u("align"+e.substring(7))},"Bold,Italic,Underline,Strikethrough":function(e){return u(e)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var e;if(y.inline_styles){if((e=f.getParent(_.getStart(),f.isBlock))&&parseInt(e.style.paddingLeft)>0)return o;if((e=f.getParent(_.getEnd(),f.isBlock))&&parseInt(e.style.paddingLeft)>0)return o}return s("InsertUnorderedList")||s("InsertOrderedList")||!y.inline_styles&&!!f.getParent(_.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){return f.getParent(_.getNode(),"insertunorderedlist"==e?"UL":"OL")}},"state"),c({"FontSize,FontName":function(e){var t,n=0;return(t=f.getParent(_.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),y.custom_undo_redo&&c({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function o(){return e.trim(n.getContent({format:"raw",no_events:1}))}var i,a=0,r=[];return i={typing:0,onAdd:new t(i),onUndo:new t(i),onRedo:new t(i),add:function(e){var t,s,l=n.settings;if(e=e||{},e.content=o(),s=r[a],s&&s.content==e.content&&(a>0||1==r.length))return null;if(l.custom_undo_redo_levels&&r.length>l.custom_undo_redo_levels){for(t=0;r.length-1>t;t++)r[t]=r[t+1];r.length--,a=r.length}return e.bookmark=n.selection.getBookmark(2,!0),r.length-1>a&&(0==a?r=[]:r.length=a+1),r.length||(e.initial=!0),r.push(e),a=r.length-1,i.onAdd.dispatch(i,e),n.isNotDirty=0,e},undo:function(){var e;return i.typing&&(i.add(),i.typing=0),a>0&&(e=r[--a],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),i.onUndo.dispatch(i,e)),e},redo:function(){var e;return r.length-1>a&&(e=r[++a],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),i.onRedo.dispatch(i,e)),e},clear:function(){r=[],a=i.typing=0},hasUndo:function(){return a>0||i.typing},hasRedo:function(){return r.length-1>a}}}}(tinymce),function(e){function t(e){var t,n,o;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&(t?(n=e.cloneNode(!1),n.appendChild(t),t=n):t=o=e.cloneNode(!1),t.removeAttribute("id"));while(e=e.parentNode);return t?{wrapper:t,inner:o}:void 0}function n(e,t){var n=t.ownerDocument.createRange();return n.setStart(e.endContainer,e.endOffset),n.setEndAfter(t),0==n.cloneContents().textContent.length}function o(e){return e=e.innerHTML,e=e.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-"),e=e.replace(/<[^>]+>/g,""),""==e.replace(/[ \u00a0\t\r\n]+/g,"")}function i(e,t,n){var i,a;return o(n)?(i=t.getParent(n,"ul,ol"),t.getParent(i.parentNode,"ul,ol")||(t.split(i,n),a=t.create("p",0,'<br _mce_bogus="1" />'),t.replace(a,n),e.select(a,1)),u):d}var a=e.dom.Event,r=e.isIE,s=e.isGecko,l=e.isOpera,c=e.each,d=(e.extend,!0),u=!1;e.create("tinymce.ForceBlocks",{ForceBlocks:function(t){function n(t,n){l&&(n.content=n.content.replace(i.reOpera,"</"+o+">")),n.content=e._replace(i.rePadd,"<"+o+"$1$2$3$4$5$6> </"+o+">",n.content),r||l||!n.set?n.content=e._replace(i.reBR2Nbsp,"<"+o+"$1$2> </"+o+">",n.content):(n.content=n.content.replace(i.reNbsp2BR1,"<"+o+"$1$2><br /></"+o+">"),n.content=n.content.replace(i.reNbsp2BR2,"<"+o+"$1$2><br /></"+o+">"))}var o,i=this,a=t.settings;i.editor=t,i.dom=t.dom,o=(a.forced_root_block||"p").toLowerCase(),a.element=o.toUpperCase(),t.onPreInit.add(i.setup,i),i.reOpera=RegExp("(\\u00a0|&#160;|&nbsp;)</"+o+">","gi"),i.rePadd=RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,o),"gi"),i.reNbsp2BR1=RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,o),"gi"),i.reNbsp2BR2=RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,o),"gi"),i.reBR2Nbsp=RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,o),"gi"),t.onBeforeSetContent.add(n),t.onPostProcess.add(n),a.forced_root_block&&(t.onInit.add(i.forceRoots,i),t.onSetContent.add(i.forceRoots,i),t.onBeforeGetContent.add(i.forceRoots,i))},setup:function(){function n(e){var t,n,o=g.getRng(),i=p.create("div",null," "),a=p.getViewPort(e.getWin()).h;o.insertNode(t=p.create("br")),o.setStartAfter(t),o.setEndAfter(t),g.setRng(o),g.getSel().focusNode==t.previousSibling&&(g.select(p.insertAfter(p.doc.createTextNode(" "),t)),g.collapse(d)),p.insertAfter(i,t),n=p.getPos(i).y,p.remove(i),n>a&&e.getWin().scrollTo(0,n)}var i=this,l=i.editor,m=l.settings,p=l.dom,g=l.selection;m.forced_root_block&&(l.onBeforeExecCommand.add(i.forceRoots,i),l.onKeyUp.add(i.forceRoots,i),l.onPreProcess.add(i.forceRoots,i)),m.force_br_newlines&&r&&l.onKeyPress.add(function(e,t){var n;return 13==t.keyCode&&"LI"!=g.getNode().nodeName?(g.setContent('<br id="__" /> ',{format:"raw"}),n=p.get("__"),n.removeAttribute("id"),g.select(n),g.collapse(),a.cancel(t)):void 0}),m.force_p_newlines&&(r?(e.addUnload(function(){i._previousFormats=0}),l.onKeyPress.add(function(e,n){i._previousFormats=0,13==n.keyCode&&!n.shiftKey&&e.selection.isCollapsed()&&m.keep_styles&&(i._previousFormats=t(e.selection.getStart()))}),l.onKeyUp.add(function(e,t){if(13==t.keyCode&&!t.shiftKey){var n=e.selection.getStart(),o=i._previousFormats;!n.hasChildNodes()&&o&&(n=p.getParent(n,p.isBlock),n&&"LI"!=n.nodeName&&(n.innerHTML="",i._previousFormats?(n.appendChild(o.wrapper),o.inner.innerHTML="﻿"):n.innerHTML="﻿",g.select(n,1),e.getDoc().execCommand("Delete",!1,null),i._previousFormats=0))}})):l.onKeyPress.add(function(e,t){13!=t.keyCode||t.shiftKey||i.insertPara(t)||a.cancel(t)}),s&&l.onKeyDown.add(function(e,t){8!=t.keyCode&&46!=t.keyCode||t.shiftKey||i.backspaceDelete(t,8==t.keyCode)})),e.isWebKit&&l.onKeyPress.add(function(e,t){13==t.keyCode&&(t.shiftKey||m.force_br_newlines&&!p.getParent(g.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(e),a.cancel(t))}),l.onPreProcess.add(function(e,t){c(p.select("p,h1,h2,h3,h4,h5,h6,div",t.node),function(n){o(n)&&c(p.select("span,em,strong,b,i",t.node),function(t){return t.hasChildNodes()?void 0:(t.appendChild(e.getDoc().createTextNode(" ")),u)})})}),r&&"P"!=m.element&&(l.onKeyPress.add(function(){i.lastElm=g.getNode().nodeName}),l.onKeyUp.add(function(e,t){var n,o=g.getNode(),a=e.getBody();1===a.childNodes.length&&"P"==o.nodeName?(o=p.rename(o,m.element),g.select(o),g.collapse(),e.nodeChanged()):13!=t.keyCode||t.shiftKey||"P"==i.lastElm||(n=p.getParent(o,"p"),n&&(p.rename(n,m.element),e.nodeChanged()))}))},find:function(e,t,n){for(var o=this.editor,i=o.getDoc().createTreeWalker(e,4,null,u),a=-1;e=i.nextNode();){if(a++,0==t&&e==n)return a;if(1==t&&a==n)return e}return-1},forceRoots:function(e){var t,n,o,i,a,s,l,c,d,u,m,p,g=this,e=g.editor,h=e.getBody(),f=e.getDoc(),_=e.selection,v=_.getSel(),y=_.getRng(),b=-2,C=-16777215,w=h.childNodes;for(u=w.length-1;u>=0;u--)a=w[u],1===a.nodeType&&a.getAttribute("_mce_type")?s=null:3===a.nodeType||!g.dom.isBlock(a)&&8!==a.nodeType&&!/^(script|mce:script|style|mce:style)$/i.test(a.nodeName)?s?s.hasChildNodes()?s.insertBefore(a,s.firstChild):s.appendChild(a):(3!=a.nodeType||/[^\s]/g.test(a.nodeValue))&&(-2==b&&y&&(!r||y.setStart?1==y.startContainer.nodeType&&(m=y.startContainer.childNodes[y.startOffset])&&1==m.nodeType?(p=m.getAttribute("id"),m.setAttribute("id","__mce")):e.dom.getParent(y.startContainer,function(e){return e===h})&&(n=y.startOffset,o=y.endOffset,b=g.find(h,0,y.startContainer),t=g.find(h,0,y.endContainer)):(y.item&&(i=f.body.createTextRange(),i.moveToElementText(y.item(0)),y=i),i=f.body.createTextRange(),i.moveToElementText(h),i.collapse(1),l=-1*i.move("character",C),i=y.duplicate(),i.collapse(1),c=-1*i.move("character",C),i=y.duplicate(),i.collapse(0),d=-1*i.move("character",C)-c,b=c-l,t=d)),s=e.dom.create(e.settings.forced_root_block),a.parentNode.replaceChild(s,a),s.appendChild(a)):s=null;if(-2!=b)if(!r||y.setStart)s=h.getElementsByTagName(e.settings.element)[0],y=f.createRange(),-1!=b?y.setStart(g.find(h,1,b),n):y.setStart(s,0),-1!=t?y.setEnd(g.find(h,1,t),o):y.setEnd(s,0),v&&(v.removeAllRanges(),v.addRange(y));else try{y=v.createRange(),y.moveToElementText(h),y.collapse(1),y.moveStart("character",b),y.moveEnd("character",t),y.select()}catch(k){}else r&&!y.setStart||!(m=e.dom.get("__mce"))||(p?m.setAttribute("id",p):m.removeAttribute("id"),y=f.createRange(),y.setStartBefore(m),y.setEndBefore(m),_.setRng(y))},getParentBlock:function(e){var t=this.dom;return t.getParent(e,t.isBlock)},insertPara:function(){function e(e,t){var n,o,i,a=[];if(e.innerHTML="",I.keep_styles){o=t;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(o.nodeName)&&(n=o.cloneNode(u),A.setAttrib(n,"id",""),a.push(n));while(o=o.parentNode)}if(a.length>0){for(i=a.length-1,n=e;i>=0;i--)n=n.appendChild(a[i]);return a[0].innerHTML=l?"&nbsp;":"<br />",a[0]}e.innerHTML=l?"&nbsp;":"<br />"}function t(e){return T.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,u).nextNode()||e}var a,r,c,m,p,g,h,f,_,v,y,b,C,w,k,x,E,M,S=this,P=S.editor,A=P.dom,T=P.getDoc(),I=P.settings,B=P.selection.getSel(),N=B.getRangeAt(0),L=T.body,D=A.getViewPort(P.getWin());if(a=T.createRange(),a.setStart(B.anchorNode,B.anchorOffset),a.collapse(d),r=T.createRange(),r.setStart(B.focusNode,B.focusOffset),r.collapse(d),c=0>a.compareBoundaryPoints(a.START_TO_END,r),m=c?B.anchorNode:B.focusNode,p=c?B.anchorOffset:B.focusOffset,g=c?B.focusNode:B.anchorNode,h=c?B.focusOffset:B.anchorOffset,m===g&&/^(TD|TH)$/.test(m.nodeName))return"BR"==m.firstChild.nodeName&&A.remove(m.firstChild),0==m.childNodes.length?(P.dom.add(m,I.element,null,"<br />"),b=P.dom.add(m,I.element,null,"<br />")):(k=m.innerHTML,m.innerHTML="",P.dom.add(m,I.element,null,k),b=P.dom.add(m,I.element,null,"<br />")),N=T.createRange(),N.selectNodeContents(b),N.collapse(1),P.selection.setRng(N),u;if(m==L&&g==L&&L.firstChild&&P.dom.isBlock(L.firstChild)&&(m=g=m.firstChild,p=h=0,a=T.createRange(),a.setStart(m,0),r=T.createRange(),r.setStart(g,0)),m="HTML"==m.nodeName?T.body:m,m="BODY"==m.nodeName?m.firstChild:m,g="HTML"==g.nodeName?T.body:g,g="BODY"==g.nodeName?g.firstChild:g,f=S.getParentBlock(m),_=S.getParentBlock(g),v=f?f.nodeName:I.element,k=S.dom.getParent(f,"li,pre"))return"LI"==k.nodeName?i(P.selection,S.dom,k):d;f&&("CAPTION"==f.nodeName||/absolute|relative|fixed/gi.test(A.getStyle(f,"position",1)))&&(v=I.element,f=null),_&&("CAPTION"==_.nodeName||/absolute|relative|fixed/gi.test(A.getStyle(f,"position",1)))&&(v=I.element,_=null),(/(TD|TABLE|TH|CAPTION)/.test(v)||f&&"DIV"==v&&/left|right/gi.test(A.getStyle(f,"float",1)))&&(v=I.element,f=_=null),y=f&&f.nodeName==v?f.cloneNode(0):P.dom.create(v),b=_&&_.nodeName==v?_.cloneNode(0):P.dom.create(v),b.removeAttribute("id"),/^(H[1-6])$/.test(v)&&n(N,f)&&(b=P.dom.create(I.element)),k=C=m;do{if(k==L||9==k.nodeType||S.dom.isBlock(k)||/(TD|TABLE|TH|CAPTION)/.test(k.nodeName))break;C=k}while(k=k.previousSibling?k.previousSibling:k.parentNode);k=w=g;do{if(k==L||9==k.nodeType||S.dom.isBlock(k)||/(TD|TABLE|TH|CAPTION)/.test(k.nodeName))break;w=k}while(k=k.nextSibling?k.nextSibling:k.parentNode);C.nodeName==v?a.setStart(C,0):a.setStartBefore(C),a.setEnd(m,p),y.appendChild(a.cloneContents()||T.createTextNode(""));try{r.setEndAfter(w)}catch(R){}return r.setStart(g,h),b.appendChild(r.cloneContents()||T.createTextNode("")),N=T.createRange(),C.previousSibling||C.parentNode.nodeName!=v?a.startContainer.nodeName==v&&0==a.startOffset?N.setStartBefore(a.startContainer):N.setStart(a.startContainer,a.startOffset):N.setStartBefore(C.parentNode),w.nextSibling||w.parentNode.nodeName!=v?N.setEnd(r.endContainer,r.endOffset):N.setEndAfter(w.parentNode),N.deleteContents(),l&&P.getWin().scrollTo(0,D.y),y.firstChild&&y.firstChild.nodeName==v&&(y.innerHTML=y.firstChild.innerHTML),b.firstChild&&b.firstChild.nodeName==v&&(b.innerHTML=b.firstChild.innerHTML),o(y)&&(y.innerHTML="<br />"),o(b)&&(M=e(b,g)),l&&9.5>parseFloat(opera.version())?(N.insertNode(y),N.insertNode(b)):(N.insertNode(b),N.insertNode(y)),b.normalize(),y.normalize(),N=T.createRange(),N.selectNodeContents(s?t(M||b):M||b),N.collapse(1),B.removeAllRanges(),B.addRange(N),x=P.dom.getPos(b).y,E=b.clientHeight,(D.y>x||x+E>D.y+D.h)&&P.getWin().scrollTo(0,D.y>x?x:x-D.h+25),u},backspaceDelete:function(t,n){var o,o,i,r,s,l=this,c=l.editor,d=c.getBody(),m=(c.dom,c.selection),p=m.getRng(),g=p.startContainer;if(!n&&p.collapsed&&1==g.nodeType&&p.startOffset==g.childNodes.length)for(s=new e.dom.TreeWalker(g.lastChild,g),o=g.lastChild;o;o=s.prev())if(3==o.nodeType)return p.setStart(o,o.nodeValue.length),p.collapse(!0),m.setRng(p),void 0;if(g&&c.dom.isBlock(g)&&!/^(TD|TH)$/.test(g.nodeName)&&n&&(0==g.childNodes.length||1==g.childNodes.length&&"BR"==g.firstChild.nodeName)){for(o=g;(o=o.previousSibling)&&!c.dom.isBlock(o););if(o){if(g!=d.firstChild){for(i=c.dom.doc.createTreeWalker(o,NodeFilter.SHOW_TEXT,null,u);r=i.nextNode();)o=r;p=c.getDoc().createRange(),p.setStart(o,o.nodeValue?o.nodeValue.length:0),p.setEnd(o,o.nodeValue?o.nodeValue.length:0),m.setRng(p),c.dom.remove(g)}return a.cancel(t)}}}})}(tinymce),function(e){var t=(e.DOM,e.dom.Event),n=e.each,o=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,o){var i=this;o=o||{},i.editor=t,i.controls={},i.onAdd=new e.util.Dispatcher(i),i.onPostRender=new e.util.Dispatcher(i),i.prefix=o.prefix||t.id+"_",i._cls={},i.onPostRender.add(function(){n(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,o=this,i=o.editor;switch(n(i.plugins,function(n){return n.createControl&&(t=n.createControl(e,o))?!1:void 0}),e){case"|":case"separator":return o.createSeparator()}return!t&&i.buttons&&(t=i.buttons[e])?o.createButton(e,t):o.add(t)},createDropMenu:function(t,n,i){var a,r,s,l,c=this,d=c.editor;return n=o({"class":"mceDropDown",constrain:d.settings.constrain_menus},n),n["class"]=n["class"]+" "+d.getParam("skin")+"Skin",(s=d.getParam("skin_variant"))&&(n["class"]+=" "+d.getParam("skin")+"Skin"+s.substring(0,1).toUpperCase()+s.substring(1)),t=c.prefix+t,l=i||c._cls.dropmenu||e.ui.DropMenu,a=c.controls[t]=new l(t,n),a.onAddItem.add(function(e,t){var n=t.settings;n.title=d.getLang(n.title,n.title),n.onclick||(n.onclick=function(){n.cmd&&d.execCommand(n.cmd,n.ui||!1,n.value)})}),d.onRemove.add(function(){a.destroy()}),e.isIE&&(a.onShowMenu.add(function(){d.focus(),r=d.selection.getBookmark(1)}),a.onHideMenu.add(function(){r&&(d.selection.moveToBookmark(r),r=0)})),c.add(a)},createListBox:function(n,i,a){var r,s,l=this,c=l.editor;return l.get(n)?null:(i.title=c.translate(i.title),i.scope=i.scope||c,i.onselect||(i.onselect=function(e){c.execCommand(i.cmd,i.ui||!1,e||i.value)}),i=o({title:i.title,"class":"mce_"+n,scope:i.scope,control_manager:l},i),n=l.prefix+n,c.settings.use_native_selects?r=new e.ui.NativeListBox(n,i):(s=a||l._cls.listbox||e.ui.ListBox,r=new s(n,i)),l.controls[n]=r,e.isWebKit&&r.onPostRender.add(function(e,n){t.add(n,"mousedown",function(){c.bookmark=c.selection.getBookmark(1)}),t.add(n,"focus",function(){c.selection.moveToBookmark(c.bookmark),c.bookmark=null})}),r.hideMenu&&c.onMouseDown.add(r.hideMenu,r),l.add(r))},createButton:function(t,n,i){var a,r,s=this,l=s.editor;return s.get(t)?null:(n.title=l.translate(n.title),n.label=l.translate(n.label),n.scope=n.scope||l,n.onclick||n.menu_button||(n.onclick=function(){l.execCommand(n.cmd,n.ui||!1,n.value)}),n=o({title:n.title,"class":"mce_"+t,unavailable_prefix:l.getLang("unavailable",""),scope:n.scope,control_manager:s},n),t=s.prefix+t,n.menu_button?(r=i||s._cls.menubutton||e.ui.MenuButton,a=new r(t,n),l.onMouseDown.add(a.hideMenu,a)):(r=s._cls.button||e.ui.Button,a=new r(t,n)),s.add(a))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,i){var a,r,s=this,l=s.editor;return s.get(t)?null:(n.title=l.translate(n.title),n.scope=n.scope||l,n.onclick||(n.onclick=function(e){l.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){l.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:s},n),t=s.prefix+t,r=i||s._cls.splitbutton||e.ui.SplitButton,a=s.add(new r(t,n)),l.onMouseDown.add(a.hideMenu,a),a)},createColorSplitButton:function(t,n,i){var a,r,s,l=this,c=l.editor;return l.get(t)?null:(n.title=c.translate(n.title),n.scope=n.scope||c,n.onclick||(n.onclick=function(t){e.isIE&&(s=c.selection.getBookmark(1)),c.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,"class":"mce_"+t,menu_class:c.getParam("skin")+"Skin",scope:n.scope,more_colors_title:c.getLang("more_colors")},n),t=l.prefix+t,r=i||l._cls.colorsplitbutton||e.ui.ColorSplitButton,a=new r(t,n),c.onMouseDown.add(a.hideMenu,a),c.onRemove.add(function(){a.destroy()}),e.isIE&&(a.onShowMenu.add(function(){c.focus(),s=c.selection.getBookmark(1)}),a.onHideMenu.add(function(){s&&(c.selection.moveToBookmark(s),s=0)})),l.add(a))},createToolbar:function(t,n,o){var i,a,r=this;return t=r.prefix+t,a=o||r._cls.toolbar||e.ui.Toolbar,i=new a(t,n),r.get(t)?null:r.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){n(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,o=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,a){var r,s,l,c,d=this,u="",m="modal"==d.editor.settings.dialog_type,p=e.DOM.getViewPort();t=t||{},a=a||{},s=i?p.w:screen.width,l=i?p.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(s/2)-t.width/2,t.top=t.top||parseInt(l/2)-t.height/2,a.inline=!1,a.mce_width=t.width,a.mce_height=t.height,a.mce_auto_focus=t.auto_focus,m&&o&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(u+=o&&m?(u?";":"")+n+":"+t:(u?",":"")+n+"="+t)}),d.features=t,d.params=a,d.onOpen.dispatch(d,t,a),c=t.url||t.file,c=e._addVer(c);try{o&&m?(r=1,window.showModalDialog(c,window,u)):r=window.open(c,t.name,u)}catch(g){}r||alert(d.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,o,i,a,r){var s=e.resolve(t);return new s(n,o,i,a,r)},confirm:function(e,t,n,o){o=o||window,t.call(n||this,o.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,o){var i=this;o=o||window,o.alert(i._decode(i.editor.getLang(e,e))),t&&t.call(n||i)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){function t(){function t(t,n,o,i){"string"==typeof n&&(n=[n]),e.each(n,function(e){t[e.toLowerCase()]={func:o,scope:i}})}var n={},o={},i={};e.extend(this,{add:function(e,o,i){t(n,e,o,i)},addQueryStateHandler:function(e,n,i){t(o,e,n,i)},addQueryValueHandler:function(e,n,o){t(i,e,n,o)},execCommand:function(e,t,o,i,a){return(t=n[t.toLowerCase()])&&t.func.call(e||t.scope,o,i,a)!==!1?!0:void 0},queryCommandValue:function(){return(cmd=i[cmd.toLowerCase()])?cmd.func.call(scope||cmd.scope,ui,value,args):void 0},queryCommandState:function(){return(cmd=o[cmd.toLowerCase()])?cmd.func.call(scope||cmd.scope,ui,value,args):void 0}})}e.GlobalCommands=new t}(tinymce),function(e){e.Formatter=function(t){function n(e,t){return I.getParents(e,t,I.getRoot())}function o(e){return 1===e.nodeType&&("mceinline"===e.face||"mceinline"===e.style.fontFamily)}function i(e){return e?A[e]:A}function a(e,t){e&&("string"!=typeof e?T(e,function(e,t){a(t,e)}):(t=t.length?t:[t],T(t,function(e){e.deep===P&&(e.deep=!e.selector),e.split===P&&(e.split=!e.selector||e.inline),e.remove===P&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),A[e]=t))}function r(n,a,r){function s(e){var t,n,o=e.startContainer,i=e.startOffset;if((1==o.nodeType||""===o.nodeValue)&&(o=1==o.nodeType?o.childNodes[i]:o))for(t=new N(o,o.parentNode),n=t.current();n;n=t.next())if(3==n.nodeType&&!_(n)){e.setStart(n,0);break}return e}function l(e,t){t=t||v,e&&(T(t.styles,function(t,n){I.setStyle(e,n,f(t,a))}),T(t.attributes,function(t,n){I.setAttrib(e,n,f(t,a))}),T(t.classes,function(t){t=f(t,a),I.hasClass(e,t)||I.addClass(e,t)}))}function d(t){var i,r,s=[];i=v.inline||v.block,r=I.create(i),l(r),L.walk(t,function(t){function d(t){var m,p=t.nodeName.toLowerCase(),f=t.parentNode.nodeName.toLowerCase();return g(p,"br")?(u=0,v.block&&I.remove(t),P):v.wrapper&&c(t,n,a)?(u=0,P):v.block&&!v.wrapper&&E(p)?(t=I.rename(t,i),l(t),s.push(t),u=0,P):v.selector&&(T(h,function(e){I.is(t,e.selector)&&!o(t)&&(l(t,e),m=!0)}),!v.inline||m)?(u=0,P):((v.wrap_links!==!1||"a"!=p)&&D(i,p)&&D(f,i)?(u||(u=r.cloneNode(O),t.parentNode.insertBefore(u,t),s.push(u)),u.appendChild(t)):(u=0,T(e.grep(t.childNodes),d),u=0),P)}var u;T(t,d)}),T(s,function(e){function t(e){var t=0;return T(e.childNodes,function(e){_(e)||k(e)||t++}),t}function i(e){var t,n;return T(e.childNodes,function(e){return 1!=e.nodeType||k(e)||o(e)?P:(t=e,O)}),t&&p(t,v)&&(n=t.cloneNode(O),l(n),I.replace(n,e,q),I.remove(t,1)),n||e}var r;if(r=t(e),0===r)return I.remove(e,1),P;if(v.inline||v.wrapper){if(v.exact||1!==r||(e=i(e)),T(h,function(t){T(I.select(t.inline,e),function(e){b(t,a,e,t.exact?e:null)})}),c(e.parentNode,n,a))return I.remove(e,1),e=0,q;v.merge_with_parents&&I.getParent(e.parentNode,function(t){return c(t,n,a)?(I.remove(e,1),e=0,q):P}),e&&(e=x(w(e),e),e=x(e,w(e,q)))}})}var u,m,h=i(n),v=h[0];v&&(r?(m=I.createRng(),m.setStartBefore(r),m.setEndAfter(r),d(y(m,h))):B.isCollapsed()&&v.inline?S("apply",n,a):(u=B.getBookmark(),d(y(B.getRng(q),h)),B.moveToBookmark(u),B.setRng(s(B.getRng(q))),t.nodeChanged()))}function s(o,a,r){function s(e){var t,n,o,i,a=e.startContainer,r=e.startOffset;if(3==a.nodeType&&r>=a.nodeValue.length-1&&(a=a.parentNode,r=F(a)+1),1==a.nodeType)for(o=a.childNodes,a=o[Math.min(r,o.length-1)],t=new N(a),r>o.length-1&&t.next(),n=t.current();n;n=t.next())if(3==n.nodeType&&!_(n))return i=I.create("a",null,z),n.parentNode.insertBefore(i,n),e.setStart(n,0),B.setRng(e),I.remove(i),P}function l(t){var n,o,i;for(n=e.grep(t.childNodes),o=0,i=w.length;i>o&&!b(w[o],a,t,t);o++);if(x.deep)for(o=0,i=n.length;i>o;o++)l(n[o])}function u(e){var t;return T(n(e.parentNode).reverse(),function(e){var n;t||"_start"==e.id||"_end"==e.id||(n=c(e,o,a),n&&n.split!==!1&&(t=e))}),t}function m(e,t,n,o){var i,r,s,l,c,d;if(e){for(d=e.parentNode,i=t.parentNode;i&&i!=d;i=i.parentNode){for(r=i.cloneNode(O),c=0;w.length>c;c++)if(b(w[c],a,r,r)){r=0;break}r&&(s&&r.appendChild(s),l||(l=r),s=r)}!o||x.mixed&&R(e)||(t=I.split(e,t)),s&&(n.parentNode.insertBefore(s,n),l.appendChild(n))}return t}function p(e){return m(u(e),e,e,!0)}function g(e){var t=I.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return k(n)&&(n=n[e?"firstChild":"lastChild"]),I.remove(t,!0),n}function h(e){var t,n;e=y(e,w,q),x.split&&(t=M(e,q),n=M(e),t!=n?(t=v(t,"span",{id:"_start",_mce_type:"bookmark"}),n=v(n,"span",{id:"_end",_mce_type:"bookmark"}),p(t),p(n),t=g(q),n=g()):t=n=p(t),e.startContainer=t.parentNode,e.startOffset=F(t),e.endContainer=n.parentNode,e.endOffset=F(n)+1),L.walk(e,function(e){T(e,function(e){l(e)})})}var f,C,w=i(o),x=w[0];return r?(C=I.createRng(),C.setStartBefore(r),C.setEndAfter(r),h(C),P):(B.isCollapsed()&&x.inline?S("remove",o,a):(f=B.getBookmark(),h(B.getRng(q)),B.moveToBookmark(f),d(o,a,B.getStart())&&s(B.getRng(!0)),t.nodeChanged()),P)}function l(e,t,n){d(e,t,n)?s(e,t,n):r(e,t,n)}function c(e,t,n,o){function a(e,t,i){var a,r,s,l=t[i];if(l)if(l.length===P){for(a in l)if(l.hasOwnProperty(a)){if(r="attributes"===i?I.getAttrib(e,a):h(e,a),o&&!r&&!t.exact)return;if((!o||t.exact)&&!g(r,f(l[a],n)))return}}else for(s=0;l.length>s;s++)if("attributes"===i?I.getAttrib(e,l[s]):h(e,l[s]))return t;return t}var r,s,l,c=i(t);if(c&&e)for(s=0;c.length>s;s++)if(r=c[s],p(e,r)&&a(e,r,"attributes")&&a(e,r,"styles")){if(l=r.classes)for(s=0;l.length>s;s++)if(!I.hasClass(e,l[s]))return;return r}}function d(e,t,n){function o(n){return n=I.getParent(n,function(n){return!!c(n,e,t,!0)}),c(n,e,t)}var i,a;if(n)return o(n);if(B.isCollapsed()){for(a=U.apply.length-1;a>=0;a--)if(U.apply[a].name==e)return!0;for(a=U.remove.length-1;a>=0;a--)if(U.remove[a].name==e)return!1;return o(B.getNode())}return n=B.getNode(),o(n)?q:(i=B.getStart(),i!=n&&o(i)?q:O)}function u(e,t){var n,o,i,a,r=[],s={};if(B.isCollapsed()){for(i=0;e.length>i;i++)for(o=U.remove.length-1;o>=0;o--)if(a=e[i],U.remove[o].name==a){s[a]=!0;break}for(o=U.apply.length-1;o>=0;o--)for(i=0;e.length>i;i++)a=e[i],s[a]||U.apply[o].name!=a||(s[a]=!0,r.push(a))}return n=B.getStart(),I.getParent(n,function(n){var o,i;for(o=0;e.length>o;o++)i=e[o],!s[i]&&c(n,i,t)&&(s[i]=!0,r.push(i))}),r}function m(e){var t,o,a,r,s,l=i(e);if(l)for(t=B.getStart(),o=n(t),r=l.length-1;r>=0;r--){if(s=l[r].selector,!s)return q;for(a=o.length-1;a>=0;a--)if(I.is(o[a],s))return q}return O}function p(e,t){return g(e,t.inline)?q:g(e,t.block)?q:t.selector?I.is(e,t.selector):P}function g(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function h(e,t){var n=I.getStyle(e,t);return("color"==t||"backgroundColor"==t)&&(n=I.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function f(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function _(e){return e&&3===e.nodeType&&/^([\s\r\n]+|)$/.test(e.nodeValue)}function v(e,t,n){var o=I.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function y(e,t){function o(e,n,o,i){var a;for(i=i||I.getRoot();;){if(a=e.parentNode,a==i||!t[0].block_expand&&R(a))return e;for(r=a[n];r&&r!=e;r=r[o]){if(1==r.nodeType&&!k(r))return e;if(3==r.nodeType&&!_(r))return e}e=e.parentNode}return e}function i(e,o){var i,a,r;for(3==e.nodeType&&0==e.nodeValue.length&&e[o]&&(e=e[o]),i=n(e),a=0;i.length>a;a++)for(r=0;t.length>r;r++)if(I.is(i[a],t[r].selector))return i[a];return e}function a(e,o){var i;if(t[0].wrapper||(i=I.getParent(e,t[0].block)),i||(i=I.getParent(3==e.nodeType?e.parentNode:e,R)),i&&t[0].wrapper&&(i=n(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[o]&&!R(i[o])&&(i=i[o],!g(i,"br")););return i||e}var r,s,l=e.startContainer,c=e.startOffset,d=e.endContainer,u=e.endOffset;return 1==l.nodeType&&l.hasChildNodes()&&(s=l.childNodes.length-1,l=l.childNodes[c>s?s:c],3==l.nodeType&&(c=0)),1==d.nodeType&&d.hasChildNodes()&&(s=d.childNodes.length-1,d=d.childNodes[u>s?s:u-1],3==d.nodeType&&(u=d.nodeValue.length)),k(l.parentNode)&&(l=l.parentNode),k(l)&&(l=l.nextSibling||l),k(d.parentNode)&&(d=d.parentNode),k(d)&&(d=d.previousSibling||d),(t[0].inline||t[0].block_expand)&&(l=o(l,"firstChild","nextSibling"),d=o(d,"lastChild","previousSibling")),t[0].selector&&t[0].expand!==O&&!t[0].inline&&(l=i(l,"previousSibling"),d=i(d,"nextSibling")),(t[0].block||t[0].selector)&&(l=a(l,"previousSibling"),d=a(d,"nextSibling"),t[0].block&&(R(l)||(l=o(l,"firstChild","nextSibling")),R(d)||(d=o(d,"lastChild","previousSibling")))),1==l.nodeType&&(c=F(l),l=l.parentNode),1==d.nodeType&&(u=F(d)+1,d=d.parentNode),{startContainer:l,startOffset:c,endContainer:d,endOffset:u}}function b(e,t,n,o){var i,a,r;if(!p(n,e))return O;if("all"!=e.remove)for(T(e.styles,function(e,i){e=f(e,t),"number"==typeof i&&(i=e,o=0),(!o||g(h(o,i),e))&&I.setStyle(n,i,""),r=1}),r&&""==I.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("_mce_style")),T(e.attributes,function(e,i){var a;if(e=f(e,t),"number"==typeof i&&(i=e,o=0),!o||g(I.getAttrib(o,i),e)){if("class"==i&&(e=I.getAttrib(n,i),e&&(a="",T(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(a+=(a?" ":"")+e)}),a)))return I.setAttrib(n,i,a),P;"class"==i&&n.removeAttribute("className"),V.test(i)&&n.removeAttribute("_mce_"+i),n.removeAttribute(i)}}),T(e.classes,function(e){e=f(e,t),(!o||I.hasClass(o,e))&&I.removeClass(n,e)}),a=I.getAttribs(n),i=0;a.length>i;i++)if(0!==a[i].nodeName.indexOf("_"))return O;return"none"!=e.remove?(C(n,e),q):P}function C(t,n){function o(e,t,n){return e=w(e,t,n),!e||"BR"==e.nodeName||R(e)}var i,a=t.parentNode;n.block&&(H?a==I.getRoot()&&(n.list_block&&g(t,n.list_block)||T(e.grep(t.childNodes),function(e){D(H,e.nodeName.toLowerCase())?i?i.appendChild(e):i=v(e,H):i=0})):R(t)&&!R(a)&&(o(t,O)||o(t.firstChild,q,1)||t.insertBefore(I.create("br"),t.firstChild),o(t,q)||o(t.lastChild,O,1)||t.appendChild(I.create("br")))),n.selector&&n.inline&&!g(n.inline,t)||I.remove(t,1)}function w(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!_(e))return e}function k(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("_mce_type")}function x(t,n){function o(e,t){function n(e){var t={};return T(I.getAttribs(e),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&(t[o]=I.getAttrib(e,o))}),t}function o(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if(n=t[o],n===P)return O;if(e[o]!=n)return O;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return O;return q}return e.nodeName!=t.nodeName?O:o(n(e),n(t))?o(I.parseStyle(I.getAttrib(e,"style")),I.parseStyle(I.getAttrib(t,"style")))?q:O:O}function i(e,t){for(a=e;a;a=a[t]){if(3==a.nodeType&&!_(a))return e;if(1==a.nodeType&&!k(a))return a}return e}var a,r;if(t&&n&&(t=i(t,"previousSibling"),n=i(n,"nextSibling"),o(t,n))){for(a=t.nextSibling;a&&a!=n;)r=a,a=a.nextSibling,t.appendChild(r);return I.remove(n),T(e.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n}function E(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function M(e,t){var n,o,i;return n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],1==n.nodeType&&(i=n.childNodes.length-1,!t&&o&&o--,n=n.childNodes[o>i?i:o]),n}function S(n,i,a){function l(){return U.apply.length||U.remove.length}function c(){U.apply=[],U.remove=[]}function d(e){T(U.apply.reverse(),function(t){r(t.name,t.vars,e)}),T(U.remove.reverse(),function(t){s(t.name,t.vars,e)
}),I.remove(e,1),c()}var u,m=U[n],p=U["apply"==n?"remove":"apply"];for(u=m.length-1;u>=0;u--)if(m[u].name==i)return;for(m.push({name:i,vars:a}),u=p.length-1;u>=0;u--)p[u].name==i&&p.splice(u,1);l()&&(t.getDoc().execCommand("FontName",!1,"mceinline"),U.lastRng=B.getRng(),T(I.select("font,span"),function(e){var n;o(e)&&(n=B.getBookmark(),d(e),B.moveToBookmark(n),t.nodeChanged())}),!U.isListening&&l()&&(U.isListening=!0,T("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(n){t[n].addToTop(function(t,n){l()&&!e.dom.RangeUtils.compareRanges(U.lastRng,B.getRng())&&(T(I.select("font,span"),function(e){var n,i;o(e)&&(n=e.firstChild,n?(d(e),i=I.createRng(),i.setStart(n,n.nodeValue.length),i.setEnd(n,n.nodeValue.length),B.setRng(i),t.nodeChanged()):I.remove(e))}),("keyup"==n.type||"mouseup"==n.type)&&c())})})))}var P,A={},T=e.each,I=t.dom,B=t.selection,N=e.dom.TreeWalker,L=new e.dom.RangeUtils(I),D=t.schema.isValid,R=I.isBlock,H=t.settings.forced_root_block,F=I.nodeIndex,z="﻿",V=/^(src|href|style)$/,O=!1,q=!0,U={apply:[],remove:[]};e.extend(this,{get:i,register:a,apply:r,remove:s,toggle:l,match:d,matchAll:u,matchNode:c,canApply:m})}}(tinymce),tinymce.onAddEditor.add(function(e,t){function n(t,n){e.each(n,function(e,n){e&&r.setStyle(t,n,e)}),r.rename(t,"span")}function o(n,o){r=n.dom,s.convert_fonts_to_spans&&e.each(r.select("font,u,strike",o.node),function(e){i[e.nodeName.toLowerCase()](t.dom,e)})}var i,a,r,s=t.settings;s.inline_styles&&(a=e.explode(s.font_size_style_values),i={font:function(e,t){n(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:a[parseInt(t.size)-1]})},u:function(e,t){n(t,{textDecoration:"underline"})},strike:function(e,t){n(t,{textDecoration:"line-through"})}},t.onPreProcess.add(o),t.onInit.add(function(){t.selection.onSetContent.add(o)}))});