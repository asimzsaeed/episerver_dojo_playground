//>>built
define("epi/dnd/Target",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/topic","dojo/json","dijit/Destroyable"],function(_1,_2,_3,_4,_5,_6,_7){return _2(_7,{constructor:function(){this._dragStartSubscriptions=[];this._dragEndSubscriptions=[];},addDroppableZone:function(_8,_9){this._dragStartSubscriptions.push(_5.subscribe("/EPi/DnD/DragStart",_3.hitch(this,function(_a){_8._droppable=(_9===_a.type||_9==="EPiServer.FileManagementElement");this.onSourceDragStart(_8._droppable);})));this._dragEndSubscriptions.push(_5.subscribe("/EPi/DnD/DragEnd",_3.hitch(this,function(_b){if(_9===_b.type||_9==="EPiServer.FileManagementElemen"){_8._droppable=false;}this.onSourceDragEnd(_9===_b.type);})));this.own(_4.connect(_8,"ondragenter",_3.hitch(this,function(e){this._onDragEnter(e,_8);})));this.own(_4.connect(_8,"ondragover",_3.hitch(this,function(e){this._onDragOver(e,_8);})));this.own(_4.connect(_8,"ondragleave",_3.hitch(this,function(e){this._onDragLeave(e,_8);})));this.own(_4.connect(_8,"ondrop",_3.hitch(this,function(e){this._onDrop(e,_8,_9);})));this.own(_4.connect(_8,"ondragend",_3.hitch(this,this._onDragEnd)));},_onDragEnter:function(e,_c){if(_c._droppable){if(e.preventDefault){e.preventDefault();}this.onDragEnter(e,_c);return false;}},_onDragLeave:function(e,_d){this.onDragLeave(e,_d);},_onDragOver:function(e,_e){if(_e._droppable){if(e.preventDefault){e.preventDefault();}e.dataTransfer.dropEffect="link";this.onDragOver(e,_e);return false;}},_onDrop:function(e,_f,_10){var _11=null;try{_11=_6.parse(e.dataTransfer.getData("Text"));}catch(ex){return false;}if(_11.type===_10){this.onDrop(e,_f,_11.data);}if(e.preventDefault){e.preventDefault();}return false;},_onDragEnd:function(e){this.onDragEnd(e);},onDragEnter:function(e,_12){},onDragOver:function(e,_13){},onDragLeave:function(e,_14){},onDrop:function(e,_15,_16){},onSourceDragStart:function(_17){},onSourceDragEnd:function(_18){},onDragEnd:function(e){},destroy:function(){_1.forEach(this._dragStartSubscriptions,function(_19){_5.unsubscribe(_19);});delete this._dragStartSubscriptions;_1.forEach(this._dragEndSubscriptions,function(_1a){_5.unsubscribe(_1a);});delete this._dragEndSubscriptions;}});});