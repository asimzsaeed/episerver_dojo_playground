//>>built
define("epi/locator",["dojo/Evented","dojo/has","dojo/string"],function(_1,_2,_3){var _4=/.+\[\]$/,_5={},_6=new _1();return {add:function(_7,_8){if(typeof _7!=="string"||_7===""){throw new Error("The argument 'identifier' must be a non-empty string.");}var _9=_4.test(_7);if(!_9&&_5[_7]){throw new Error(_3.substitute("A service with the identifier '${0}' has already been registered.",[_7]));}_5[_7]=_9?(_5[_7]||[]).concat(_8):_8;_6.emit(_7,"added");return {remove:this.remove.bind(this,_7,_8)};},get:function(_a){var _b=_5[_a];if(_b===undefined){if(_2("epi-ignore-undefined-dependencies")){return;}throw new Error(_3.substitute("No service has been registered for the identifier '${0}'.",[_a]));}var _c=function(_d){return (typeof _d==="function")?new _d():_d;};if(_4.test(_a)){return _b.map(_c);}return _c(_b);},on:_6.on.bind(_6),remove:function(_e,_f){var _10=_5[_e];if(_10===undefined){return;}if(_4.test(_e)){var _11=_10.indexOf(_f);if(_11>-1){_10.splice(_11,1);}}else{delete _5[_e];}_6.emit(_e,"removed");}};});