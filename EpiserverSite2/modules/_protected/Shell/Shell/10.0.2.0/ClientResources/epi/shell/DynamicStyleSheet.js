//>>built
define("epi/shell/DynamicStyleSheet",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_1,_2,_3){return _2(null,{doc:null,_styleSheet:null,_ruleIndexes:null,_addedRules:null,constructor:function(_4){if(!_4||!_4["doc"]){throw new Error("No doc parameter specified");}this._doc=_4["doc"];this._addedRules=[];this._ruleIndexes=[];var _5=_4["rules"];if(_5&&_5.length>0){this.addRules(_5);}},destroy:function(){delete this._styleSheet;delete this._doc;},addRules:function(_6){var _7=[];_1.forEach(_6,function(_8){_7.push(this.addRule(_8.selector,_8.css));},this);return _7;},addRule:function(_9,_a){var _b,_c=this._getStyleSheet();function _d(_e){var _f=_b._ruleIndexes[_e],_10=_b._ruleIndexes.length;if(_f===undefined){return;}_c.deleteRule?_c.deleteRule(_f):_c.removeRule(_f);_b._ruleIndexes[_e]=undefined;for(var i=_e;i<_10;i++){if(_b._ruleIndexes[i]>_f){_b._ruleIndexes[i]--;}}_c=null;};var _11=this._ruleIndexes.length;if(_c){this._ruleIndexes[_11]=(_c.cssRules||_c.rules).length;_c.addRule?_c.addRule(_9,_a):_c.insertRule(_9+"{"+_a+"}",this._ruleIndexes[_11]);}return {remove:function(){_d(_11);}};},_getStyleSheet:function(){if(this._styleSheet){return this._styleSheet;}var _12=_3.create("style",{type:"text/css"},this._doc.getElementsByTagName("head")[0]);return this._styleSheet=_12.sheet||_12.styleSheet;}});});