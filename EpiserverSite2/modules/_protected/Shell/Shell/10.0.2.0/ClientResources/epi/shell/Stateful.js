//>>built
define("epi/shell/Stateful",["dojo","epi","dojo/Stateful"],function(_1,_2,_3){return _1.declare(_3,{_prefix:"epi-",postscript:function(){if(arguments.length>0){throw new Error("Stateful should not be instantiated with initial params. Use set method to set values.");}this.inherited(arguments);},get:function(_4){return _1.getObject(this._prefix+_4,false,this);},set:function(_5,_6){if(typeof _5==="object"){for(var x in _5){this.set(x,_5[x]);}return this;}var _7=_1.getObject(this._prefix+_5,false,this);var _8=_6;_1.setObject(this._prefix+_5,_8,this);if(this._watchCallbacks){this._watchCallbacks(_5,_7,_8);this._callbackParentObjects(_5,_7,_8);this._callbackChildObjects(_5,_7,_8);}return this;},watch:function(_9,_a){var _b=this._watchCallbacks;if(!_b){var _c=this;_b=this._watchCallbacks=function(_d,_e,_f,_10){var _11=function(_12){if(_12){_12=_12.slice();for(var i=0,l=_12.length;i<l;i++){try{_12[i].call(_c,_d,_e,_f);}catch(e){console.error(e);}}}};_11(_b["_"+_d]);if(!_10){_11(_b["*"]);}};}if(!_a&&typeof _9==="function"){_a=_9;_9="*";}else{_9="_"+_9;}var _13=_b[_9];if(typeof _13!=="object"){_13=_b[_9]=[];}_13.push(_a);var _14={};_14.unwatch=_14.remove=function(){_13.splice(_1.indexOf(_13,_a),1);};return _14;},_callbackChildObjects:function(_15,_16,_17){var _18;if(_1.isObject(_17)){for(_18 in _17){if(!_1.isFunction(_17[_18])){this._watchCallbacks(_15+"."+_18,_16?_16[_18]:null,_17[_18]);this._callbackChildObjects(_15+"."+_18,_16?_16[_18]:null,_17[_18]);}}}},_callbackParentObjects:function(_19,_1a,_1b){var _1c=_19.split(".");if(_1c.length===1){return;}var key=_1c.pop();_19=_1c.join(".");var _1d=this.get(_19);_1a=this._getUpdatedObject(_1d,key,_1a);_1b=_1d;this._watchCallbacks(_19,_1a,_1b);this._callbackParentObjects(_19,_1a,_1b);},_getUpdatedObject:function(_1e,key,_1f){var _20=_1.clone(_1e);_20[key]=_1f;return _20;}});});