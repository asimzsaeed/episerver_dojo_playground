//>>built
define("epi/shell/TaskQueue",["dojo/_base/lang","dojo/when"],function(_1,_2){return function(_3,_4){if((typeof _3!=="function")){throw new Error("TaskQueue can't be created without providing a task processing callback.");}var _5=(_4&&_4.throttle)||0;var _6=false;var _7=[];var _8=true;function _9(){if(_8&&!_6&&_7.length>0){_6=true;var _a=_7.shift();_2(_3(_a)).always(function(){_6=false;setTimeout(_9,_5);}).otherwise(function(_b){console.error("Something went wrong while running provided function to TaskQueue. "+_b);});}};this.start=function(){_8=true;_9();};this.stop=function(){_8=false;};this.enqueue=function(_c){if(_c){_7.push(_c);_9();}};this.getLength=function(){return _7.length;};};});