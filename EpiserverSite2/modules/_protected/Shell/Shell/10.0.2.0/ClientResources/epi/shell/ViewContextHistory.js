//>>built
define("epi/shell/ViewContextHistory",["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/topic","epi/dependency","epi/shell/ViewSettings"],function(_1,_2,_3,_4,_5,_6){return _1([_3],{profile:null,viewName:null,postscript:function(){this.inherited(arguments);_4.subscribe("/epi/shell/context/changed",_2.hitch(this,"_onContextChanged"));_4.subscribe("/epi/shell/context/requestfailed",_2.hitch(this,"_onContextChangeFailed"));if(!this.profile){this.profile=_5.resolve("epi.shell.Profile");}if(!this.viewName){this.viewName=_6.viewName;}},getLastContextForView:function(){return this.get("profile").get(this._getLastContextProfileKey());},_onContextChanged:function(_7,_8){return this._setLastContextForView(_7);},_onContextChangeFailed:function(_9,_a){this._setLastContextForView(null);},_setLastContextForView:function(_b){return this.get("profile").set(this._getLastContextProfileKey(),_b,{location:"session"});},_getLastContextProfileKey:function(){return "lastContext"+this.get("viewName");}});});