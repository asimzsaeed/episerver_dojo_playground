//>>built
define("epi/shell/command/builder/MenuAssembler",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/Stateful","epi/shell/_StatefulGetterSetterMixin"],function(_1,_2,_3,_4,_5,_6){return _3([_5,_6],{commandSource:null,configuration:null,_commandSourceConnect:null,destroy:function(){_2.disconnect(this._commandSourceConnect);},build:function(){this.set("commandSource",this.commandSource);},_setCommandSourceAttr:function(_7){if(this._commandSourceConnect&&this.commandSource){_2.disconnect(this._commandSourceConnect);this._removeCommands(this.commandSource.getCommands());}this.commandSource=_7;if(this.commandSource){this._addCommands(this.commandSource.getCommands());this._commandSourceConnect=_2.connect(this.commandSource,"onCommandsChanged",this,this._commandsChanged);}},_commandsChanged:function(_8,_9,_a){if(_9){this._removeCommands(_9);}if(_a){this._addCommands(_a);}},_getBuildInfo:function(_b){var _c,_d=_b.category;_1.some(this.configuration,function(_e){if(_e.category==_d){_c=_e;return true;}return false;});return _c;},_addCommands:function(_f){_1.forEach(_f,this._addCommand,this);},_addCommand:function(_10){var _11=this._getBuildInfo(_10);if(_11){_11.builder.create(_10,_11.target);}},_removeCommands:function(_12){_1.forEach(_12,function(_13){var _14=this._getBuildInfo(_13);if(_14){_14.builder.remove(_13,_14.target);}},this);}});});