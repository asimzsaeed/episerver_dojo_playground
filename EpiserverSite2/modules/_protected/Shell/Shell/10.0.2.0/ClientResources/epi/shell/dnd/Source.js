//>>built
define("epi/shell/dnd/Source",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-construct","dojo/dnd/Source","./_DndDataMixin","epi/shell/TypeDescriptorManager"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _2([_6,_7],{alwaysCopy:true,createItemOnDrop:true,singular:true,generateText:false,_dummyDropItemContainer:null,readOnly:null,postscript:function(){this.inherited(arguments);if(!this.createItemOnDrop){this.parent=this._dummyDropItemContainer=_5.create("div");}var _9=this.reject;if(_9){var _a=[];for(var _b in this.accept){_a.push(_b);}this.accept={};_a=_8.removeIntersectingTypes(_a,this.reject);_1.forEach(_a,function(_c){this.accept[_c]=1;},this);for(var i=0;i<_9.length;++i){this.accept[_9[i]]=0;}}},destroy:function(){if(this._dummyDropItemContainer){_5.destroy(this._dummyDropItemContainer);this._dummyDropItemContainer=null;}this.inherited(arguments);},checkAcceptance:function(_d,_e){if(this.readOnly){return false;}var _f=_1.map(_e,function(_10){return _d.getItem(_10.id);});return this._checkAcceptanceForItems(_f,this.accept);},getOrderedItems:function(){return _1.map(this.getAllNodes(),function(_11){return this.getItem(_11.id);},this);},onDndItemRemoved:function(_12,_13,_14,_15,_16){},onDropData:function(_17,_18,_19,_1a){},onDrop:function(_1b,_1c,_1d){var _1e=_1.map(_1c,function(_1f){return this._getDndData(_1b.getItem(_1f.id),this.accept,this===_1b);},this);this.inherited(arguments,[_1b,_1c,this.alwaysCopy||_1d]);if(!this.createItemOnDrop){_5.empty(this._dummyDropItemContainer);}this.onDropData(_1e,_1b,_1c,this.alwaysCopy||_1d);if(!_1d&&this!==_1b&&_1b.onDndItemRemoved){_1b.onDndItemRemoved(_1e,_1b,_1c,_1d,this);}_4.publish("/epi/dnd/dropdata",_1e,_1b,_1c,this.alwaysCopy||_1d);}});});