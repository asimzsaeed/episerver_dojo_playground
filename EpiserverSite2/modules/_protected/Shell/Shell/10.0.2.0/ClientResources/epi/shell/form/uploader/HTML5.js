//>>built
define("epi/shell/form/uploader/HTML5",["dojo/_base/declare","dojo/_base/lang","dojox/form/uploader/plugins/HTML5","epi/shell/request/mutators"],function(_1,_2,_3,_4){var _5=_1([_3],{_headers:null,uploadWithFormData:function(_6){return this._getHeadersThenExecute(this.getInherited(arguments),arguments);},sendAsBinary:function(_7){return this._getHeadersThenExecute(this.getInherited(arguments),arguments);},createXhr:function(){var _8=this.inherited(arguments),_9=this._headers;if(_9){for(var _a in _9){if(_9.hasOwnProperty(_a)){_8.setRequestHeader(_a,_9[_a]);}}}return _8;},_getHeadersThenExecute:function(_b,_c){var _d={options:{headers:{}}};return _4.execute("beforeSend",_d).then(_2.hitch(this,function(_e){this._headers=_e.options.headers;var _f=_b.apply(this,_c);this._headers=null;return _f;}));}});dojox.form.addUploaderPlugin(_5);return _5;});