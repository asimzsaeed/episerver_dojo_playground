//>>built
define("epi/shell/layout/CardContainer",["dojo/_base/declare","dojo/_base/lang","dojo/_base/fx","dojo/aspect","dojo/has","dojo/on","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/Deferred","dojo/when","dijit/_TemplatedMixin","dijit/layout/StackContainer","dgrid/util/has-css3"],function(_1,_2,fx,_3,_4,on,_5,_6,_7,_8,_9,_a,_b,_c){return _1([_b,_a],{doLayout:false,transitionClass:"epi-transition",transitionDirection:"vertical",baseClass:"epi-cardContainer",templateString:"<div><div class='dijitContainer' style='position: relative;' data-dojo-attach-point='containerNode'></div></div>",layout:function(){var _d=this.selectedChildWidget;var _e=this.getChildren(),_f=_e[_e.length-1];if(_d&&_d.resize){if(_d.fitContainer){_d.resize(this._containerContentBox||this._contentBox);}else{_d.resize();}}if(_d!==_f&&!_d.fitContainer){_5.replace(_f.domNode,"dijitVisible","dijitHidden");if(_f&&_f!==_d&&_f.resize){if(_f.fitContainer){_f.resize(this._containerContentBox||this._contentBox);}else{_f.resize();}}}},addChild:function(_10,_11){if(this._started){var _12=this.getChildren(),_13=_12[_12.length-1];if(_11>=_12.length){_5.replace(_13.domNode,"dijitHidden","dijitVisible");}}this.inherited(arguments);},_transition:function(_14,_15){var _16=this.getChildren(),_17=_16[_16.length-1];if(!_15||_15._destroyed){return;}if(_15.fitContainer&&_15!==_17){_5.replace(_17.domNode,"dijitVisible","dijitHidden");}return _9(_14===_17?this._hideTransition(_15,_17):null,_2.hitch(this,function(n){var _18=0;if(_15&&!_15._destroyed&&_15!==_17){_18=_7.getMarginBox(_15.domNode).h;this._hideChild(_15);}if(!_14||_14._destroyed){return;}this._showChild(_14);if(_14.resize){if(_14.fitContainer){_14.resize(this._containerContentBox||this._contentBox);}else{_14.resize(null);}return _9(this._showTransition(_14,_17,_18),function(){if(_14.fitContainer&&_14!==_17){_5.replace(_17.domNode,"dijitHidden","dijitVisible");}});}else{return;}}));},_hideTransition:function(_19,_1a){return this._doTransition(_19,_1a,false);},_showTransition:function(_1b,_1c,_1d){return this._doTransition(_1b,_1c,true,_1d);},_doTransition:function(_1e,_1f,_20,_21){if(_1e!==_1f){var _22=_7.getMarginBox(_1e.domNode),_23=this._getAnimationNode(_1e,_1f);var _24=this.transitionDirection==="vertical"?"top":"left",_25=this.transitionDirection==="vertical"?_22.h:_22.w,_26=_20?-(_25-_21)+"px":"0px",to=_20?"0px":-_25+"px",_27=!_20;return this._animate(_23,_24,_26,to,_27);}},_getAnimationNode:function(_28,_29){return _28.transitionMode==="slideIn"?this.containerNode:((_28.transitionMode==="reveal")?_29.domNode:null);},_animate:function(_2a,_2b,_2c,to,_2d){var dfd=new _8();if(_2a&&_4("css-transitions")&&_2c!==to){_6.set(_2a,_2b,_2c);setTimeout(_2.hitch(this,function(){_5.add(_2a,this.transitionClass);var _2e=on(_2a,_4("transitionend"),_2.hitch(this,function(){_2e.remove();_5.remove(_2a,this.transitionClass);if(_2d){_6.set(_2a,_2b,_2c);}dfd.resolve();}));setTimeout(function(){_6.set(_2a,_2b,to);},1);}),1);}else{dfd.resolve();}return dfd.promise;}});});