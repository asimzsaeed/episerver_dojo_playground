//>>built
define("epi/shell/layout/PositioningUtility",["dojo/_base/declare","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/window"],function(_1,_2,_3,_4,_5,_6){return _1(null,{_margin:10,userSetTransformId:-1,place:function(_7,_8){var _9=this._getNode(_7),_a=this.findPosition(_9,_8);_5(_9,{position:"absolute",top:_a.y+"px",left:_a.x+"px"});},findPosition:function(_b,_c){var _d=_c.blockViewport||_c.frame||this._getFramePosition(_c.snapTo,_b),_e=this._getVisiblePosition(this._getPosition(_c.snapTo),_d),_f=_c.dialogViewport||_6.getBox(),_10=this._getPosition(_b);return this._executeTransformers(_10,_e,_f,_c.transformIndex);},_getVisiblePosition:function(_11,_12){var _13=_2.clone(_11);if(_12.w>0&&_13.x+_13.w>_12.w){_13.w=_12.w-_13.x;}if(_12.h>0&&_13.y+_13.h>_12.h){_13.h=_12.h-_13.y;}_13.x+=_12.x;_13.y+=_12.y;if(_13.y<_12.y){_13.h=_13.h-_12.y+_13.y;_13.y=_12.y;}if(_13.x<_12.x){_13.w=_13.w-_12.x+_13.x;_13.x=_12.x;}return _13;},_getFramePosition:function(_14,_15){var _16=_14.ownerDocument.defaultView.frameElement,_17;function _18(_19,_1a){var doc=_19.ownerDocument,pos=_4.position(_19);if(!_1a){_1a=pos;}else{_1a.x+=pos.x;_1a.y+=pos.y;}if(doc===_15.ownerDocument){return _1a;}else{_19=doc.defaultView.frameElement;return _18(_19,_1a);}};if(!_16){_17=_6.getBox(_14.ownerDocument);_17.x=_17.l;_17.y=_17.t;return _17;}return _18(_16);},_executeTransformers:function(pos,_1b,_1c,_1d){if(_1d===this.userSetTransformId){return this._moveIntoViewport(_2.mixin({id:this.userSetTransformId},pos),_1c);}var _1e=null,_1f=isNaN(_1d)?this._transformers:[this._transformers[_1d]];_1f.some(_2.hitch(this,function(_20){_1e=this._moveIntoViewport(_20.call(this,pos,_1b,_1c),_1c);return _1f.length===1||this._isInside(_1e,_1c)&&this._isOutside(_1e,_1b);}));return _1e;},_getNode:function(_21){if(_21&&(typeof _21==="string"||_21.nodeType)){return _3.byId(_21);}if(_21&&_21.domNode){return _21.domNode;}return null;},_getPosition:function(_22){var pos={x:0,y:0,w:0,h:0},_23;if(typeof _22==="undefined"||_22===null){return pos;}if(typeof _22.x!=="undefined"&&typeof _22.y!=="undefined"){pos=_22;}_23=this._getNode(_22);if(_23){pos=_4.position(_23,false);}return pos;},_moveIntoViewport:function(_24,_25){_24.x=Math.min(_25.w-_24.w,Math.max(0,_24.x));_24.y=Math.min(_25.h-_24.h,Math.max(0,_24.y));return _24;},_isInside:function(_26,_27){return _26.x>0&&_26.y>0&&_26.x+_26.w<_27.w&&_26.y+_26.h<_27.h;},_isOutside:function(_28,_29){return _28.x>_29.x+_29.w||_28.y>_29.y+_29.h||_28.x+_28.w<_29.x||_28.y+_28.h<_29.y;},_transformers:[function(_2a,_2b,_2c){return {x:_2b.x+_2b.w+this._margin,y:_2b.y,w:_2a.w,h:_2a.h,id:0};},function(_2d,_2e,_2f){return {x:_2e.x+(_2e.w/2-_2d.w/2),y:_2e.y+_2e.h+this._margin,w:_2d.w,h:_2d.h,id:1};},function(_30,_31,_32){return {x:_31.x-_30.w-this._margin,y:_31.y,w:_30.w,h:_30.h,id:2};},function(_33,_34,_35){return {x:_34.x+(_34.w/2-_33.w/2),y:_34.y-_33.h-this._margin,w:_33.w,h:_33.h,id:3};},function(_36,_37,_38){return {x:_38.w/2-_36.w/2,y:_38.h/2-_36.h/2,w:_36.w,h:_36.h,id:4};}]});});