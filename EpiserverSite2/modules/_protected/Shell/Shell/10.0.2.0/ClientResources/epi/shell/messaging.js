//>>built
define("epi/shell/messaging",["dojo/_base/lang","dojo/topic","epi"],function(_1,_2,_3){var _4=_1.getObject("epiJQuery");var _5=function(){var _6={};return {subscribe:function(_7,_8,_9){return _2.subscribe(_2,_1.hitch(_8,_9));},unsubscribe:function(_a){if(_a){_a.remove();}},publish:function(_b,_c){var _d=arguments[2]||null;for(var i in _6){var _e=_6[i];if(_e.name!==_d){_e.context[_e.publishMethod]({data:_b,__epiPublished:true},_c);}}},registerLibrary:function(_f,_10,_11,_12){_6[_f]={name:_f,publishMethod:_11};_6[_f].context=_10;_6[_f].originalPublish=_10[_11];_10[_11]=function(_13,_14){var _15=Array.prototype.slice.call(arguments);if(!_13.__epiPublished){if(!_12||(_12.apply(this,arguments))){_5.publish(_13,_14,_f);}}else{_15[0]=_13.data;}_6[_f].originalPublish.apply(this,_15);};},unRegisterLibrary:function(_16){var lib=_6[_16];lib.context[lib.publishMethod]=lib.originalPublish;delete _6[_16];}};}();if(_4!==undefined){_5.registerLibrary("jquery",_4.event,"trigger",function(_17,_18,_19){if(typeof _17=="string"&&!_19){return true;}return false;});}else{console.warn("epi/shell/messaging module was loaded but could not register epiJQuery for message sharing");}_5.registerLibrary("dojo",_2,"publish");_1.setObject("epi.shell.messaging",_5);return _5;});