//>>built
define("epi/shell/widget/Tree",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom","dijit/focus","dijit/Tree"],function(_1,_2,_3,_4,_5,_6){return _2(_6,{dndParams:["accept","reject"].concat(_6.prototype.dndParams),postCreate:function(){this.inherited(arguments);this.connect(this.model,"onItemChildrenReload","_onChildrenReload");},_onChildrenReload:function(_7){var _8=this.model.getIdentity(_7),_9=this._itemNodesMap[_8];if(_9){if(_1.some(_9,function(_a){return _a.state==="LOADED";})){this.model.getChildren(_7,_3.hitch(this,function(_b){_1.forEach(_9,function(_c){_c.setChildItems(_b);});_1.forEach(_b,function(_d){this.model.onChange(_d);this._onChildrenReload(_d);},this);}));}else{_1.forEach(_9,function(_e){_e.isExpandable=this.model.mayHaveChildren(_e.item);_e._setExpando(false);},this);}}},_onItemChildrenChange:function(){var _f=null;if(_5.curNode&&_4.isDescendant(_5.curNode,this.domNode)){_f=_5.curNode;}this.inherited(arguments);if(_f){if(_4.isDescendant(_f,this.domNode)){_f.focus();}else{var _10=this._getRootOrFirstNode();if(_10){this.focusNode(_10);}}}}});});