//>>built
define("epi/shell/widget/_AutoResizingIframeMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom-attr","dojo/dom-style","dojo/has","epi/shell/postMessage","epi/shell/widget/_ScrollbarMeasurementMixin"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_7],{onAfterResize:function(_8){},postCreate:function(){var _9=this,_a="/site/resize"+(this.name?"/"+this.name:"");this.inherited(arguments);this.own(_6.subscribe(_a,function(_b){_9.contentChange();}));},checkSize:function(){_6.publish("/site/checksize",{},this.getWindow());},onLoad:function(){if(this.isInspectable()){this.setOverflow("hidden");}this.inherited(arguments);},onUnload:function(){this.inherited(arguments);if(this._contentBox){_4.set(this.iframe,{width:this._contentBox.w+"px",height:this._contentBox.h+"px"});}},contentChange:function(){if(this._contentBox){this.resize(this._contentBox,true);}},resize:function(_c,_d){var _e=this,_f=this._resize(_c,_d);_f.then(function(_10){_e.onAfterResize(_10);});return _f;},_resize:function(_11,_12){var _13=this._contentBox||{h:0,w:0},_14=this,_15=new _2(),_16=new _2(),_17={h:_11.h,w:_11.w};function _18(_19){if(_14.resizeThrottle){clearTimeout(_14.resizeThrottle);_14.resizeThrottle=null;}_14.resizeThrottle=setTimeout(function(){_4.set(_14.iframe,{width:(_19.w)+"px",height:_19.h+"px"});_15.resolve();},50);return _15;};if(_12||(_11&&(_11.h!==_13.h||_11.w!==_13.w))){this._contentBox=_11;if(this.isInspectable()){_17.w-=this.getScrollbarSize().x;}_18(_17).then(function(){var _1a={h:0,w:0};if(_14.isInspectable()){_1a=_14._setToDocumentSize(_17);}_16.resolve(_1a);});}return _16.promise;},_setToDocumentSize:function(_1b){this.setOverflow("visible");var _1c={w:Math.max(this.iframe.contentDocument.body.scrollWidth,_1b.w),h:Math.max(this.iframe.contentDocument.documentElement.scrollHeight,_1b.h)};if(_1c.w>0&&_1c.h>0){_4.set(this.iframe,{width:_1c.w+"px",height:_1c.h+"px"});}this.setOverflow("hidden");_3.set(this.iframe,"data-epi-ipad-ping","pong");return _1c;},setOverflow:function(_1d){var doc=this.getDocument();if(doc&&doc.documentElement&&doc.body){_4.set(doc.documentElement,{overflow:_1d});_4.set(doc.body,{overflow:_1d});}}});});