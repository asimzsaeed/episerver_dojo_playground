//>>built
define("epi/shell/widget/layout/ComponentPaneContainer",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/dom-style","epi/shell/widget/_ScrollbarMeasurementMixin","epi/shell/widget/layout/ComponentContainer"],function(_1,_2,_3,_4,_5,_6,_7){return _2([_7,_6],{_previousChildrenCount:null,layoutComponents:function(){_5.set(this.containerNode,"overflow-y","hidden");var _8=this.getChildren();_1.forEach(_8,function(_9){if(_9.lastOpenHeight&&(_9.lastOpenHeight<_9.minHeight)){_9.set("lastOpenHeight",_9.minHeight);}});if(_8.length===1){var _a=_8[0];if(!_a.open){_a.set("open",true);}_a.resize(this._containerSize);}else{if(_8.length===2){var _b=_1.every(_8,function(_c){return _c.open;});_1.forEach(_8,function(_d){_d.set("resizable",_b);});this._layout2Children(_8[0],_8[1]);}else{var _e=_3.hitch(this,function(_f){var _10=0;this.getChildren().forEach(function(_11){_10+=_11.getSize().h;});if(_f&&(_10>this._containerSize.h)){_f-=this.getScrollbarSize().x;}_1.forEach(this.getChildren(),function(_12){_12.set("resizable",_12.open);if(_12.resize&&_3.isFunction(_12.resize)){if(_f){_12.resize({w:_f});}else{_12.resize();}}});});if(this._previousChildrenCount<3){_e(null);}_e(this._containerSize.w);}}this._previousChildrenCount=_8.length;_5.set(this.containerNode,"overflow-y","auto");},_layout2Children:function(_13,_14){var _15=this._containerSize;var _16={w:_15.w};var _17={w:_15.w};var _18=_13.getSize().h;var _19=_14.getSize().h;var _1a=Math.floor(_15.h/2);if(_13.open&&_14.open&&(!_13.lastOpenHeight||!_14.lastOpenHeight)){_16.h=_1a;_17.h=_15.h-_1a;}else{if(!_13.open&&!_14.open){_16.h=_18;_17.h=_19;_13.set("lastOpenHeight",_1a);_14.set("lastOpenHeight",_15.h-_1a);}else{if(_18<_19){_16.h=_18;_17.h=_15.h-_18;}else{_16.h=_15.h-_19;_17.h=_19;}}}_13.resize(_16);_14.resize(_17);},_layoutChildren:function(_1b,_1c,_1d){var _1e=this.getChildren(),_1f=_4.getContentBox(this.containerNode).h;_1b.resize({h:_1c});if(_1e.length===2){_1.forEach(_1e,function(_20){if(_20!==_1b){_20.resize({h:_1f-_1c});}});}if(_1d){_1.forEach(_1e,function(_21){if(_21.getSize().h){_21.set("lastOpenHeight",_21.getSize().h);}});this.layoutComponents();this._persistComponentSettings();}},_onCompontentsChanged:function(){var _22=this.getChildren(),_23=_22.length>1,_24=_22.length>2,_25=_22.length===1;_1.forEach(_22,function(_26,_27){_26.set("showSplitter",_24||_27<_22.length-1);_26.set("toggleable",_23);if(_25&&_26.setDefaultStates){_26.setDefaultStates();}},this);},_componentToggle:function(){var _28=this.getChildren();if(_28.length===2){var _29=_1.every(_28,function(_2a){return _2a.open;});_1.forEach(_28,function(_2b){_2b.set("resizable",_29);});}this.inherited(arguments);},_getMaxSizeChild:function(){var _2c=this.getChildren(),_2d=_2c[0],_2e=_2c[1],_2f=_4.getMarginBox(_2d.domNode).h;if(_2c.length===2){_2f+=_4.getMarginBox(_2e.domNode).h-_2e.minHeight;return _2f;}return _2d.maxHeight||Infinity;}});});