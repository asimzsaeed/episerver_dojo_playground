//>>built
require({cache:{"url:epi/shell/widget/layout/templates/ComponentTabContainer.htm":"<div class=\"dijitTabContainer dojoxDragHandle epi-componentGroup epi-compactTabs\">\r\n    <div class=\"dijitTabListWrapper\" data-dojo-attach-point=\"tablistNode\"></div>\r\n    <div data-dojo-attach-point=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\r\n    <div class=\"dijitTabPaneWrapper ${baseClass}-container\" data-dojo-attach-point=\"containerNode\"></div>\r\n    <div data-dojo-attach-point=\"_splitterNode\"></div>\r\n</div>\r\n"}});define("epi/shell/widget/layout/ComponentTabContainer",["dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/dom-style","dojo/dom-construct","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/topic","dojo/when","dojo/Evented","dojo/text!./templates/ComponentTabContainer.htm","dijit/layout/TabContainer","dijit/layout/utils","epi/dependency","epi/shell/widget/layout/_ComponentTabController","epi/shell/widget/layout/_ComponentResizeMixin","dijit/_WidgetsInTemplateMixin","dijit/form/ToggleButton","epi/shell/widget/ComponentChrome","epi/shell/widget/_FocusableMixin","epi/shell/command/_CommandProviderMixin","epi/shell/widget/command/RemoveGadget"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,_17){return _3([_d,_12,_11,_15,_b,_16],{useMenu:true,doLayout:true,useSlider:false,toggleable:true,templateString:_c,controllerWidget:_10,_removeCommand:null,postMixInProperties:function(){this.inherited(arguments);this.profile=this.profile||_f.resolve("epi.shell.Profile");this._removeCommand=new _17({model:this});},startup:function(){if(this._started){return;}this.inherited(arguments);_a(this.profile.get(this.componentId+"_selectedTab")).then(this._selectStoredTab.bind(this));if(this.maxHeight){_4.set(this.containerNode,"maxHeight",this.maxHeight);}},_selectStoredTab:function(_18){if(!_18){return;}var _19=this.getChildren();var _1a=_19.some(function(_1b){return _1b.id===_18;});if(_1a){this.selectChild(_18,false,true);}},postCreate:function(){this.inherited(arguments);this.add("commands",this._removeCommand);this.tablist.on("toggle",_2.hitch(this,function(_1c){this._started&&this.set("open",_1c);}));},addChild:function(_1d,_1e){var _1f=new _14({title:_1d.get("heading")||""});_1f.addChild(_1d);this.inherited(arguments,[_1f,_1e]);if(this._started&&!_1f._started){_1f.startup();}},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}var sc=this.selectedChildWidget;if(this.doLayout){var _20=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=_20;var _21=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:_20},{domNode:this.containerNode,layoutAlign:"client"}];if(this._splitter){_21.push({domNode:this._splitter.domNode,layoutAlign:"bottom"});}_e.layoutChildren(this.domNode,this._contentBox,_21);this._containerContentBox=_e.marginBox2contentBox(this.containerNode,_21[2]);if(sc&&sc.resize){sc.resize(this._containerContentBox);}}else{if(this.tablist.resize){var s=this.tablist.domNode.style;s.width="0";var _22=_8.getContentBox(this.domNode).w;s.width="";this.tablist.resize({w:_22});}}},resize:function(_23){_23=_2.mixin({},_23);if(!_23.h){if(!this.open){_23.h=this._getClosedHeight();}else{if(this.lastOpenHeight){_23.h=this.lastOpenHeight;}}}this.inherited(arguments,[_23]);},getSize:function(){var _24=_8.getMarginBox(this.domNode);if(!this.open){_24.h=this._getClosedHeight();}return _24;},_getClosedHeight:function(){var _25=_8.getMarginExtents(this.domNode).h,_26=this.tablist?_8.getMarginBox(this.tablist.domNode).h:0,_27=this._splitter?_8.getMarginBox(this._splitter.domNode).h:0;return _26+_27+_25;},selectChild:function(_28,_29,_2a){this.inherited(arguments);if(!_2a){this.profile.set(this.componentId+"_selectedTab",this.selectedChildWidget.id);}this._removeCommand.set("model",this.selectedChildWidget);},_makeController:function(_2b){var _2c=this.inherited(arguments);_2c.set("title",this.get("heading")||"");return _2c;},_setToggleableAttr:function(_2d){this._set("toggleable",_2d);this.tablist&&this.tablist.set("toggleable",this.toggleable);},_setOpenAttr:function(_2e){this.inherited(arguments);this.tablist.setOpen(_2e);_4.set(this.containerNode,"display",_2e?"":"none");if(this._started){if(!_2e){this.lastOpenHeight=_8.getMarginBox(this.domNode).h;}this.emit("toggle",this.open);}}});});