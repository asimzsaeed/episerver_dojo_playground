//>>built
define("epi/shell/widget/overlay/Item",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/mouse","dojo/on","dojo/when","dijit/_CssStateMixin","dijit/_TemplatedMixin","./_Base","epi/shell/dnd/Target"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b){return _2([_a,_9,_8],{baseClass:"epi-overlay-item",name:"",_setDisplayNameAttr:function(_c){if(this.informationNode){this.informationNode.textContent=_c;}},templateString:"<div data-dojo-attach-point=\"item\">                            <div data-dojo-attach-point=\"containerNode\" class=\"epi-overlay-item-container\">                                <span data-dojo-attach-point=\"informationNode\" class=\"epi-overlay-item-info\"></span>                                <div class=\"epi-overlay-bracket\"></div>                            </div>                        </div>",allowedDndTypes:null,error:false,childItems:null,parent:null,onClick:function(_d,e){},onDrop:function(_e,_f){},onMouseEnter:function(e){},onMouseLeave:function(e){},constructor:function(){this.childItems=[];},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"click",_3.hitch(this,function(e){this.onClick(this,e);})),on(this.domNode,_6.enter,_3.hitch(this,this.onMouseEnter)),on(this.domNode,_6.leave,_3.hitch(this,this.onMouseLeave)));this.transferDndControlTo(this);},destroy:function(){if(this.parent&&this.parent.removeChild){this.parent.removeChild(this);}for(var i=0;i<this.childItems.length;i++){this.childItems[i].destroyRecursive();}this.childItems=null;if(this._dropTarget){this._dropTarget.destroy();this._dropTarget=null;}this.inherited(arguments);},resize:function(_10){this.inherited(arguments);if(this.childItems){_1.forEach(this.childItems,function(_11,i){_11.resize();});}},updatePosition:function(_12){var _13=this.informationNode;if(_13){var _14=_5.get(_13,"minHeight");_4.toggle(_13,"epi-overlay-item-info--inside",_12.y<_14);}return this.inherited(arguments);},transferDndControlTo:function(_15){var _16=_15.allowedDndTypes,_17=_15.restrictedDndTypes,_18=_15.onDropData,_19=_15;if(this._dropDataHandler){this.disconnect(this._dropDataHandler);this._dropDataHandler=null;}if(!this._dropTarget){this._setupDnd(_19,_16,_17,_18);}else{this.own(this._dropDataHandler=this.connect(this._dropTarget,"onDropData",_3.hitch(_15,_18)));var _1a=_16;this._dropTarget.accept={};if(_1a){_1a.forEach(function(_1b){this._dropTarget.accept[_1b]=1;},this);}var _1c=this.reject;if(_1c){for(var i=0;i<_1c.length;++i){this._dropTarget.accept[_1c[i]]=0;}}}},onDropData:function(_1d,_1e,_1f,_20){var _21;if(_1d.length>1){_21=_1d.data;}else{if(_1d.length===1){_21=_1d[0].data;}}_7(_21,_3.hitch(this,function(_22){var _23;if(this.dndSourcePropertyName){_23=_22[this.dndSourcePropertyName];}else{_23=_22;}this.onDrop(this,_23);}));},_setupDnd:function(_24,_25,_26,_27){if(_25){this._dropTarget=new _b(this.domNode,{accept:_25,reject:_26,createItemOnDrop:false});this._dropDataHandler=this.connect(this._dropTarget,"onDropData",_3.hitch(_24,_27));this.own(this._dropTarget,this._dropDataHandler);}},_setReadOnlyAttr:function(_28){this._set("readOnly",_28);if(this._dropTarget){this._dropTarget.readOnly=_28;}},_setErrorAttr:function(_29){this.set("state",_29?"Error":"");this._set("error",_29);}});});