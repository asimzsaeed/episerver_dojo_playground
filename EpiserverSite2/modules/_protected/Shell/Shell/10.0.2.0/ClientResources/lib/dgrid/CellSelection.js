//>>built
define("dgrid/CellSelection",["dojo/_base/declare","dojo/aspect","dojo/on","dojo/has","./Selection","put-selector/put"],function(_1,_2,_3,_4,_5,_6){return _1(_5,{selectionDelegate:".dgrid-cell",_selectionTargetType:"cells",_select:function(_7,_8,_9){var i,id;if(typeof _9==="undefined"){_9=true;}if(typeof _7!="object"||!("element" in _7)){_7=this.cell(_7);}else{if(!_7.row){if(_9&&typeof _9==="object"){for(id in _9){this._select(this.cell(_7.id,id),null,_9[id]);}}else{for(id in this.columns){this._select(this.cell(_7.id,id),null,_9);}}return;}}if(this.allowSelect(_7)){var _a=this.selection,_b=_7.row.id,_c=_a[_b];if(!_7.column){for(i in this.columns){this._select(this.cell(_b,i),null,_9);}return;}var _d=_c&&_c[_7.column.id];if(_9===null){_9=!_d;}var _e=_7.element;_c=_c||{};_c[_7.column.id]=_9;this.selection[_b]=_c;var _f=false;for(i in _c){if(_c[i]===true){_f=true;break;}}if(!_f){delete this.selection[_b];}if(_e){if(_9){_6(_e,".dgrid-selected"+(this.addUiClasses?".ui-state-active":""));}else{_6(_e,"!dgrid-selected!ui-state-active");}}if(_9!=_d&&_e){this._selectionEventQueues[(_9?"":"de")+"select"].push(_7);}if(_8){if(!_8.element){_8=this.cell(_8);}if(!_8||!_8.row){this._lastSelected=_e;console.warn("The selection range has been reset because the "+"beginning of the selection is no longer in the DOM. "+"If you are using OnDemandList, you may wish to increase "+"farOffRemoval to avoid this, but note that keeping more nodes "+"in the DOM may impact performance.");return;}var _10=_8.element;var _11=_7.element;var _12=this._determineSelectionDirection(_11,_10);if(!_12){_8=this.cell(document.getElementById(_8.row.element.id),_10.columnId);_10=_8&&_8.element;_12=this._determineSelectionDirection(_11,_10);}var _13=_7.column.id,_14=_8.column.id,_15,_16=[];for(id in this.columns){if(_15){_16.push(id);}if(id==_13&&(_13=_16)||id==_14&&(_14=_16)){_16.push(id);if(_15||(_13==_16&&id==_14)){break;}_15=true;}}var row=_7.row,_17=row.element;_10=_8.row.element;do{for(i=0;i<_16.length;i++){_7=this.cell(_17,_16[i]);this._select(_7,null,_9);}if(_17==_10){break;}}while((_17=_7.row.element[_12]));}}},_determineSelectionDirection:function(){var _18=this.inherited(arguments);if(_18==="down"){return "nextSibling";}if(_18==="up"){return "previousSibling";}return _18;},isSelected:function(_19,_1a){if(typeof _19==="undefined"||_19===null){return false;}if(!_19.element){_19=this.cell(_19,_1a);}var _1b=_19.row.id;if(_1b in this.selection){return !!this.selection[_1b][_19.column.id];}else{return this.allSelected&&(!_19.row.data||this.allowSelect(_19));}},clearSelection:function(_1c){_1c=false;this.inherited(arguments);}});});