//>>built
define("xstyle/core/base",["xstyle/core/elemental","xstyle/core/expression","xstyle/core/Definition","xstyle/core/utils","put-selector/put","xstyle/core/Rule","xstyle/core/es6"],function(_1,_2,_3,_4,_5,_6,_7){var _8=_5("div");var ua=navigator.userAgent;var _9=ua.indexOf("WebKit")>-1?"-webkit-":ua.indexOf("Firefox")>-1?"-moz-":ua.indexOf("MSIE")>-1?"-ms-":ua.indexOf("Opera")>-1?"-o-":"";var _a;var _b=new _6();var _c=_1.matchesRule;_b.root=true;function _d(_e,_f,_10){function _11(_12){return {selectElement:function(_13){if(_10.newElement){_13=_13.parentNode;}if(_12&&_12.selector){while(!_c(_13,_12)){_13=_13.parentNode;if(!_13){throw new Error("Rule not found");}}}if(_10.inherit){while(!(_e in _13)){_13=_13.parentNode;if(!_13){throw new Error(_e?(_e+" not found"):("Property was never defined"));}}}return _13;},forElement:function(_14){var _15=_14;_14=this.selectElement(_14);if(_10.newElement){_14["_"+_e+"Node"]=_15;}var _16=_10.get?_10.get(_14,_e):_14[_e];if(_16===undefined&&_12){return _39(_e).valueOf().forRule(_12);}return _16;},forRule:_10.inherit&&function(_17){return _11(_17);}};};var _18=new _3(function(){return _11(_f);});_18.define=function(_19,_1a){return _d(_e||_1a,_19,_10);};_18.keepCSSValue=true;_18.put=_10.inherit?function(_1b,_1c){return _39(_e).put(_1b,_1c,_e);}:function(_1d){return {forElement:function(_1e){if(_f&&_f.selector){while(!_c(_1e,_f)){_1e=_1e.parentNode;if(!_1e){throw new Error("Rule not found");}}}if(_10.set){_10.set(_1e,_e,_1d);}else{_1e[_e]=_1d;}_18.invalidate({elements:[_1e]});}};};return _18;};function _1f(_20,_21,_22,_23){return _4.when(_2.evaluate(_20,_22),function(_24){if(_24.forElement){_1.addRenderer(_20,function(_25){_23(_24.forElement(_25),_25);});}else{_23(_24);}});};function _26(yes,no){return {apply:function(_27,_28,_29){_1f(_27,_29,_28[0],function(_2a,_2b){_2a.observe(function(_2c){_2c=_2c?yes:no;var _2d=value.toString().replace(new RegExp(yes+"\\([^)]+\\)","g"),_2c);if(_2b){_2b.style[_29]=_2c;}else{_27.setStyle(_29,_2c);}});});}};};var _2e={};function _2f(_30,_31){var _32=_30.variables;if(_32&&_31 in _32){return _32[_31];}var _33=_30.bases;if(_33){for(var i=0;i<_33.length;i++){var _34=_2f(_33[i],_31);if(_34!==undefined){return _34;}}}};function _35(_36,_37){do{var _38=_2f(_36,_37);if(_38!==undefined){return _38;}_36=_36.parent;}while(_36);};function _39(_3a){var _3b=_2e[_3a];if(!_3b){_3b=_2e[_3a]=new _3(function(){return {forRule:function(_3c){return _35(_3c,_3a);}};});_3b.put=function(_3d,_3e,_3f){return {forRule:function(_40){(_40.variables||(_40.variables={}))[_3f]=_3d;var _41=[];function _42(_43){_41.push(_43);for(var _44 in _43.rules){_42(_43.rules[_44]);}};while(_40){_42(_40);_40=_40.parent;}_3b.invalidate({rules:_41});}};};}return _3b;};_b.definitions={Math:Math,window:window,global:window,module:_2.selfResolving(function(mid,_45){if(mid[0].value){mid=mid[0].value;}if(!_45){require([mid]);}return {then:function(_46){return new _7.Promise(function(_47){require([mid],function(_48){_47(_48);});}).then(_46);}};}),item:_d("item",null,{inherit:true}),pageContent:new _3(),content:_d("content",null,{inherit:true,newElement:function(){return this.element;}}),elementProperty:_d(null,null,{}),elementClass:_d(null,null,{get:function(_49,_4a){return (" "+_49.className+" ").indexOf(" "+_4a+" ")>-1;},set:function(_4b,_4c,_4d){if(this.get(_4b,_4c)!=_4d){if(_4d){_4b.className+=" "+_4c;}else{_4b.className=(" "+_4b.className+" ").replace(" "+_4c+" ","").replace(/^ +| +$/g,"");}}}}),element:{forElement:function(_4e){return _4e;},define:function(_4f){return {forElement:function(_50){while(!_c(_50,_4f)){_50=_50.parentNode;if(!_50){throw new Error("Rule not found");}}return _50;}};}},event:{observe:function(_51){_51(_a);},valueOf:function(){return _a;}},each:{put:function(_52){return {forRule:function(_53){_53.each=_52;}};}},prefix:{put:function(_54,_55,_56){return {forRule:function(_57){if(typeof _8.style[_9+_56]=="string"){_57._setStyleFromValue(_9+_56,_54);return true;}}};}},"var":{define:function(_58,_59){return _39(_59);},selfResolving:true,apply:function(_5a,_5b){return _39(_4.convertCssNameToJs(_5b[0]));}},inline:_26("inline","none"),block:_26("block","none"),visible:_26("visible","hidden"),"extends":{apply:function(_5c,_5d){for(var i=0;i<_5d.length;i++){return _4.extend(_5c,_5d[i],console.error);}}},set:{selfExecuting:true,apply:function(_5e,_5f){return _5f[0].put(_5f[1].valueOf());}},get:{apply:function(_60,_61){return _61[0];},put:function(_62,_63){_2.evaluate(_63,_62).valueOf();}},toggle:{selfExecuting:true,apply:function(_64,_65){return _65[0].put(!_65[0].valueOf());}},on:{put:function(_66,_67,_68){return {forRule:function(_69){_1.on(document,_68.charAt(2).toLowerCase()+_68.slice(3),_69,function(_6a){_a=_6a;try{_4.when(_2.evaluate(_69,_66).valueOf(),function(_6b){if(_6b&&_6b.forRule){_6b=_6b.forRule(_69);}if(_6b&&_6b.forElement){_6b=_6b.forElement(_6a.target);}_a=null;},function(e){console.error("Error in "+_68+" event handler, executing "+_66,e);});}catch(e){console.error("Error in "+_68+" event handler, executing "+_66,e);}});}};}},title:{put:function(_6c){return {forRule:function(_6d){_2.observe(_2.evaluate(_6d,_6c),function(_6e){document.title=_6e;});}};}},"@supports":{selector:function(_6f){function _70(_71){var _72;if(_72=_71.match(/^\s*not(.*)/)){return !_70(_72[1]);}if(_72=_71.match(/\((.*)\)/)){return _70(_72[1]);}if(_72=_71.match(/([^:]*):(.*)/)){var _73=_4.convertCssNameToJs(_72[1]);var _74=_8.style[_73]=_72[2];return _8.style[_73]==_74;}if(_72=_71.match(/\w+\[(.*)=(.*)\]/)){return _5(_72[0])[_72[1]]==_72[2];}if(_72=_71.match(/\w+/)){return _4.isTagSupported(_72);}throw new Error("can't parse @supports string");};if(_70(_6f.selector.slice(10))){_6f.selector="";}else{_6f.disabled=true;}}},"true":true,"false":false,"null":null};_b.elementProperty=_d;return _b;});