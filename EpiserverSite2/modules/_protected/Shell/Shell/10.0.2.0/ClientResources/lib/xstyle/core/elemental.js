//>>built
define("xstyle/core/elemental",["put-selector/put","xstyle/core/utils"],function(_1,_2){var _3=document;var _4=1;var _5=!!_3.addEventListener;var _6={blur:"focusout",focus:"focusin"};on(_3,"change",null,_7);if(navigator.userAgent.match(/MSIE|Trident/)){on(_3,"keydown",null,function(_8){if(_8.keyCode==13){var _9=_8.target;if(document.createEvent){_8=document.createEvent("Events");_8.initEvent("change",true,true);_9.dispatchEvent(_8);}else{document.onchange({target:_9});}}});}function _7(_a){var _b=_a.target;for(var i=0,l=_c.length;i<l;i++){var _d=_c[i];if((" "+_b.className+" ").indexOf(_d.rule.selector.slice(1))>-1){var _e=_d.definition;var _f=_e.valueOf();if(_f&&_f.forRule){_f=_f.forRule(_d.rule);}if(_f&&_f.forElement){_f=_f.forElement(_b);}var _10=typeof _f;var _11=_b.type==="checkbox"?_b.checked:_b.value;if(_10==="number"&&isFinite(_11)){_11=+_11;}var _12=_d.definition.put(_11);if(_12&&_12.forRule){_12=_12.forRule(_d.rule);}if(_12&&_12.forElement){_12.forElement(_b);}}}};function on(_13,_14,_15,_16){_5?_13.addEventListener(_14,_17,!!_6[_14]):_18(_13,_6[_14]||_14,_17);function _17(_19){if(!_15){return _16(_19);}var _1a=_19.target;do{if(_1b(_1a,_15)){return _16(_19);}}while((_1a=_1a.parentNode)&&_1a.nodeType===1);};};function _18(_1c,_1d,_1e){_1d="on"+_1d;var _1f=_1c[_1d];_1c[_1d]=function(_20){_20=_20||window.event;_20.target=_20.target||_20.srcElement;if(_1f){_1f(_20);}_1e(_20);};};var _21=_3.createElement("div");var _22={"dom-qsa2.1":!!_21.querySelectorAll};function has(_23){return _22[_23];};var _24=_21.matches||_21.matchesSelector||_21.webkitMatchesSelector||_21.mozMatchesSelector||_21.msMatchesSelector||_21.oMatchesSelector;var _25=[];var _c=[];var _26=[];var _27;function _28(_29){if(/e/.test(_3.readyState||"")){_29();}else{_3.addEventListener("DOMContentLoaded",_29);}};_28(function(){if(!_27){_27=true;if(has("dom-qsa2.1")){for(var i=0,l=_25.length;i<l;i++){_2a(_25[i]);}_2b();}else{var all=_3.all;for(var i=0,l=all.length;i<l;i++){_2c(all[i]);}}}});function _2a(_2d){var _2e=_3.querySelectorAll(_2d.selector);var _2f=_2d.name;for(var i=0,l=_2e.length;i<l;i++){var _30=_2e[i];var _31=_30.elementalStyle;var _32=_30.elementalSpecificities;if(!_31){_31=_30.elementalStyle={};_32=_30.elementalSpecificities={};}if(true||_32[_2f]<=_2d.specificity){var _33=_30.renderings;if(!_33){_33=_30.renderings=[];_26.push(_30);}_33.push({name:_2f,rendered:_31[_2f]==_2d.propertyValue,renderer:_2d});_31[_2f]=_2d.propertyValue;}}};var _34;function _2b(){while(_26.length){var _35=_26.shift();var _36=_35.renderings,_37=_35.elementalStyle;while(_36.length){var _38=_36.shift();var _39=_38.renderer;var _3a=_39.rendered;_34=_37[_38.name]==_39.propertyValue;if(!_3a&&_34){try{_39.render(_35);}catch(e){console.error(e,e.stack);_1(_35,"div.error",e.toString());}}if(_3a&&!_34&&_39.unrender){_39.unrender(_35);}}_35.renderings=undefined;}};function _2c(_3b,_3c){for(var i=0,l=_25.length;i<l;i++){var _3d=_25[i];if((!_3c||(_3c==_3d.selector))&&_1b(_3b,_3d.rule)){_3d.render(_3b);}}};var _1b=_24?function(_3e,_3f){return _24.call(_3e,_3f.selector);}:function(_40,_41){if(!_41.ieId){_41.setStyle(_41.ieId=("x-ie-"+_4++),"true");}return !!_40.currentStyle[_41.ieId];};function _42(_43,_44){_c.push({rule:_43,definition:_44});};function _45(_46,_47){var _48={selector:_46.selector,rule:_46,render:_47};_25.push(_48);if(_27){_2a(_48);}_2b();return {remove:function(){_25.splice(_25.indexOf(_48),1);}};};return {ready:_28,on:on,matchesRule:_1b,addRenderer:_45,addInputConnector:_42,update:_2c,clearRenderers:function(){_25=[];},observeForElement:function(_49,_4a,_4b){return _2.when(_49,function(_4c){function _4d(_4e){if(_4e.observe){_4e.observe(_4b);}else{_4b(_4e);}};if(_4c.forElement){_45(_4a,function(_4f){_4d(_4c.forElement(_4f));});}else{_4d(_4c);}});}};});