//>>built
define("xstyle/main",["require","xstyle/core/parser","xstyle/core/base","xstyle/core/elemental","xstyle/core/generate"],function(_1,_2,_3,_4,_5){"use strict";function _6(_7){var _8=document.getElementsByTagName(_7);for(var i=0;i<_8.length;i++){_9(_8[i]);}};function _a(){_6("link");_6("style");};_4.ready(_a);function _9(_b,_c,_d){var _e=_b.sheet||_b.styleSheet;if(!_e||(_e.processed&&!_d)){return;}_e.processed=true;var _f=_e.needsParsing,_10=_e.rules||_e.cssRules;function _11(){_1(["xstyle/core/load-imports"],function(_12){_12(_b,function(){_9(_b,_c,true);});});};function _13(_14){var _15=_14.cssRules;for(var i=0;i<_15.length;i++){var _16=_15[i];if(_16.selectorText&&_16.selectorText.substring(0,2)=="x-"){_f=true;if(/^'/.test(_16.style.content)){_17(eval(_16.style.content),_14,_c);return true;}}}};if((_e.href||(_e.imports&&_e.imports.length))&&!_d){return _11();}if(!_f){for(var i=0;i<_10.length;i++){var _18=_10[i];if(_18.href&&!_d){if(!_13(_18.styleSheet)){return _11();}return;}}}_17(_e.localSource||(_e.ownerNode||_e.owningElement).innerHTML,_e,_c);};_2.getStyleSheet=function(_19,_1a){return _19.styleSheet||_19;};function _17(_1b,_1c,_1d){if(!_1c.addRule){_1c.addRule=function(_1e,_1f,_20){return this.insertRule(_1e+"{"+_1f+"}",_20>=0?_20:this.cssRules.length);};}if(!_1c.deleteRule){_1c.deleteRule=_1c.removeRule;}var _21=1;var _22=(_1c.href||location.href).replace(/[^\/]+$/,"");_3.css=_1b;_2(_3,_1b,_1c);function _23(){if(--_21==0){if(_1d){_1d(_1c);}}};_23(_3);return _3;};var _24={process:_9,processAll:_a,parse:_17,generate:_5,update:_4.update,load:function(_25,_26,_27,_28){_26(["xstyle/css"],function(_29){_29.load(_25,_26,function(_2a){if(_2a){_9({sheet:_2a},_27);}else{_a();_27();}},_28);});}};return _24;});